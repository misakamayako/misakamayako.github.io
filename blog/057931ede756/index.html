<!DOCTYPE html><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha512-fHwaWebuwA7NSF5Qg/af4UeDx9XqUpYpOGgubo3yWu+b2IQR4UeQwbb42Ti7gVAjNtVoI/I9TEoYeu9omwcC6g==" crossorigin="anonymous"><html lang="zh-hans" class="h-full w-full m-0"> <head><meta charset="utf-8"><link rel="icon" type="image/jepg" href="/favicon.jpg"><meta name="viewport" content="width=device-width"><meta name="google-site-verification" content="-RgOsAO7rMTpJ8vNk8-ILdAA8VmiTEUc9HiUVVTKeEs"><meta name="generator" content="Astro v5.17.2"><title>âœ¨å¾¡å‚ç½‘ç»œ-ä¸ºä»€ä¹ˆä½ çš„å¤šæ¨¡å—é¡¹ç›®ä¸€å®šä¼šäº’ç›¸æ±¡æŸ“âœ¨</title><link rel="stylesheet" href="/_astro/index.C6IHRFDG.css">
<style>/*! tailwindcss v4.1.18 | MIT License | https://tailwindcss.com */
@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-border-style:solid}}}.okTgGW_footer{font-size:var(--text-sm,.875rem);line-height:var(--tw-leading,var(--text-sm--line-height,calc(1.25/.875)));color:var(--color-stone-400,#a6a09b);text-align:center;padding-block:calc(var(--spacing,.25rem)*4);border-top-color:var(--color-zinc-50,#fafafa);border-top-style:var(--tw-border-style);background-color:var(--color-slate-900,#0f172b);border-top-width:2px;width:100%;position:relative}@supports (color:color(display-p3 0 0 0)){.okTgGW_footer{color:var(--color-stone-400,color(display-p3 .647628 .627105 .61098));border-top-color:var(--color-zinc-50,color(display-p3 .980256 .980256 .980256));background-color:var(--color-slate-900,color(display-p3 .0639692 .0891152 .163036))}}@supports (color:lab(0% 0 0)){.okTgGW_footer{color:var(--color-stone-400,lab(66.2166% 1.88044 3.20326));border-top-color:var(--color-zinc-50,lab(98.26% 0 0));background-color:var(--color-slate-900,lab(7.78673% 1.82345 -15.0537))}}.okTgGW_footer a{text-decoration-line:underline}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}
/*! tailwindcss v4.1.18 | MIT License | https://tailwindcss.com */
@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-border-style:solid;--tw-translate-x:0;--tw-translate-y:0;--tw-translate-z:0}}}.q0UmqG_menu{height:calc(var(--spacing,.25rem)*16);padding-right:calc(var(--spacing,.25rem)*16);border-bottom-color:var(--color-zinc-50,#fafafa);border-bottom-style:var(--tw-border-style);text-align:right;border-bottom-width:2px}@supports (color:color(display-p3 0 0 0)){.q0UmqG_menu{border-bottom-color:var(--color-zinc-50,color(display-p3 .980256 .980256 .980256))}}@supports (color:lab(0% 0 0)){.q0UmqG_menu{border-bottom-color:var(--color-zinc-50,lab(98.26% 0 0))}}.q0UmqG_menu a{padding-inline:calc(var(--spacing,.25rem)*2);padding-block:calc(var(--spacing,.25rem)*2);font-size:var(--text-xl,1.25rem);line-height:var(--tw-leading,var(--text-xl--line-height,calc(1.75/1.25)));color:var(--color-zinc-50,#fafafa);margin-top:calc(var(--spacing,.25rem)*2.5);display:inline-block}@supports (color:color(display-p3 0 0 0)){.q0UmqG_menu a{color:var(--color-zinc-50,color(display-p3 .980256 .980256 .980256))}}@supports (color:lab(0% 0 0)){.q0UmqG_menu a{color:var(--color-zinc-50,lab(98.26% 0 0))}}@media (hover:hover){.q0UmqG_menu a:hover{--tw-translate-y:calc(var(--spacing,.25rem)*-.5);translate:var(--tw-translate-x)var(--tw-translate-y);color:var(--color-sky-500,#00a5ef)}@supports (color:color(display-p3 0 0 0)){.q0UmqG_menu a:hover{color:var(--color-sky-500,color(display-p3 .219113 .639027 .931479))}}@supports (color:lab(0% 0 0)){.q0UmqG_menu a:hover{color:var(--color-sky-500,lab(63.3038% -18.433 -51.0407))}}}.q0UmqG_menu a{transition-property:transform,translate,scale,rotate;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function,cubic-bezier(.4,0,.2,1)));transition-duration:var(--tw-duration,var(--default-transition-duration,.15s))}.q0UmqG_navLink{padding-inline:calc(var(--spacing,.25rem)*2);padding-block:calc(var(--spacing,.25rem)*2);font-size:var(--text-xl,1.25rem);line-height:var(--tw-leading,var(--text-xl--line-height,calc(1.75/1.25)));color:var(--color-zinc-50,#fafafa);margin-top:calc(var(--spacing,.25rem)*2.5);display:inline-block}@supports (color:color(display-p3 0 0 0)){.q0UmqG_navLink{color:var(--color-zinc-50,color(display-p3 .980256 .980256 .980256))}}@supports (color:lab(0% 0 0)){.q0UmqG_navLink{color:var(--color-zinc-50,lab(98.26% 0 0))}}@media (hover:hover){.q0UmqG_navLink:hover{color:var(--color-sky-500,#00a5ef)}@supports (color:color(display-p3 0 0 0)){.q0UmqG_navLink:hover{color:var(--color-sky-500,color(display-p3 .219113 .639027 .931479))}}@supports (color:lab(0% 0 0)){.q0UmqG_navLink:hover{color:var(--color-sky-500,lab(63.3038% -18.433 -51.0407))}}}.q0UmqG_navLink{transition:color .4s}.q0UmqG_avatar{float:right;border-radius:.25rem;display:inline-block;overflow:hidden}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-translate-x{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-y{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-z{syntax:"*";inherits:false;initial-value:0}
</style>
<link rel="stylesheet" href="/_astro/_slug_.aUcrWOZv.css"><script type="module" src="/_astro/page.D1uwR3nK.js"></script></head> <body class="w-full h-full flex flex-col"> <div class="bg-slate-800 h-screen flex flex-col"><div class="bg-slate-700 w-full"> <div class="q0UmqG_avatar"> <img src="/favicon.jpg" width="64" height="64" alt=""> </div> <nav class="q0UmqG_menu"> <a href="/" class="q0UmqG_navLink">home</a> <a href="/blog/" class="q0UmqG_navLink">blog</a> <a href="/utils/" class="q0UmqG_navLink">utils</a> <a href="/dream-map/" class="inline-block">dream map</a> <a href="/album/" class="q0UmqG_navLink">album</a> <a href="/about-me/" class="q0UmqG_navLink">about me</a> </nav> </div><div class="flex p-4 grow flex-row h-full overflow-hidden"><aside class="w-1/4 ml-4 md:block min-w-[200px] overflow-auto pr-2"><div class="sticky top-4 space-y-6"><div class="bg-slate-700 p-4 rounded-lg"><img src="/avatar.jpg" class="w-16 h-16 rounded-full mx-auto"><p class="text-white text-center mt-2">ä½œè€…ï¼šmisakamayako</p><p class="text-white text-center mt-2">å‘å¸ƒæ—¶é—´ï¼š2026/01/05</p></div><div class="bg-slate-700 p-4 rounded-lg"><h3 class="text-emerald-400 mb-2">ç®€ä»‹</h3><p class="text-white font-light mb-2">åˆ†äº† Module å¹¶ä¸ç­‰äºæ¶æ„è§£è€¦ã€‚æœ¬æ–‡æ·±åº¦è§£æ Android å¤šæ¨¡å—å¼€å‘ä¸­å¸¸è§çš„â€œä¾èµ–é™·é˜±â€ï¼Œæå‡º Feature as Library çš„æ ¸å¿ƒä¸–ç•Œè§‚ã€‚é€šè¿‡ç‰©ç†éš”ç¦»ã€API ä¸ Internal åˆ†ç¦»ä»¥åŠ App å£³å»ä¸šåŠ¡åŒ–ç­‰å®æˆ˜ç­–ç•¥ï¼Œå½»åº•è§£å†³ç¼–è¯‘ç¼“æ…¢ä¸æ¨¡å—æ±¡æŸ“é—®é¢˜ï¼Œæ„å»ºçœŸæ­£å¯æ‰©å±•çš„è½¯ä»¶æ¶æ„ã€‚</p></div><!-- 2. å…³è”æ–‡ç«  --><div class="mb-4 rounded-xl bg-slate-700 p-5 shadow-xl border border-slate-600/50"><div class="mb-4 flex items-center justify-between border-b border-slate-600 pb-3"><div><h3 class="text-xs tracking-widest font-bold text-emerald-400 uppercase">
Series</h3><h2 class="text-base font-bold text-slate-100">åœ¨ Android ä¸­æ„å»ºå¯é•¿æœŸæ¼”åŒ–çš„ Feature æ¶æ„ï¼šä»æ¨¡å—è¾¹ç•Œåˆ°å•å‘æ•°æ®æµ</h2></div><span class="rounded-sm bg-slate-800 px-2 py-0.5 text-xs font-mono text-slate-300 border border-slate-600">1/5</span></div><div class="relative flex flex-col"><div class="absolute left-[7px] top-2 bottom-2 w-0.5 bg-slate-600 rounded-full"></div><a href="/blog/057931ede756/" class="group relative flex gap-4 py-2 transition-all items-center pointer-events-none"><div class="relative z-10 flex h-3.5 w-3.5 items-center justify-center"><div class="h-3 w-3 rounded-full bg-blue-400 shadow-[0_0_8px_var(--color-blue-400)] ring-4 ring-blue-400/20"></div></div><div class="flex flex-col"><span class="text-sm leading-snug transition-colors font-bold text-blue-400">ä¸ºä»€ä¹ˆä½ çš„å¤šæ¨¡å—é¡¹ç›®ä¸€å®šä¼šäº’ç›¸æ±¡æŸ“</span></div></a><a href="/blog/45493f6eef9d/" class="group relative flex gap-4 py-2 transition-all items-center hover:pl-1"><div class="relative z-10 flex h-3.5 w-3.5 items-center justify-center"><div class="h-3 w-3 rounded-full border-2 border-slate-500 bg-slate-700 group-hover:border-slate-300 transition-colors"></div></div><div class="flex flex-col"><span class="text-sm leading-snug transition-colors text-slate-300 group-hover:text-white">Core æ¨¡å—ä¸æ˜¯å·¥å…·ç®±ï¼šAndroid æ¶æ„é‡Œçš„â€œåœ°åŸºå±‚â€è¯¥æ”¾ä»€ä¹ˆ</span></div></a><a href="/blog/ea305ecafca7/" class="group relative flex gap-4 py-2 transition-all items-center hover:pl-1"><div class="relative z-10 flex h-3.5 w-3.5 items-center justify-center"><div class="h-3 w-3 rounded-full border-2 border-slate-500 bg-slate-700 group-hover:border-slate-300 transition-colors"></div></div><div class="flex flex-col"><span class="text-sm leading-snug transition-colors text-slate-300 group-hover:text-white">è®© Feature åƒç¬¬ä¸‰æ–¹åº“ä¸€æ ·è¢«ä½¿ç”¨ï¼šAPI ä¸ Internal çš„è¾¹ç•Œè®¾è®¡</span></div></a><a href="/blog/24a358bdbf05/" class="group relative flex gap-4 py-2 transition-all items-center hover:pl-1"><div class="relative z-10 flex h-3.5 w-3.5 items-center justify-center"><div class="h-3 w-3 rounded-full border-2 border-slate-500 bg-slate-700 group-hover:border-slate-300 transition-colors"></div></div><div class="flex flex-col"><span class="text-sm leading-snug transition-colors text-slate-300 group-hover:text-white">MVI åœ¨çœŸå®é¡¹ç›®ä¸­è¯¥æ€ä¹ˆè½åœ°ï¼šStateã€Intent ä¸ Effect çš„è¾¹ç•Œ</span></div></a><a href="/blog/435a921db46b/" class="group relative flex gap-4 py-2 transition-all items-center hover:pl-1"><div class="relative z-10 flex h-3.5 w-3.5 items-center justify-center"><div class="h-3 w-3 rounded-full border-2 border-slate-500 bg-slate-700 group-hover:border-slate-300 transition-colors"></div></div><div class="flex flex-col"><span class="text-sm leading-snug transition-colors text-slate-300 group-hover:text-white">å½“å¯¼èˆªå˜æˆçŠ¶æ€ï¼šå½»åº•æŠ›å¼ƒ NavController çš„çº¯ MVI å¯¼èˆª</span></div></a></div></div><!-- 3. éšæœºæ–‡ç«  --><div class="bg-slate-700 p-4 rounded-lg"><h3 class="text-emerald-400 mb-2">éšä¾¿çœ‹çœ‹</h3><div class="flex flex-wrap gap-2"><a class="px-3 py-1 bg-slate-600 rounded-full text-sm text-white hover:bg-emerald-500 transition" href="/blog/cdd26be77a2a/">æ•°æ®åº“è®¾è®¡çš„å…­ç§èŒƒå¼</a><a class="px-3 py-1 bg-slate-600 rounded-full text-sm text-white hover:bg-emerald-500 transition" href="/blog/45493f6eef9d/">Core æ¨¡å—ä¸æ˜¯å·¥å…·ç®±ï¼šAndroid æ¶æ„é‡Œçš„â€œåœ°åŸºå±‚â€è¯¥æ”¾ä»€ä¹ˆ</a><a class="px-3 py-1 bg-slate-600 rounded-full text-sm text-white hover:bg-emerald-500 transition" href="/blog/60810af53675/">å¦‚ä½•ä¼˜é›…åœ°å¤„ç†ç”¨æˆ·å–æ¶ˆæ–‡ä»¶ä¸Šä¼ çš„æ“ä½œ</a></div></div></div></aside><main class="grow h-full overflow-auto w-3/4 px-8"><article class="text-zinc-200 mb-2 prose lg:prose-xl prose-stone
                 prose-headings:text-current prose-strong:text-current prose-code:text-current
                 prose-a:text-violet-200 prose-blockquote:text-stone-100"> <header> <h1>ä¸ºä»€ä¹ˆä½ çš„å¤šæ¨¡å—é¡¹ç›®ä¸€å®šä¼šäº’ç›¸æ±¡æŸ“</h1> </header> <blockquote>
<p><strong>â€œå¦‚æœä¸å®šä¹‰è¾¹ç•Œï¼Œç†µå¢ä¼šåå™¬ä¸€åˆ‡ã€‚â€</strong></p>
</blockquote>
<p>åœ¨ Android å¼€å‘ä¸­ï¼Œæˆ‘ç»å¸¸é—®ä¸€ä¸ªé—®é¢˜ï¼šâ€œä½ ä»¬çš„é¡¹ç›®æ¶æ„æ˜¯ä»€ä¹ˆï¼Ÿâ€
åä¸ªäººé‡Œæœ‰å…«ä¸ªä¼šå›ç­”ï¼šâ€œæˆ‘ä»¬ç”¨äº†å¤šæ¨¡å—ï¼ˆMulti-Moduleï¼‰ã€‚â€</p>
<p>ç»§ç»­è¿½é—®ï¼šâ€œé‚£ä½ ä»¬çš„æ¨¡å—ä¹‹é—´æ€ä¹ˆäº¤äº’ï¼Ÿâ€
è¿™æ—¶å€™ï¼Œç©ºæ°”é€šå¸¸ä¼šçªç„¶å®‰é™ï¼Œæˆ–è€…æˆ‘å¬åˆ°ç±»ä¼¼çš„å›ç­”ï¼š</p>
<ul>
<li>â€œå“¦ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ª <code>Common</code> æ¨¡å—ï¼Œæ‰€æœ‰ä¸œè¥¿éƒ½åœ¨é‡Œé¢ã€‚â€</li>
<li>â€œ<code>Home</code> æ¨¡å—ä¾èµ–äº† <code>User</code> æ¨¡å—ï¼Œå› ä¸ºé¦–é¡µè¦æ˜¾ç¤ºå¤´åƒã€‚â€</li>
<li>â€œæˆ‘ä»¬åœ¨ <code>App</code> å£³é‡Œå†™äº†ä¸€äº›èƒ¶æ°´ä»£ç ï¼Œå› ä¸ºæœ‰æ—¶å€™ A æ¨¡å—éœ€è¦è°ƒ B æ¨¡å—çš„æ–¹æ³•ã€‚â€</li>
</ul>
<p>åŠå¹´åï¼Œè¿™äº›é¡¹ç›®é€šå¸¸ä¼šé¢ä¸´åŒä¸€ä¸ªç»“å±€ï¼š<strong>ç¼–è¯‘é€Ÿåº¦ææ…¢ï¼Œæ¨¡å—é—´ä¾èµ–æˆç½‘ï¼Œæ”¹ä¸€ä¸ª Data Class å¯¼è‡´å…¨é‡é‡æ–°ç¼–è¯‘ã€‚</strong></p>
<p>ä¸ºä»€ä¹ˆä½ æ˜æ˜æ‹†åˆ†äº† Moduleï¼Œæ¶æ„å´ä¾ç„¶æ˜¯ä¸€å›¢ä¹±éº»ï¼Ÿ
å› ä¸º<strong>åˆ†äº† Module <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo mathvariant="normal">â‰ </mo></mrow><annotation encoding="application/x-tex">\neq</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord"><span class="mrel">î€ </span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span></span></span></span> æ¶æ„è§£è€¦</strong>ã€‚</p>
<p>è¿™ç¯‡ä½œä¸ºç³»åˆ—çš„å¼€ç¯‡ï¼Œæˆ‘ä»¬è¦å…ˆè¾¾æˆä¸€ä¸ªå…±è¯†ï¼š<strong>æ¨¡å—è¾¹ç•Œæœ¬èº«ï¼Œå°±æ˜¯ä¸€ç§æœ€é«˜çº§åˆ«çš„è®¾è®¡å†³ç­–ã€‚</strong></p>
<h2 id="ä¸€-ç‰©ç†éš”ç¦»-vs-é€»è¾‘éš”ç¦»">ä¸€ã€ ç‰©ç†éš”ç¦» vs é€»è¾‘éš”ç¦»</h2>
<p>å¾ˆå¤šå›¢é˜Ÿæ‹†åˆ†æ¨¡å—çš„åˆè¡·éå¸¸æœ´ç´ ï¼šæ–‡ä»¶å¤ªå¤šäº†ï¼ŒæŠŠå®ƒä»¬åˆ†è£…åˆ°ä¸åŒçš„æ–‡ä»¶å¤¹é‡Œï¼ˆGradle Moduleï¼‰çœ‹èµ·æ¥æ•´æ´ä¸€ç‚¹ã€‚</p>
<p>è¿™ç§åšæ³•æˆ‘ç§°ä¹‹ä¸º <strong>â€œæ–‡ä»¶å¤¹å¼çš„å¤šæ¨¡å—â€</strong>ã€‚å®ƒæœ€å¤§çš„é—®é¢˜åœ¨äºï¼Œå¼€å‘è€…ä¾ç„¶ä¿ç•™ç€ <strong>â€œå…¨å±€è§†é‡â€</strong>ã€‚</p>
<p>å½“ä½ åœ¨ <code>feature:cart</code>ï¼ˆè´­ç‰©è½¦ï¼‰å†™ä»£ç æ—¶ï¼ŒIDE å‘Šè¯‰ä½  <code>feature:goods</code>ï¼ˆå•†å“ï¼‰å°±åœ¨éš”å£ã€‚åªè¦ä½ åœ¨ <code>build.gradle</code> é‡Œæ•²ä¸‹ä¸€è¡Œ <code>implementation(project(":feature:goods"))</code>ï¼Œä½ å°±å¯ä»¥ç›´æ¥è°ƒç”¨å•†å“æ¨¡å—çš„ä»£ç ã€‚</p>
<p>è¿™ä¸€è¡Œä»£ç æ•²ä¸‹å»çš„é‚£ä¸€åˆ»ï¼Œä½ çš„æ¶æ„å°±å¼€å§‹å´©å¡Œäº†ã€‚</p>
<p>ä¸€æ—¦å¼€å¯äº†â€œFeature äº’è°ƒâ€çš„å£å­ï¼Œä¸šåŠ¡å‹åŠ›ä¼šè¿…é€ŸæŠŠä¾èµ–ç½‘å˜æˆè¿™å°±å›¾ï¼š
<code>A -> B -> C -> A</code></p>
<p>è¿™å°±æ˜¯<strong>å¾ªç¯ä¾èµ–</strong>çš„æ¸©åºŠã€‚ä¸ºäº†è§£å†³å¾ªç¯ä¾èµ–ï¼Œä½ å¯èƒ½ä¼šæŠŠå…¬å…±éƒ¨åˆ†ä¸‹æ²‰åˆ° <code>Core</code>ï¼Œä¹…è€Œä¹…ä¹‹ï¼Œ<code>Core</code> å˜æˆäº†åƒåœ¾å †ï¼Œé‡Œé¢å¡æ»¡äº†å„ç§ä¸šåŠ¡çš„å®ä½“ç±»ã€å·¥å…·ç±»å’Œå¸¸é‡ï¼ŒåŸæœ¬çš„â€œå¤šæ¨¡å—â€åå­˜å®äº¡ã€‚</p>
<h2 id="äºŒ-æ ¸å¿ƒä¸–ç•Œè§‚feature-as-library">äºŒã€ æ ¸å¿ƒä¸–ç•Œè§‚ï¼šFeature as Library</h2>
<p>è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥ä¸€ä¸ªæ–°çš„å¿ƒæ™ºæ¨¡å‹ï¼š<strong>Feature as Libraryï¼ˆå°†ä¸šåŠ¡æ¨¡å—è§†ä¸ºç¬¬ä¸‰æ–¹åº“ï¼‰</strong>ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ­£åœ¨å¼€å‘çš„ <code>feature:user</code> æ¨¡å—ï¼Œå¹¶ä¸æ˜¯ä½ é¡¹ç›®çš„ä¸€éƒ¨åˆ†ï¼Œè€Œæ˜¯ä¸€ä¸ªå‘å¸ƒåœ¨ Maven Central ä¸Šçš„ç¬¬ä¸‰æ–¹ SDKï¼ˆæ¯”å¦‚åƒ Retrofit é‚£æ ·ï¼‰ã€‚</p>
<p>åœ¨è¿™ä¸ªè®¾å®šä¸‹ï¼Œä½ å¿…é¡»éµå®ˆä»¥ä¸‹é“å¾‹ï¼š</p>
<ol>
<li><strong>ä½ ä¸çŸ¥é“è°åœ¨ç”¨ä½ </strong>ï¼šä½ ä¸èƒ½ä¾èµ– <code>:app</code> å£³å·¥ç¨‹ï¼Œä¹Ÿä¸èƒ½ä¾èµ–å…·ä½“çš„ä¸šåŠ¡åœºæ™¯ã€‚</li>
<li><strong>ä½ ä¸çŸ¥é“è°å’Œä½ åœ¨ä¸€èµ·</strong>ï¼šä½ ä¸èƒ½å‡è®¾ <code>:feature:chat</code> å’Œä½ åœ¨åŒä¸€ä¸ª App é‡Œï¼Œä½ ç»å¯¹ä¸èƒ½ä¾èµ–å…¶ä»– Featureã€‚</li>
<li><strong>ä½ åªèƒ½ä¾èµ–åŸºç¡€è®¾æ–½</strong>ï¼šä½ å¯ä»¥ä¾èµ– <code>:core</code>ï¼ˆå› ä¸ºå®ƒæ˜¯ Android æ ‡å‡†åº“çº§åˆ«çš„å­˜åœ¨ï¼‰ã€‚</li>
</ol>
<p>åœ¨è¿™ä¸ªæ¶æ„ä¸‹ï¼Œæˆ‘ä»¬çš„ä¾èµ–å…³ç³»æ ‘æ˜¯éå¸¸å¹²å‡€çš„å•å‘æµåŠ¨ï¼š</p>





























<table><thead><tr><th align="left">å±‚çº§</th><th align="left">æ¨¡å—</th><th align="left">èŒè´£ä¸è§†è§’</th><th align="left">ä¾èµ–è§„åˆ™</th></tr></thead><tbody><tr><td align="left"><strong>Top</strong></td><td align="left"><strong><code>app</code> (å£³)</strong></td><td align="left"><strong>ä¸Šå¸è§†è§’</strong>ã€‚å®ƒçŸ¥é“æ‰€æœ‰ Feature çš„å­˜åœ¨ï¼Œè´Ÿè´£æŠŠå®ƒä»¬ç»„è£…èµ·æ¥ï¼ˆä¾èµ–æ³¨å…¥ã€å¯¼èˆªæ³¨å†Œï¼‰ã€‚</td><td align="left">ä¾èµ–æ‰€æœ‰ <code>feature</code></td></tr><tr><td align="left"><strong>Mid</strong></td><td align="left"><strong><code>feature:*</code></strong></td><td align="left"><strong>å­¤å²›è§†è§’</strong>ã€‚åªå…³æ³¨è‡ªå·±çš„ä¸šåŠ¡é—­ç¯ã€‚ä¸çŸ¥é“å…¶ä»–å…„å¼Ÿæ¨¡å—çš„å­˜åœ¨ã€‚</td><td align="left">ä¾èµ– <code>core</code>ï¼Œ<strong>ç»ä¸äº’èµ–</strong></td></tr><tr><td align="left"><strong>Base</strong></td><td align="left"><strong><code>core:*</code></strong></td><td align="left"><strong>å·¥å…·è§†è§’</strong>ã€‚æä¾›åŸºç¡€è®¾æ–½ï¼ˆLog, Net, UI Systemï¼‰ï¼Œå®Œå…¨ä¸æ‡‚ä¸šåŠ¡ã€‚</td><td align="left">æ— é¡¹ç›®å†…ä¾èµ–</td></tr></tbody></table>
<h2 id="ä¸‰-ä¸ºä»€ä¹ˆ-feature-ä¹‹é—´åšå†³ä¸èƒ½ç›´æ¥ä¾èµ–">ä¸‰ã€ ä¸ºä»€ä¹ˆ Feature ä¹‹é—´åšå†³ä¸èƒ½ç›´æ¥ä¾èµ–ï¼Ÿ</h2>
<p>ä½ å¯èƒ½ä¼šé—®ï¼šâ€œä½†æ˜¯ï¼Œè´­ç‰©è½¦æ¨¡å—ç¡®å®éœ€è¦è·å–ç”¨æˆ·ä¿¡æ¯å•Šï¼å¦‚æœä¸è®©ä¾èµ– <code>feature:user</code>ï¼Œæˆ‘æ€ä¹ˆæ‹¿æ•°æ®ï¼Ÿâ€</p>
<p>è¿™æ˜¯ä¸€ä¸ªç»å…¸è¯¯åŒºã€‚<strong>â€œéœ€è¦æ•°æ®â€ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo mathvariant="normal">â‰ </mo></mrow><annotation encoding="application/x-tex">\neq</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord"><span class="mrel">î€ </span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span></span></span></span> â€œéœ€è¦ä¾èµ–æ¨¡å—â€</strong>ã€‚</p>
<p>å½“ä½ è®© <code>feature:cart</code> ç›´æ¥ä¾èµ– <code>feature:user</code> æ—¶ï¼Œä½ ä»˜å‡ºçš„ä»£ä»·æ˜¯å·¨å¤§çš„ï¼š</p>
<ol>
<li><strong>ç¼–è¯‘ç¾éš¾</strong>ï¼š<code>User</code> æ¨¡å—å“ªæ€•æ”¹äº†ä¸€è¡Œæ³¨é‡Šï¼Œ<code>Cart</code> æ¨¡å—ä¹Ÿè¦é‡æ–°ç¼–è¯‘ã€‚å¦‚æœä¾èµ–é“¾å¾ˆé•¿ï¼Œå¢é‡ç¼–è¯‘å°±å˜æˆäº†å…¨é‡ç¼–è¯‘ã€‚</li>
<li><strong>æ³„éœ²å®ç°ç»†èŠ‚</strong>ï¼š<code>Cart</code> å¯èƒ½ä¼šä¸å°å¿ƒè°ƒç”¨äº† <code>User</code> çš„å†…éƒ¨æ•°æ®åº“é€»è¾‘ï¼Œå¯¼è‡´ä¸¤ä¸ªæ¨¡å—åœ¨æ•°æ®åº“å±‚çº§è€¦åˆã€‚</li>
<li><strong>æ— æ³•ç‹¬ç«‹æµ‹è¯•</strong>ï¼šä½ å¾ˆéš¾å•ç‹¬è¿è¡Œ <code>Cart</code> æ¨¡å—ï¼Œå› ä¸ºå®ƒæ‹–å®¶å¸¦å£ã€‚</li>
</ol>
<p><strong>æ­£ç¡®çš„åšæ³•æ˜¯</strong>ï¼š
å®šä¹‰ä¸€ä¸ª<strong>æ¥å£</strong>ï¼ˆAbstractionsï¼‰ã€‚</p>
<ul>
<li>å¦‚æœéœ€è¦æ•°æ®ï¼šåœ¨ <code>core</code> æˆ–å…±äº«çš„ API å±‚å®šä¹‰æ¥å£ <code>UserProvider</code>ã€‚</li>
<li>å¦‚æœéœ€è¦è·³è½¬ï¼šåœ¨ <code>core</code> å®šä¹‰è·¯ç”±æ¥å£ã€‚</li>
<li><strong>è°æ¥å®ç°æ¥å£ï¼Ÿ</strong> <code>feature:user</code> å®ç°ã€‚</li>
<li><strong>è°æ¥æ³¨å…¥å®ç°ï¼Ÿ</strong> <code>app</code> å£³å·¥ç¨‹ï¼ˆé€šè¿‡ DI å®¹å™¨ï¼‰ã€‚</li>
</ul>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨æ¶æ„å›¾é‡Œå¼ºè°ƒ <strong>DI Container</strong> å¿…é¡»åœ¨ <code>app</code> å±‚ã€‚å®ƒæ˜¯å”¯ä¸€çš„èƒ¶æ°´ã€‚</p>
<h2 id="å››-å¼•å…¥-api-ä¸-internalç‰©ç†ä¸Šçš„å¼ºåˆ¶çº¦æŸ">å››ã€ å¼•å…¥ API ä¸ Internalï¼šç‰©ç†ä¸Šçš„å¼ºåˆ¶çº¦æŸ</h2>
<p>ä¸ºäº†ä»ç‰©ç†ä¸Šæœç»â€œä¸å°å¿ƒä¾èµ–äº†å®ç°ç»†èŠ‚â€çš„æƒ…å†µï¼Œæˆ‘ä»¬åœ¨åç»­çš„æ–‡ç« ä¸­ä¼šå¼•å…¥ä¸€ç§ç‰¹æ®Šçš„å·¥ç¨‹ç»“æ„ï¼š<strong>API / Internal åˆ†ç¦»</strong>ã€‚</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="text"><code><span class="line"><span>feature/user/</span></span>
<span class="line"><span>â”œâ”€â”€ api/       &#x3C;-- åªæœ‰è¿™é‡Œå¯¹å¤–å¯è§</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ model/</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ UserRepository.kt (Interface)</span></span>
<span class="line"><span>â”‚   â””â”€â”€ UserGraph.kt</span></span>
<span class="line"><span>â””â”€â”€ internal/  &#x3C;-- è¿™é‡Œå…¨æ˜¯ç§˜å¯†</span></span>
<span class="line"><span>    â”œâ”€â”€ data/</span></span>
<span class="line"><span>    â”œâ”€â”€ presentation/</span></span>
<span class="line"><span>    â””â”€â”€ di/</span></span></code></pre>
<ul>
<li>å…¶ä»–æ¨¡å—ï¼ˆå¦‚ App å£³ï¼‰åªèƒ½ä¾èµ– <code>feature:user:api</code>ã€‚</li>
<li><code>feature:user:internal</code> å®ç°äº† APIï¼Œä½†å¯¹å¤–éƒ¨å®Œå…¨éšè—ã€‚</li>
</ul>
<p>è¿™å°±åƒ Retrofitï¼šä½ åªèƒ½çœ‹åˆ° <code>Call&#x3C;T></code> æ¥å£ï¼ˆAPIï¼‰ï¼Œä½ çœ‹ä¸åˆ°å®ƒåº•å±‚æ˜¯æ€ä¹ˆè§£æ Socket çš„ï¼ˆInternalï¼‰ã€‚</p>
<p>è¿™ç§ç»“æ„å¼ºåˆ¶å®ç°äº† <strong>â€œæ¥å£ç¼–ç¨‹â€</strong>ã€‚å³ä¾¿ä½ æƒ³çŠ¯é”™ï¼ŒIDE ä¹Ÿä¼šå‘Šè¯‰ä½ ï¼š<code>Unresolved reference</code>ã€‚</p>
<h2 id="äº”-ä¸ºä»€ä¹ˆ-app-å£³ä¸è¯¥æœ‰ä¸šåŠ¡é€»è¾‘">äº”ã€ ä¸ºä»€ä¹ˆ App å£³ä¸è¯¥æœ‰ä¸šåŠ¡é€»è¾‘ï¼Ÿ</h2>
<p>åœ¨å¾ˆå¤šé¡¹ç›®ä¸­ï¼Œ<code>MainActivity</code> æ‰¿è½½äº†å¤ªå¤šçš„é€»è¾‘ï¼šåˆå§‹åŒ–æ¨é€ã€åˆ¤æ–­ç™»å½•çŠ¶æ€è·³è½¬ã€å¤„ç†å…¨å±€å¼¹çª—â€¦â€¦</p>
<p>åœ¨è¿™ä¸ªæ¶æ„ä¸­ï¼Œ<strong><code>app</code> æ¨¡å—åº”è¯¥æåº¦â€œæ„šè ¢â€</strong>ã€‚</p>
<p>å®ƒçš„èŒè´£åªæœ‰ä¸¤ä¸ªï¼š</p>
<ol>
<li><strong>åˆå§‹åŒ–</strong>ï¼šå¯åŠ¨ Applicationï¼Œåˆå§‹åŒ– DI å®¹å™¨ï¼ˆKoin/Hiltï¼‰ã€‚</li>
<li><strong>èšåˆ</strong>ï¼šæŠŠå„ä¸ª <code>feature</code> çš„å¯¼èˆªå›¾ï¼ˆGraphï¼‰æ‹¼åœ¨ä¸€èµ·ã€‚</li>
</ol>
<p>å¦‚æœ <code>app</code> æ¨¡å—é‡Œå‡ºç°äº† <code>if (isLogin) { ... }</code> è¿™æ ·çš„ä¸šåŠ¡åˆ¤æ–­ï¼Œè¯´æ˜ä½ çš„æ¶æ„æ¼æ°´äº†ã€‚è¿™äº›é€»è¾‘åº”è¯¥ä¸‹æ²‰åˆ° <code>Core</code> çš„ä¸­é—´ä»¶æˆ–è€…ç‰¹å®šçš„ <code>Feature</code> ä¸­ã€‚</p>
<h2 id="å…­-æ€»ç»“">å…­ã€ æ€»ç»“</h2>
<p>è¿™ä¸€ç¯‡æˆ‘ä»¬æ²¡æœ‰å†™ä¸€è¡Œä»£ç ï¼Œä½†æˆ‘ä»¬ç¡®ç«‹äº†æœ€é‡è¦çš„æ¶æ„åŸåˆ™ï¼š</p>
<ol>
<li><strong>Feature ä¹‹é—´æ˜¯è€æ­»ä¸ç›¸å¾€æ¥çš„å­¤å²›</strong>ã€‚</li>
<li><strong>é€šè®¯é æ¥å£ï¼Œç»„è£…é  App å£³</strong>ã€‚</li>
<li><strong>Core æ˜¯åœ°åŸºï¼Œä¸æ˜¯åƒåœ¾æ¡¶</strong>ã€‚</li>
</ol>
<p>è¿™ç§ä¸¥è‹›çš„è¾¹ç•Œåˆ’åˆ†ï¼Œèµ·åˆä¼šè®©ä½ è§‰å¾—â€œå†™ä¸ªä»£ç æ€ä¹ˆè¿™ä¹ˆéº»çƒ¦ï¼Œè¿˜è¦å®šä¹‰æ¥å£â€ã€‚ä½†éšç€é¡¹ç›®æ¼”è¿›åˆ°å‡ åä¸ªæ¨¡å—ã€å‡ åä¸‡è¡Œä»£ç æ—¶ï¼Œä½ ä¼šæ„Ÿè°¢è¿™ç§è¾¹ç•Œã€‚å› ä¸ºå®ƒä¿è¯äº†ä½ çš„<strong>ç¼–è¯‘é€Ÿåº¦</strong>ï¼Œä¿è¯äº†æ¨¡å—çš„<strong>å¯æ›¿æ¢æ€§</strong>ï¼Œæ›´ä¿è¯äº†æ–°åŠ å…¥çš„åŒäº‹ä¸ä¼šæŠŠä»£ç å†™æˆä¸€å›¢ä¹±éº»ã€‚</p>
<p>ç¡®ç«‹äº†ä¸–ç•Œè§‚åï¼Œä¸‹ä¸€ç¯‡æˆ‘ä»¬å°†ç›®å…‰æŠ•å‘æœ€åº•å±‚ã€‚æˆ‘ä»¬å°†æ¢è®¨é‚£ä¸ªæœ€å®¹æ˜“è¢«å†™ä¹±çš„æ¨¡å— â€”â€” <strong>Core</strong>ã€‚</p>
<p><strong>ä¸‹ä¸€ç¯‡ï¼š<a href="/blog/45493f6eef9d/">ã€ŠCore æ¨¡å—ä¸æ˜¯å·¥å…·ç®±ï¼šAndroid æ¶æ„é‡Œçš„â€œåœ°åŸºå±‚â€è¯¥æ”¾ä»€ä¹ˆã€‹</a></strong></p> </article><div class="tags"><div class="_tailmateTag_u5zwa_5"><a href="/blog/tag/è½¯ä»¶æ¶æ„/">è½¯ä»¶æ¶æ„</a></div><div class="_tailmateTag_u5zwa_5"><a href="/blog/tag/Android/">Android</a></div><div class="_tailmateTag_u5zwa_5"><a href="/blog/tag/Kotlin/">Kotlin</a></div><div class="_tailmateTag_u5zwa_5"><a href="/blog/tag/æ€§èƒ½ä¼˜åŒ–/">æ€§èƒ½ä¼˜åŒ–</a></div><div class="_tailmateTag_u5zwa_5"><a href="/blog/tag/JVM/">JVM</a></div><div class="_tailmateTag_u5zwa_5"><a href="/blog/tag/åç«¯è®¾è®¡/">åç«¯è®¾è®¡</a></div><div class="_tailmateTag_u5zwa_5"><a href="/blog/tag/æ•°æ®ç®¡ç†/">æ•°æ®ç®¡ç†</a></div></div></main></div><div class="okTgGW_footer"> <p>Supported and developed by&nbsp;
<a href="https://github.com/misakamayako/" target="_blank" rel="noreferrer">misaka mayako</a> </p> <p>
Tech with <a href="https://astro.build/" target="_blank" rel="noreferrer">astro</a>,&nbsp;
<a href="https://tailwindcss.com/" target="_blank" rel="noreferrer">tailwindcss</a>,&nbsp;
        and <a href="https://pm2.keymetrics.io/" target="_blank" rel="noreferrer">pm2</a>,&nbsp;
</p> <p> feed back via <a href="mailto:misakamayaco@qq.com" target="_blank" rel="noreferrer">ğŸ“«</a></p> <a rel="license noreferrer" href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" class="absolute right-6 bottom-6"> <img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" class="inlin-block border-0" src="/cc4.0.png"> </a> </div></div><script type="module" is:global>
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('pre').forEach((block) => {
                if (block.dataset.language === 'plaintext') return
                const button = document.createElement('button')
                button.innerText = 'å¤åˆ¶'
                button.className =
                    'absolute top-2 right-2 bg-slate-800 text-white px-2 py-1 rounded text-sm opacity-50 hover:opacity-100 transition cursor-pointer'
                button.addEventListener('click', () => {
                    const code = block.querySelector('code')
                    if (code) {
                        navigator.clipboard.writeText(code.innerText).then(() => {
                            button.innerText = 'å·²å¤åˆ¶ï¼'
                            setTimeout(() => (button.innerText = 'å¤åˆ¶'), 1000)
                        })
                    }
                })
                block.classList.add('relative')
                block.appendChild(button)
            })
        })
    </script> </body></html>