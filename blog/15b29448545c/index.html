<!DOCTYPE html><html lang="zh-hans" class="h-full w-full m-0"> <head><meta charset="utf-8"><link rel="icon" type="image/jepg" href="/favicon.jpg"><meta name="viewport" content="width=device-width"><meta name="google-site-verification" content="-RgOsAO7rMTpJ8vNk8-ILdAA8VmiTEUc9HiUVVTKeEs"><meta name="generator" content="Astro v5.14.3"><title>âœ¨å¾¡å‚ç½‘ç»œ-Web Worker ç±»å‹æ¦‚è§ˆâœ¨</title><link rel="stylesheet" href="/_astro/index.CVE_tfyK.css">
<style>/*! tailwindcss v4.1.12 | MIT License | https://tailwindcss.com */
@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-border-style:solid}}}.okTgGW_footer{font-size:var(--text-sm,.875rem);line-height:var(--tw-leading,var(--text-sm--line-height,calc(1.25/.875)));color:var(--color-stone-400,#a6a09b);text-align:center;padding-block:calc(var(--spacing,.25rem)*4);border-top-color:var(--color-zinc-50,#fafafa);border-top-style:var(--tw-border-style);background-color:var(--color-slate-900,#0f172b);border-top-width:2px;width:100%;position:relative}@supports (color:color(display-p3 0 0 0)){.okTgGW_footer{color:var(--color-stone-400,color(display-p3 .647628 .627105 .61098));border-top-color:var(--color-zinc-50,color(display-p3 .980256 .980256 .980256));background-color:var(--color-slate-900,color(display-p3 .0639692 .0891152 .163036))}}@supports (color:lab(0% 0 0)){.okTgGW_footer{color:var(--color-stone-400,lab(66.2166% 1.88047 3.20326));border-top-color:var(--color-zinc-50,lab(98.26% -.0000298023 0));background-color:var(--color-slate-900,lab(7.78673% 1.82345 -15.0537))}}.okTgGW_footer a{text-decoration-line:underline}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}
/*! tailwindcss v4.1.12 | MIT License | https://tailwindcss.com */
@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-border-style:solid;--tw-translate-x:0;--tw-translate-y:0;--tw-translate-z:0}}}.q0UmqG_menu{height:calc(var(--spacing,.25rem)*16);padding-right:calc(var(--spacing,.25rem)*16);border-bottom-color:var(--color-zinc-50,#fafafa);border-bottom-style:var(--tw-border-style);text-align:right;border-bottom-width:2px}@supports (color:color(display-p3 0 0 0)){.q0UmqG_menu{border-bottom-color:var(--color-zinc-50,color(display-p3 .980256 .980256 .980256))}}@supports (color:lab(0% 0 0)){.q0UmqG_menu{border-bottom-color:var(--color-zinc-50,lab(98.26% -.0000298023 0))}}.q0UmqG_menu a{padding-inline:calc(var(--spacing,.25rem)*2);padding-block:calc(var(--spacing,.25rem)*2);font-size:var(--text-xl,1.25rem);line-height:var(--tw-leading,var(--text-xl--line-height,calc(1.75/1.25)));color:var(--color-zinc-50,#fafafa);margin-top:calc(var(--spacing,.25rem)*2.5);display:inline-block}@supports (color:color(display-p3 0 0 0)){.q0UmqG_menu a{color:var(--color-zinc-50,color(display-p3 .980256 .980256 .980256))}}@supports (color:lab(0% 0 0)){.q0UmqG_menu a{color:var(--color-zinc-50,lab(98.26% -.0000298023 0))}}@media (hover:hover){.q0UmqG_menu a:hover{--tw-translate-y:calc(var(--spacing,.25rem)*-.5);translate:var(--tw-translate-x)var(--tw-translate-y);color:var(--color-sky-500,#00a5ef)}@supports (color:color(display-p3 0 0 0)){.q0UmqG_menu a:hover{color:var(--color-sky-500,color(display-p3 .219113 .639027 .931479))}}@supports (color:lab(0% 0 0)){.q0UmqG_menu a:hover{color:var(--color-sky-500,lab(63.3038% -18.433 -51.0407))}}}.q0UmqG_menu a{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function,cubic-bezier(.4,0,.2,1)));transition-duration:var(--tw-duration,var(--default-transition-duration,.15s));transition-property:transform,translate,scale,rotate;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function,cubic-bezier(.4,0,.2,1)));transition-duration:var(--tw-duration,var(--default-transition-duration,.15s))}.q0UmqG_navLink{padding-inline:calc(var(--spacing,.25rem)*2);padding-block:calc(var(--spacing,.25rem)*2);font-size:var(--text-xl,1.25rem);line-height:var(--tw-leading,var(--text-xl--line-height,calc(1.75/1.25)));color:var(--color-zinc-50,#fafafa);margin-top:calc(var(--spacing,.25rem)*2.5);display:inline-block}@supports (color:color(display-p3 0 0 0)){.q0UmqG_navLink{color:var(--color-zinc-50,color(display-p3 .980256 .980256 .980256))}}@supports (color:lab(0% 0 0)){.q0UmqG_navLink{color:var(--color-zinc-50,lab(98.26% -.0000298023 0))}}@media (hover:hover){.q0UmqG_navLink:hover{color:var(--color-sky-500,#00a5ef)}@supports (color:color(display-p3 0 0 0)){.q0UmqG_navLink:hover{color:var(--color-sky-500,color(display-p3 .219113 .639027 .931479))}}@supports (color:lab(0% 0 0)){.q0UmqG_navLink:hover{color:var(--color-sky-500,lab(63.3038% -18.433 -51.0407))}}}.q0UmqG_navLink{transition:color .4s}.q0UmqG_avatar{float:right;border-radius:.25rem;display:inline-block;overflow:hidden}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-translate-x{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-y{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-z{syntax:"*";inherits:false;initial-value:0}
</style>
<link rel="stylesheet" href="/_astro/_slug_.lnJqZzdA.css"><script type="module" src="/_astro/page.CwTOY3h6.js"></script></head> <body class="w-full h-full flex flex-col">  <div class="bg-slate-800 h-screen flex flex-col"> <div class="bg-slate-700 w-full"> <div class="q0UmqG_avatar"> <img src="/favicon.jpg" width="64" height="64" alt=""> </div> <nav class="q0UmqG_menu"> <a href="/" class="q0UmqG_navLink">home</a> <a href="/blog/" class="q0UmqG_navLink">blog</a> <a href="/utils/" class="q0UmqG_navLink">utils</a> <a href="/dream-map/" class="inline-block">dream map</a> <a href="/album/" class="q0UmqG_navLink">album</a> <a href="/about-me/" class="q0UmqG_navLink">about me</a> </nav> </div> <div class="flex p-4 grow flex-row h-full overflow-hidden"> <aside class="w-1/4 ml-4 md:block min-w-[200px]"> <div class="sticky top-4 space-y-6"> <div class="bg-slate-700 p-4 rounded-lg"> <img src="/avatar.jpg" class="w-16 h-16 rounded-full mx-auto"> <p class="text-white text-center mt-2">ä½œè€…ï¼šmisakamayako</p>  <p class="text-white text-center mt-2">å‘å¸ƒæ—¶é—´ï¼š2025/05/15</p> </div> <div class="bg-slate-700 p-4 rounded-lg"> <h3 class="text-emerald-400 mb-2">ç®€ä»‹</h3> <p class="text-white font-light mb-2">æœ¬æ–‡ç³»ç»Ÿæ¢³ç†äº† Web å¹³å°ä¸‰ç§ä¸»è¦ Worker ç±»å‹â€”â€”DedicatedWorkerã€SharedWorker å’Œ ServiceWorkerï¼Œè¯¦ç»†è§£æå®ƒä»¬çš„é€šä¿¡æœºåˆ¶ã€ä½œç”¨åŸŸã€ç”Ÿå‘½å‘¨æœŸã€æµè§ˆå™¨æ”¯æŒåŠå…¸å‹åº”ç”¨åœºæ™¯ï¼Œå¸®åŠ©å¼€å‘è€…é€‰æ‹©åˆé€‚çš„ Worker ç±»å‹æå‡æ€§èƒ½ä¸ç”¨æˆ·ä½“éªŒã€‚</p> </div> <!-- 2. æ–‡ç« ç›®å½• --> <!--<div class="bg-slate-700 p-4 rounded-lg">--> <!--    <h3 class="text-emerald-400 mb-2">æœ¬æ–‡ç›®å½•</h3>--> <!--    &lt;!&ndash;<TOC client:load /> &ndash;&gt;--> <!--</div>--> <!-- 3. éšæœºæ–‡ç«  --> <div class="bg-slate-700 p-4 rounded-lg"> <h3 class="text-emerald-400 mb-2">éšä¾¿çœ‹çœ‹</h3> <div class="flex flex-wrap gap-2"> <a class="px-3 py-1 bg-slate-600 rounded-full text-sm text-white hover:bg-emerald-500 transition" href="/blog/33d0f9bc90ea/"> Object.seal å’Œ Object.freeze çš„åŒºåˆ« </a><a class="px-3 py-1 bg-slate-600 rounded-full text-sm text-white hover:bg-emerald-500 transition" href="/blog/18b5a9299ef3/"> Kotlin å¼•ç”¨æ“ä½œç¬¦(::)çš„ä½¿ç”¨ </a><a class="px-3 py-1 bg-slate-600 rounded-full text-sm text-white hover:bg-emerald-500 transition" href="/blog/a09fa4518107/"> scheduler.postTaskã€setTimeout å’Œ queueMicrotask çš„å¼‚æ­¥è¡Œä¸ºæ¯”è¾ƒ </a> </div> </div> </div> </aside> <main class="grow h-full overflow-auto w-3/4 px-8"> <article class="text-zinc-200 mb-2 prose lg:prose-xl prose-stone
                 prose-headings:text-current prose-strong:text-current prose-code:text-current
                 prose-a:text-violet-200 prose-blockquote:text-stone-100">  <header> <h1>Web Worker ç±»å‹æ¦‚è§ˆ</h1> </header> <p>Web å¹³å°æä¾›ä¸‰ç§ä¸»è¦çš„ Worker ç±»å‹ï¼š<strong>DedicatedWorker</strong>ã€<strong>SharedWorker</strong> å’Œ <strong>ServiceWorker</strong>ã€‚</p>
<ul>
<li><strong>Dedicated Worker</strong> ç”±å•ä¸ªé¡µé¢åˆ›å»ºï¼Œä»…ä¾›è¯¥é¡µé¢ä½¿ç”¨ï¼Œå¯ä»¥æ‰§è¡Œä¸ä¸»çº¿ç¨‹å¹¶å‘è¿è¡Œçš„ä»»åŠ¡ã€‚</li>
<li><strong>Shared Worker</strong> åˆ™å¯ä»¥è¢«åŒæºçš„å¤šä¸ªé¡µé¢æˆ– iframe å…±äº«è®¿é—®ï¼›å®ƒåœ¨æ‰€æœ‰è¿æ¥å®ƒçš„ä¸Šä¸‹æ–‡é—´ä½¿ç”¨åŒä¸€ä¸ªWorkerå®ä¾‹ï¼Œé€šè¿‡ <code>MessagePort</code> å’Œ <code>onconnect</code> äº‹ä»¶è¿›è¡Œé€šä¿¡ã€‚</li>
<li><strong>Service Worker</strong> æ˜¯ä¸€ç§åå°ç‹¬ç«‹çº¿ç¨‹ï¼Œä¸“é—¨ç”¨äºç½‘ç»œè¯·æ±‚æ‹¦æˆªã€ç¦»çº¿ç¼“å­˜ã€åå°åŒæ­¥ã€æ¨é€ç­‰åŠŸèƒ½ï¼›å®ƒæ³¨å†Œåˆ°æŒ‡å®šä½œç”¨åŸŸä¸‹ï¼Œå¯æ‹¦æˆªè¯¥ä½œç”¨åŸŸå†…é¡µé¢çš„ç½‘ç»œè¯·æ±‚ï¼Œä¸º PWA æä¾›ç¦»çº¿æ”¯æŒã€‚</li>
<li>ä¸‰è€…å‡ä¸èƒ½ç›´æ¥æ“ä½œ DOMï¼Œè¿è¡Œåœ¨ç‹¬ç«‹çš„å…¨å±€ä¸Šä¸‹æ–‡ï¼ˆä¸“ç”¨ã€å…±äº«æˆ–æœåŠ¡çš„ GlobalScopeï¼‰ï¼Œåªèƒ½é€šè¿‡æ¶ˆæ¯ä¼ é€’æˆ–äº‹ä»¶ä¸é¡µé¢äº¤äº’ã€‚</li>
</ul>
<h2 id="é€šä¿¡æœºåˆ¶ä¸ä½œç”¨åŸŸ">é€šä¿¡æœºåˆ¶ä¸ä½œç”¨åŸŸ</h2>
<ul>
<li>
<p><strong>Dedicated Workerï¼š</strong> é€šè¿‡ <code>new Worker(url)</code> åˆ›å»ºåï¼Œä¸»çº¿ç¨‹ä¸ Worker é€šè¿‡ <code>postMessage</code>/<code>onmessage</code> åŒå‘é€šä¿¡ã€‚è¯¥ Worker ç‹¬ç«‹äºä»»ä½•å…¶ä»–é¡µé¢ï¼Œ<strong>ä»…é™åˆ›å»ºå®ƒçš„è„šæœ¬ä¸Šä¸‹æ–‡é€šä¿¡</strong>ã€‚ä½œç”¨åŸŸä¸ºåˆ›å»ºå®ƒçš„é¡µé¢è‡ªèº«ï¼›å…¶ä»–é¡µé¢æ— æ³•ç›´æ¥è®¿é—®æˆ–é€šä¿¡ã€‚</p>
</li>
<li>
<p><strong>Shared Workerï¼š</strong> é€šè¿‡ <code>new SharedWorker(url)</code> åˆ›å»ºåï¼ŒWorker ç«¯ä½¿ç”¨ <code>onconnect</code> äº‹ä»¶æ•è·è¿æ¥ã€‚æ¯ä¸ªè¿æ¥ä¼šå¾—åˆ°ä¸€ä¸ª <code>MessagePort</code>ï¼Œé¡µé¢é€šè¿‡ <code>port.start()</code> å¼€å¯é€šä¿¡ï¼Œç„¶åç”¨ <code>port.postMessage()</code>/<code>port.onmessage</code> ä¸ Worker äº¤äº’ã€‚åŒæºçš„ä¸åŒé¡µé¢/çª—å£/iframe åªè¦ä½¿ç”¨ç›¸åŒçš„è„šæœ¬ URLï¼Œå°±èƒ½ <strong>å…±äº«åŒä¸€ä¸ª Worker å®ä¾‹</strong>ã€‚</p>
</li>
<li>
<p><strong>Service Workerï¼š</strong> é€šè¿‡ <code>navigator.serviceWorker.register()</code> æ³¨å†Œï¼Œåœ¨æŒ‡å®šçš„ä½œç”¨åŸŸï¼ˆé»˜è®¤æ˜¯å…¶æ‰€åœ¨ç›®å½•åŠå­è·¯å¾„ï¼‰èŒƒå›´å†…ç”Ÿæ•ˆã€‚å—æ§é¡µé¢å¯ä»¥é€šè¿‡ <code>navigator.serviceWorker.controller</code> æˆ–è€…åœ¨æ³¨å†Œæ—¶è·å–<code>serviceWorker</code>å®ä¾‹å¹¶ä½¿ç”¨<code>sw.postMessage()</code>/<code>sw.addEventListener</code>ä¸ sw äº¤æ¢æ¶ˆæ¯ã€‚Service Worker è¿˜æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ Workerï¼Œæœ‰ç‰¹æ®Šçš„å…¨å±€äº‹ä»¶åŒ…æ‹¬ <code>install</code>ã€<code>activate</code>ã€<code>fetch</code>ã€<code>push</code> ç­‰ï¼Œå¯ä»¥æ‹¦æˆªå—æ§èŒƒå›´å†…é¡µé¢çš„ç½‘ç»œè¯·æ±‚å¹¶è¿”å›è‡ªå®šä¹‰å“åº”ï¼Œä»è€Œå®ç°ç¦»çº¿ç¼“å­˜ã€æ¶ˆæ¯æ¨é€ç­‰åŠŸèƒ½ã€‚</p>
</li>
</ul>
<p>ä¸‹è¡¨å¯¹æ¯”äº†ä¸‰ç§ Worker åœ¨é€šä¿¡å’Œä½œç”¨åŸŸæ–¹é¢çš„å·®å¼‚ï¼š</p>























<table><thead><tr><th>ç‰¹æ€§</th><th>DedicatedWorker</th><th>SharedWorker</th><th>ServiceWorker</th></tr></thead><tbody><tr><td><strong>é€šä¿¡æœºåˆ¶</strong></td><td>å•é¡µé¢ä¸ DedicatedWorker é—´é€šè¿‡ <code>postMessage()</code> å’Œ <code>onmessage</code> è¿›è¡ŒåŒå‘é€šä¿¡</td><td>å¤šé¡µé¢é—´é€šè¿‡ <code>MessagePort</code> å’Œ <code>onconnect</code> å…±äº«åŒä¸€ä¸ªå®ä¾‹ï¼šæ¯ä¸ªé¡µé¢è¿æ¥åˆ°åŒä¸€ä¸ª SharedWorker å®ä¾‹ï¼Œé€šè¿‡ <code>port.postMessage()</code> å‘é€æ¶ˆæ¯</td><td>å—æ§é¡µé¢ä¸ Service Worker é€šè¿‡ <code>postMessage</code>/<code>onmessage</code> äº¤æ¢æ¶ˆæ¯ã€‚åŒæ—¶ï¼ŒService Worker å¯ä¾¦å¬ <code>fetch</code>ã€<code>push</code> ç­‰äº‹ä»¶ï¼Œæ‹¦æˆªå¹¶å¤„ç†ç½‘ç»œè¯·æ±‚</td></tr><tr><td><strong>ä½œç”¨åŸŸ</strong></td><td><strong>å•ä¸€åˆ›å»ºè€…</strong>ï¼šä»…é™åˆ›å»ºå®ƒçš„é¡µé¢/è„šæœ¬ä½¿ç”¨ï¼Œå…¶ä»–é¡µé¢æ— æ³•è®¿é—®</td><td><strong>åŒæºå…±äº«</strong>ï¼šåŒä¸€æºï¼ˆåè®®ã€ä¸»æœºã€ç«¯å£ï¼‰ä¸‹çš„å¤šä¸ªé¡µé¢/iframe/Workers å¯å…±äº«åŒä¸€å®ä¾‹</td><td><strong>æ³¨å†Œä½œç”¨åŸŸ</strong>ï¼šæ³¨å†Œæ—¶å¯æŒ‡å®š scopeï¼ŒService Worker å¯æ§åˆ¶è¯¥ä½œç”¨åŸŸå†…æ‰€æœ‰é¡µé¢ï¼ˆåŒä¸€æºä¸‹çš„æŒ‡å®šè·¯å¾„èŒƒå›´ï¼‰ã€‚</td></tr></tbody></table>
<h2 id="ç”Ÿå‘½å‘¨æœŸä¸å†…å­˜å…±äº«">ç”Ÿå‘½å‘¨æœŸä¸å†…å­˜å…±äº«</h2>
<ul>
<li>
<p><strong>Dedicated Worker ç”Ÿå‘½å‘¨æœŸï¼š</strong> Dedicated Worker ä¸€æ—¦è¢«åˆ›å»ºï¼Œå°±ä¸åˆ›å»ºå®ƒçš„é¡µé¢ç”Ÿå‘½å‘¨æœŸç»‘å®šã€‚é€šå¸¸ï¼Œå½“é¡µé¢å…³é—­æˆ–è°ƒç”¨ <code>worker.terminate()</code> æ—¶ï¼Œè¯¥ Worker å°±ä¼šç»ˆæ­¢ã€‚æ¯ä¸ª Dedicated Worker æ‹¥æœ‰ç‹¬ç«‹çš„å…¨å±€å†…å­˜ç©ºé—´ï¼Œ<strong>ä¸åŒå®ä¾‹ä¹‹é—´ä¸å…±äº«æ•°æ®</strong>ï¼ˆé™¤éä½¿ç”¨ <code>SharedArrayBuffer</code> ç­‰ç‰¹å®šæœºåˆ¶ï¼‰ã€‚å…¨å±€å˜é‡å’Œç¼“å­˜åªåœ¨è¯¥çº¿ç¨‹å†…å¯è§ï¼Œé¡µé¢å¸è½½åå³å…¨éƒ¨æ¸…ç†ã€‚</p>
</li>
<li>
<p><strong>Shared Worker ç”Ÿå‘½å‘¨æœŸï¼š</strong> Shared Worker çš„ç”Ÿå‘½å‘¨æœŸæ›´é•¿ã€‚é¦–æ¬¡åˆ›å»ºæ—¶å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹å®ä¾‹ï¼Œåªè¦æœ‰ä»»ä½•é¡µé¢ä¿æŒå¯¹å®ƒçš„å¼•ç”¨ï¼Œå®ƒå°±ä¿æŒå­˜æ´»ã€‚å½“æ‰€æœ‰è¿æ¥è¯¥ SharedWorker çš„é¡µé¢éƒ½å…³é—­æˆ–æ–­å¼€å¼•ç”¨åï¼ˆå…¶â€œownerâ€é›†åˆä¸ºç©ºï¼‰ï¼ŒShared Worker ä¼šè¢«åƒåœ¾å›æ”¶ç»“æŸã€‚ç”±äºæ‰€æœ‰é¡µé¢å…±ç”¨åŒä¸€ä¸ªå®ä¾‹ï¼Œå…¨å±€å˜é‡åœ¨å„è¿æ¥é—´å…±äº«ï¼šæ¯”å¦‚æŸä¸ªé¡µé¢å‘ Worker åŠ è½½çš„æ•°æ®ï¼Œå…¶å®ƒé¡µé¢ä¹Ÿèƒ½é€šè¿‡æ¶ˆæ¯è·å–åˆ°ã€‚å› æ­¤ Shared Worker é€‚åˆä¿å­˜å¯è·¨é¡µé¢å¤ç”¨çš„çŠ¶æ€æˆ–èµ„æºã€‚ä½†ä¹Ÿè¦æ³¨æ„å†…å­˜ç®¡ç†ï¼Œå¦‚æœåŠ è½½å¤§æ•°æ®ç»“æ„ï¼Œä»–ä¼šå¯¹æ‰€æœ‰è¿æ¥çš„é¡µé¢å¯è§ã€‚</p>
</li>
<li>
<p><strong>Service Worker ç”Ÿå‘½å‘¨æœŸï¼š</strong> Service Worker çš„ç”Ÿå‘½å‘¨æœŸä¸æ³¨å†Œ/æ¿€æ´»æµç¨‹ç›¸å…³ï¼šå…ˆè§¦å‘ <code>install</code> äº‹ä»¶ï¼Œåœ¨å®‰è£…å®Œæˆåè§¦å‘ <code>activate</code> äº‹ä»¶ã€‚æ¿€æ´»åï¼ŒService Worker å°±å¯ä»¥æ§åˆ¶å¯¹åº”ä½œç”¨åŸŸå†…çš„é¡µé¢ã€‚å½“æ²¡æœ‰äº‹ä»¶å¤„ç†ä»»åŠ¡æ—¶ï¼Œæµè§ˆå™¨å¯èƒ½åœ¨åå°åœç”¨æˆ–é”€æ¯ Service Worker å®ä¾‹ï¼›ä¸‹æ¬¡æœ‰æ§åˆ¶èŒƒå›´å†…é¡µé¢è¯·æ±‚æˆ–äº‹ä»¶æ—¶ï¼ŒService Worker ä¼šé‡æ–°å¯åŠ¨ã€‚Service Worker æ‹¥æœ‰è‡ªå·±çš„å…¨å±€ä½œç”¨åŸŸï¼ˆ<code>ServiceWorkerGlobalScope</code>ï¼‰ï¼Œå¤šä¸ªå—æ§é¡µé¢å…±äº«åŒä¸€ä¸ªå…¨å±€ä¸Šä¸‹æ–‡ï¼ŒåŒæ ·å¯ä½¿ç”¨å…¨å±€å˜é‡æˆ– IndexedDB/Cache å­˜å‚¨æ•°æ®ï¼Œä½†è¿™äº›æ•°æ®å¯¹æ‰€æœ‰é¡µé¢å¯è§ã€‚ç”±äº Service Worker å¯èƒ½éšæ—¶è¢«å›æ”¶ï¼ŒçŠ¶æ€åº”å°½é‡ä¿å­˜åœ¨å¤–éƒ¨å­˜å‚¨ï¼ˆå¦‚ Cacheã€IndexedDBï¼‰è€Œéä»…ä¾èµ–å†…å­˜ã€‚</p>
</li>
</ul>
<h2 id="æµè§ˆå™¨æ”¯æŒæƒ…å†µ">æµè§ˆå™¨æ”¯æŒæƒ…å†µ</h2>
<p>ä¸åŒæµè§ˆå™¨å¯¹ä¸‰ç§ Worker çš„æ”¯æŒåº¦å­˜åœ¨å·®å¼‚ï¼š</p>
<ul>
<li>
<p><strong>Dedicated Workerï¼š</strong> å‡ ä¹æ‰€æœ‰ç°ä»£æµè§ˆå™¨éƒ½æ”¯æŒã€‚Chromeã€Firefoxã€Safariã€Edge åŠç§»åŠ¨æµè§ˆå™¨å‡èƒ½ä½¿ç”¨ Dedicated Workerï¼ˆIE 10+ æ”¯æŒï¼‰ã€‚</p>
</li>
<li>
<p><strong>Shared Workerï¼š</strong> æ¡Œé¢æµè§ˆå™¨æ”¯æŒä¸ä¸€ï¼šChromeã€Firefoxã€Operaã€æ–°ç‰ˆ Edge ç­‰å‡æ”¯æŒ Shared Workerï¼ˆChrome ä»æ—©æœŸç‰ˆæœ¬å°±æ”¯æŒï¼›Firefox 29+ æ”¯æŒï¼‰ã€‚ä½† Safari å†ç»åœæ»ï¼šSafari 5-6 æ”¯æŒ Shared Workerï¼Œè€Œ Safari 6.1-15.6 ä¸æ”¯æŒï¼ˆä» Safari 16 å¼€å§‹åˆæ¢å¤æ”¯æŒï¼‰ï¼›iOS Safari ç±»ä¼¼ï¼Œ5-6 æ”¯æŒï¼Œ7-15 ä¸æ”¯æŒï¼Œ16+ æ¢å¤æ”¯æŒã€‚Android å¹³å°åˆ™æ™®éä¸æ”¯æŒ Shared Workerï¼ˆChrome Android å°šä¸æ”¯æŒï¼‰ã€‚IE ç³»åˆ—ä¸æ”¯æŒ SharedWorkerã€‚æ€»ä½“æ¥çœ‹ï¼Œç›®å‰å…¨çƒå¤§çº¦åŠæ•°ç”¨æˆ·æµè§ˆå™¨ç¯å¢ƒæ”¯æŒ SharedWorkerï¼ˆCan I Use ç»Ÿè®¡çº¦ 45%ï¼‰ã€‚</p>
</li>
<li>
<p><strong>Service Workerï¼š</strong> æ”¯æŒåº¦éå¸¸é«˜ã€‚ç°ä»£ Chrome/Firefox/Edge åœ¨è¾ƒæ–°ç‰ˆæœ¬å³æ”¯æŒï¼ˆChrome 45+ã€Firefox 44+ã€Edge 17+ï¼‰ã€‚Safari ä» 11.1 (iOS 11.3) å¼€å§‹æ”¯æŒ Service Workerã€‚ç§»åŠ¨ç«¯ç»å¤§å¤šæ•°æµè§ˆå™¨ï¼ˆAndroid Chromeã€Samsung Internet ç­‰ï¼‰æ”¯æŒ Service Workerï¼Œä½† IEã€Opera Mini ç­‰ä¸æ”¯æŒã€‚æ€»ä½“è¦†ç›–ç‡çº¦ 95%ä»¥ä¸Šã€‚</p>
</li>
<li>
<p><strong>æ€»ç»“ï¼š</strong> <strong>DedicatedWorker</strong> å’Œ <strong>ServiceWorker</strong> åŸºæœ¬å±äºæˆç†Ÿæ ‡å‡†ï¼Œæµè§ˆå™¨å…¼å®¹æ€§è¾ƒå¥½ï¼›<strong>SharedWorker</strong> æ”¯æŒè¾ƒå·®ï¼Œåº”ç”¨å‰éœ€æ³¨æ„ç›®æ ‡ç”¨æˆ·çš„æµè§ˆå™¨ç¯å¢ƒã€‚</p>
</li>
</ul>





















































<table><thead><tr><th>æµè§ˆå™¨/å¹³å°</th><th>DedicatedWorker æ”¯æŒ</th><th>SharedWorker æ”¯æŒ</th><th>ServiceWorker æ”¯æŒ</th></tr></thead><tbody><tr><td>Chrome æ¡Œé¢</td><td>âœ… æ”¯æŒ (4+)</td><td>âœ… æ”¯æŒ (4+)</td><td>âœ… æ”¯æŒ (45+)</td></tr><tr><td>Firefox æ¡Œé¢</td><td>âœ… æ”¯æŒ (3.5+)</td><td>âœ… æ”¯æŒ (29+)</td><td>âœ… æ”¯æŒ (44+)</td></tr><tr><td>Safari æ¡Œé¢</td><td>âœ… æ”¯æŒ (4+)</td><td>âœ… æ”¯æŒ (5-6, 16+ï¼›6.1-15 âŒ)</td><td>âœ… æ”¯æŒ (11.1+)</td></tr><tr><td>iOS Safari</td><td>âœ… æ”¯æŒ (5+)</td><td>âœ… æ”¯æŒ (5-6, 16+ï¼›7-15 âŒ)</td><td>âœ… æ”¯æŒ (11.3+)</td></tr><tr><td>Android Chrome</td><td>âœ… æ”¯æŒ</td><td>âŒ ä¸æ”¯æŒ</td><td>âœ… æ”¯æŒ (45+)</td></tr><tr><td>Edge</td><td>âœ… æ”¯æŒ (12+)</td><td>âœ… æ”¯æŒ (79+)</td><td>âœ… æ”¯æŒ (17+)</td></tr><tr><td>IE</td><td>âœ… æ”¯æŒ (10+)</td><td>âŒ ä¸æ”¯æŒ</td><td>âŒ ä¸æ”¯æŒ</td></tr></tbody></table>
<h2 id="å…¸å‹ä½¿ç”¨åœºæ™¯ä¸æ¡ˆä¾‹">å…¸å‹ä½¿ç”¨åœºæ™¯ä¸æ¡ˆä¾‹</h2>
<ul>
<li>
<p><strong>å•é¡µé«˜è´Ÿè½½è®¡ç®—ï¼ˆDedicatedWorkerï¼‰ï¼š</strong> é€‚ç”¨äºå°† CPU å¯†é›†å‹ä»»åŠ¡ä»ä¸»çº¿ç¨‹å¸è½½çš„åœºæ™¯ï¼Œå¦‚å›¾åƒå¤„ç†ã€åŠ å¯†è¿ç®—ã€å¤æ‚æ•°æ®è®¡ç®—ã€å—æ§åˆ¶çš„æ–‡ä»¶ä¸‹è½½æˆ– WebAssembly è®¡ç®—ç­‰ã€‚Dedicated Worker åªè¢«åˆ›å»ºå®ƒçš„è„šæœ¬ä½¿ç”¨ï¼Œæ¯ä¸ªçº¿ç¨‹ç‹¬å èµ„æºï¼Œé€‚åˆä¸€ä¸ªé¡µé¢éœ€è¦å¹¶å‘å¤„ç†å¤šä¸ªä»»åŠ¡æ—¶ä½¿ç”¨å¤šä¸ª Dedicated Workerã€‚</p>
</li>
<li>
<p><strong>è·¨æ ‡ç­¾é¡µé€šä¿¡ä¸æ•°æ®å…±äº«ï¼ˆSharedWorkerï¼‰ï¼š</strong> å½“éœ€è¦åŒæºçš„å¤šä¸ªé¡µé¢/æ ‡ç­¾ä¹‹é—´å…±äº«æ•°æ®æˆ–é€šä¿¡æ—¶ï¼Œå¯ä½¿ç”¨ SharedWorkerã€‚å…¸å‹æ¡ˆä¾‹å¦‚åœ¨çº¿ååŒç¼–è¾‘ã€å¤šçª—å£å®æ—¶èŠå¤©ã€ç»Ÿä¸€é€šçŸ¥ç­‰ã€‚ä¸¾ä¾‹ï¼šå¦‚æœç”¨æˆ·åœ¨åå°æ‰“å¼€äº†å¤šä¸ªæ ‡ç­¾é¡µï¼Œæƒ³ç”¨ä¸€ä¸ª WebSocket è¿æ¥æ¥æ¥æ”¶æœåŠ¡å™¨æ¨é€çš„æ•°æ®ï¼Œå°±å¯ä»¥è®©æ‰€æœ‰æ ‡ç­¾é¡µè¿æ¥åŒä¸€ä¸ª SharedWorkerï¼Œç”±å…¶ç»´æŒä¸€ä¸ªåå°è½®è¯¢æˆ– WebSocket ä»»åŠ¡ï¼Œç„¶åå°†æ¶ˆæ¯å¹¿æ’­åˆ°å„æ ‡ç­¾é¡µã€‚MDN ç¤ºä¾‹ä¸­å°±æ¼”ç¤ºäº†ä¸¤ä¸ªé¡µé¢é€šè¿‡åŒä¸€ä¸ª SharedWorker å¹¶å‘æ‰§è¡Œè®¡ç®—ã€‚å¦ä¸€ä¸ªçœŸå®æ¡ˆä¾‹æ˜¯åå°äº‹ä»¶è½®è¯¢ï¼šåœ¨ä¸€ä¸ªç®¡ç†åå°ä¸­ï¼Œç™»å½•ç”¨æˆ·å¯èƒ½å¼€äº†å¤šä¸ªé¡µé¢æ ‡ç­¾ï¼Œæ¯ä¸ªé¡µé¢éƒ½ä¸å¿…ç‹¬ç«‹è½®è¯¢æœåŠ¡å™¨ï¼Œè€Œåªéœ€ç”±ä¸€ä¸ª SharedWorker ç»Ÿä¸€è¿›è¡Œè½®è¯¢å¹¶å‘é€é€šçŸ¥ã€‚SharedWorker ä¼šåœ¨æœ‰é¡µé¢æ‰“å¼€æ—¶ä¿æŒæ´»è·ƒï¼Œæ‰€æœ‰é¡µé¢åªä¼šæ”¶åˆ°ä¸€æ¬¡äº‹ä»¶é€šçŸ¥ï¼Œä¸ä¼šé‡å¤è¯·æ±‚ã€‚</p>
</li>
<li>
<p><strong>ç¦»çº¿ç¼“å­˜å’Œåå°æœåŠ¡ï¼ˆServiceWorkerï¼‰ï¼š</strong> Service Worker ä¸“é—¨ç”¨äºæå‡åº”ç”¨å¯é æ€§å’Œæ€§èƒ½ï¼Œå¦‚èµ„æºé¢„ç¼“å­˜ã€ç¦»çº¿è®¿é—®ã€åå°åŒæ­¥ï¼ˆBackground Syncï¼‰ã€æ¨é€é€šçŸ¥ç­‰ã€‚å…¸å‹åœºæ™¯æ˜¯ Progressive Web Appï¼šServiceWorker åœ¨å®‰è£…é˜¶æ®µç¼“å­˜ç½‘é¡µèµ„æºï¼Œå½“ç½‘ç»œä¸å¯ç”¨æ—¶ä»èƒ½è¿”å›ç¼“å­˜å†…å®¹ï¼›è¿˜å¯ä»¥æ‹¦æˆªæ‰€æœ‰ç½‘ç»œè¯·æ±‚ï¼Œå®ç°æ™ºèƒ½ç¼“å­˜ç­–ç•¥å’Œç¦»çº¿é¡µé¢ã€‚åŒæ—¶ï¼ŒServiceWorker èƒ½åœ¨æ— ä»»ä½•é¡µé¢æ‰“å¼€æ—¶å“åº”æ¨é€æ¶ˆæ¯ï¼Œæˆ–åœ¨åå°è¿›è¡Œå®šæœŸåŒæ­¥ã€‚</p>
</li>
</ul>
<h2 id="æ€§èƒ½ä¸å®‰å…¨æ€§å·®å¼‚">æ€§èƒ½ä¸å®‰å…¨æ€§å·®å¼‚</h2>
<ul>
<li>
<p><strong>æ€§èƒ½ï¼š</strong> DedicatedWorker æ¯åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å®ä¾‹éƒ½è¦å ç”¨é¢å¤–å†…å­˜å’Œ CPUï¼Œé€‚åˆå¹¶è¡Œå¤„ç†ä»»åŠ¡ï¼Œä½†å¦‚æœå¤šä¸ªé¡µé¢éƒ½åˆ›å»ºå¤šä¸ªçº¿ç¨‹ï¼Œå¯èƒ½èµ„æºæ¶ˆè€—è¾ƒé«˜ã€‚SharedWorker åˆ™åªåˆ›å»ºå•ä¸ªçº¿ç¨‹å®ä¾‹ä¾›æ‰€æœ‰é¡µé¢å¤ç”¨ï¼ŒèŠ‚çœäº†å¤šå®ä¾‹çš„å†…å­˜å¼€é”€ï¼Œä½†å¤šä¸ªé¡µé¢å‘é€ç»™ SharedWorker çš„æ¶ˆæ¯ä¼šæ’é˜Ÿå¤„ç†ï¼ˆä»…æœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œï¼‰ï¼Œå¹¶å‘åº¦ä¸å¦‚å¤šä¸ª DedicatedWorkerã€‚ServiceWorker å› ä¸ºä¸»è¦å¤„ç†ç½‘ç»œ I/O å’Œäº‹ä»¶é©±åŠ¨ä»»åŠ¡ï¼Œä¸é€‚åˆé•¿æœŸæ‰§è¡Œé‡è®¡ç®—ä»»åŠ¡ï¼›å…¶å¯åŠ¨ä¹Ÿéœ€ç»è¿‡å®‰è£…/æ¿€æ´»æµç¨‹ï¼Œæ€§èƒ½ä¸»è¦ä½“ç°åœ¨ç¼“å­˜å‘½ä¸­å’Œå¿«é€Ÿå“åº”ç½‘ç»œè¯·æ±‚ä¸Šã€‚</p>
</li>
<li>
<p><strong>å®‰å…¨æ€§ï¼š</strong> Service Worker è¦æ±‚åœ¨ HTTPSï¼ˆæˆ– localhostï¼‰ç¯å¢ƒä¸‹æ³¨å†Œè¿è¡Œï¼Œä»¥ç¡®ä¿å®‰å…¨ï¼›è€Œ Dedicated/Shared Worker åœ¨ä»»æ„åŒæºç¯å¢ƒä¸­å‡å¯ä½¿ç”¨ï¼Œæ— é¢å¤–å®‰å…¨é™åˆ¶ã€‚æ­¤å¤–ï¼ŒService Worker æ‹¥æœ‰æ‹¦æˆªå’Œä¿®æ”¹ç½‘ç»œè¯·æ±‚çš„æƒé™ï¼ˆå¯è®¿é—®å“åº”ç¼“å­˜ã€ä¿®æ”¹è¯·æ±‚å¤´ç­‰ï¼‰ï¼Œæƒé™æ¯”æ™®é€š Worker é«˜ï¼Œå› æ­¤æ ‡å‡†è¦æ±‚å…¶å¿…é¡»åœ¨å®‰å…¨ä¸Šä¸‹æ–‡è¿è¡Œã€‚SharedWorker è¦æ±‚æ‰€æœ‰ä½¿ç”¨çš„é¡µé¢åŒæºï¼Œè€Œ DedicatedWorker ä¹Ÿåªèƒ½ç”±åŒæºè„šæœ¬åˆ›å»ºï¼›å› æ­¤ï¼Œæ— è®ºå“ªç§ Workerï¼Œè„šæœ¬å’Œ Worker æ–‡ä»¶éƒ½å¿…é¡»éµå¾ªåŒæºç­–ç•¥ã€‚æ‰€æœ‰ Worker éƒ½åœ¨éš”ç¦»çš„çº¿ç¨‹ç¯å¢ƒä¸­è¿è¡Œï¼Œæ— æ³•ç›´æ¥æ“ä½œ DOMï¼Œåªèƒ½é€šè¿‡æ¶ˆæ¯äº¤æ¢å…±äº«æ•°æ®ï¼Œä»è€Œé¿å…äº†ç›´æ¥è·¨çº¿ç¨‹è®¿é—®é¡µé¢å…ƒç´ å¸¦æ¥çš„å®‰å…¨é£é™©ã€‚ServiceWorker å’Œ SharedWorker éƒ½å¯ä»¥ä½¿ç”¨ IndexedDBã€Cache ç­‰å­˜å‚¨ï¼Œè€Œè¿™äº›å­˜å‚¨ä¹Ÿéµå¾ªåŒæºè§„åˆ™ï¼Œä¸åŒ Worker ä¹‹é—´éœ€é€šè¿‡è¿™äº› API æˆ–æ¶ˆæ¯æ˜¾å¼å…±äº«æ•°æ®ã€‚</p>
</li>
</ul>
<p><strong>æ€»ç»“ï¼š</strong> SharedWorker çš„ä¼˜åŠ¿åœ¨äº<strong>è·¨é¡µé¢å…±äº«å•ä¸ªåå°çº¿ç¨‹</strong>ï¼Œé€‚åˆéœ€è¦åŒæ­¥çŠ¶æ€æˆ–å¤ç”¨è¿æ¥çš„åº”ç”¨åœºæ™¯ï¼›è€Œ DedicatedWorker æ›´é€‚ç”¨äºå•é¡µé¢çš„å¹¶è¡Œè®¡ç®—ï¼›ServiceWorker åˆ™ä¸“æ³¨äºç½‘ç»œå±‚é¢ï¼ˆç¦»çº¿ã€ç¼“å­˜ã€æ¨é€ï¼‰ä¼˜åŒ–ã€‚é€‰æ‹©ä½•ç§ Worker ç±»å‹ï¼Œåº”æ ¹æ®å…·ä½“éœ€æ±‚çš„å¹¶å‘æ¨¡å‹ã€ä½œç”¨åŸŸä»¥åŠå…¼å®¹æ€§æ¥å†³å®šã€‚</p>  </article> <div class="tags"> <div class="_tailmateTag_u5zwa_5"> <a href="/blog/tag/Web Worker/">Web Worker</a> </div><div class="_tailmateTag_u5zwa_5"> <a href="/blog/tag/DedicatedWorker/">DedicatedWorker</a> </div><div class="_tailmateTag_u5zwa_5"> <a href="/blog/tag/SharedWorker/">SharedWorker</a> </div><div class="_tailmateTag_u5zwa_5"> <a href="/blog/tag/ServiceWorker/">ServiceWorker</a> </div><div class="_tailmateTag_u5zwa_5"> <a href="/blog/tag/å¤šçº¿ç¨‹/">å¤šçº¿ç¨‹</a> </div><div class="_tailmateTag_u5zwa_5"> <a href="/blog/tag/å‰ç«¯æ€§èƒ½/">å‰ç«¯æ€§èƒ½</a> </div><div class="_tailmateTag_u5zwa_5"> <a href="/blog/tag/ç¦»çº¿ç¼“å­˜/">ç¦»çº¿ç¼“å­˜</a> </div> </div> </main> </div> <div class="okTgGW_footer"> <p>Supported and developed by&nbsp;
<a href="https://github.com/misakamayako/" target="_blank" rel="noreferrer">misaka mayako</a> </p> <p>
Tech with <a href="https://astro.build/" target="_blank" rel="noreferrer">astro</a>,&nbsp;
<a href="https://tailwindcss.com/" target="_blank" rel="noreferrer">tailwindcss</a>,&nbsp;
        and <a href="https://pm2.keymetrics.io/" target="_blank" rel="noreferrer">pm2</a>,&nbsp;
</p> <p> feed back via <a href="mailto:misakamayaco@qq.com" target="_blank" rel="noreferrer">ğŸ“«</a></p> <a rel="license noreferrer" href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" class="absolute right-6 bottom-6"> <img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" class="inlin-block border-0" src="/cc4.0.png"> </a> </div> </div> <script type="module" is:global>
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('pre').forEach((block) => {
                const button = document.createElement('button')
                button.innerText = 'å¤åˆ¶'
                button.className =
                    'absolute top-2 right-2 bg-slate-800 text-white px-2 py-1 rounded text-sm opacity-50 hover:opacity-100 transition cursor-pointer'
                button.addEventListener('click', () => {
                    const code = block.querySelector('code')
                    if (code) {
                        navigator.clipboard.writeText(code.innerText).then(() => {
                            button.innerText = 'å·²å¤åˆ¶ï¼'
                            setTimeout(() => (button.innerText = 'å¤åˆ¶'), 1000)
                        })
                    }
                })
                block.classList.add('relative')
                block.appendChild(button)
            })
        })
    </script>  </body></html>