<!DOCTYPE html><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha512-fHwaWebuwA7NSF5Qg/af4UeDx9XqUpYpOGgubo3yWu+b2IQR4UeQwbb42Ti7gVAjNtVoI/I9TEoYeu9omwcC6g==" crossorigin="anonymous"><html lang="zh-hans" class="h-full w-full m-0"> <head><meta charset="utf-8"><link rel="icon" type="image/jepg" href="/favicon.jpg"><meta name="viewport" content="width=device-width"><meta name="google-site-verification" content="-RgOsAO7rMTpJ8vNk8-ILdAA8VmiTEUc9HiUVVTKeEs"><meta name="generator" content="Astro v5.17.2"><title>âœ¨å¾¡å‚ç½‘ç»œ-å½“å¯¼èˆªå˜æˆçŠ¶æ€ï¼šå½»åº•æŠ›å¼ƒ NavController çš„çº¯ MVI å¯¼èˆªâœ¨</title><link rel="stylesheet" href="/_astro/index.C6IHRFDG.css">
<style>/*! tailwindcss v4.1.18 | MIT License | https://tailwindcss.com */
@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-border-style:solid}}}.okTgGW_footer{font-size:var(--text-sm,.875rem);line-height:var(--tw-leading,var(--text-sm--line-height,calc(1.25/.875)));color:var(--color-stone-400,#a6a09b);text-align:center;padding-block:calc(var(--spacing,.25rem)*4);border-top-color:var(--color-zinc-50,#fafafa);border-top-style:var(--tw-border-style);background-color:var(--color-slate-900,#0f172b);border-top-width:2px;width:100%;position:relative}@supports (color:color(display-p3 0 0 0)){.okTgGW_footer{color:var(--color-stone-400,color(display-p3 .647628 .627105 .61098));border-top-color:var(--color-zinc-50,color(display-p3 .980256 .980256 .980256));background-color:var(--color-slate-900,color(display-p3 .0639692 .0891152 .163036))}}@supports (color:lab(0% 0 0)){.okTgGW_footer{color:var(--color-stone-400,lab(66.2166% 1.88044 3.20326));border-top-color:var(--color-zinc-50,lab(98.26% 0 0));background-color:var(--color-slate-900,lab(7.78673% 1.82345 -15.0537))}}.okTgGW_footer a{text-decoration-line:underline}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}
/*! tailwindcss v4.1.18 | MIT License | https://tailwindcss.com */
@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-border-style:solid;--tw-translate-x:0;--tw-translate-y:0;--tw-translate-z:0}}}.q0UmqG_menu{height:calc(var(--spacing,.25rem)*16);padding-right:calc(var(--spacing,.25rem)*16);border-bottom-color:var(--color-zinc-50,#fafafa);border-bottom-style:var(--tw-border-style);text-align:right;border-bottom-width:2px}@supports (color:color(display-p3 0 0 0)){.q0UmqG_menu{border-bottom-color:var(--color-zinc-50,color(display-p3 .980256 .980256 .980256))}}@supports (color:lab(0% 0 0)){.q0UmqG_menu{border-bottom-color:var(--color-zinc-50,lab(98.26% 0 0))}}.q0UmqG_menu a{padding-inline:calc(var(--spacing,.25rem)*2);padding-block:calc(var(--spacing,.25rem)*2);font-size:var(--text-xl,1.25rem);line-height:var(--tw-leading,var(--text-xl--line-height,calc(1.75/1.25)));color:var(--color-zinc-50,#fafafa);margin-top:calc(var(--spacing,.25rem)*2.5);display:inline-block}@supports (color:color(display-p3 0 0 0)){.q0UmqG_menu a{color:var(--color-zinc-50,color(display-p3 .980256 .980256 .980256))}}@supports (color:lab(0% 0 0)){.q0UmqG_menu a{color:var(--color-zinc-50,lab(98.26% 0 0))}}@media (hover:hover){.q0UmqG_menu a:hover{--tw-translate-y:calc(var(--spacing,.25rem)*-.5);translate:var(--tw-translate-x)var(--tw-translate-y);color:var(--color-sky-500,#00a5ef)}@supports (color:color(display-p3 0 0 0)){.q0UmqG_menu a:hover{color:var(--color-sky-500,color(display-p3 .219113 .639027 .931479))}}@supports (color:lab(0% 0 0)){.q0UmqG_menu a:hover{color:var(--color-sky-500,lab(63.3038% -18.433 -51.0407))}}}.q0UmqG_menu a{transition-property:transform,translate,scale,rotate;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function,cubic-bezier(.4,0,.2,1)));transition-duration:var(--tw-duration,var(--default-transition-duration,.15s))}.q0UmqG_navLink{padding-inline:calc(var(--spacing,.25rem)*2);padding-block:calc(var(--spacing,.25rem)*2);font-size:var(--text-xl,1.25rem);line-height:var(--tw-leading,var(--text-xl--line-height,calc(1.75/1.25)));color:var(--color-zinc-50,#fafafa);margin-top:calc(var(--spacing,.25rem)*2.5);display:inline-block}@supports (color:color(display-p3 0 0 0)){.q0UmqG_navLink{color:var(--color-zinc-50,color(display-p3 .980256 .980256 .980256))}}@supports (color:lab(0% 0 0)){.q0UmqG_navLink{color:var(--color-zinc-50,lab(98.26% 0 0))}}@media (hover:hover){.q0UmqG_navLink:hover{color:var(--color-sky-500,#00a5ef)}@supports (color:color(display-p3 0 0 0)){.q0UmqG_navLink:hover{color:var(--color-sky-500,color(display-p3 .219113 .639027 .931479))}}@supports (color:lab(0% 0 0)){.q0UmqG_navLink:hover{color:var(--color-sky-500,lab(63.3038% -18.433 -51.0407))}}}.q0UmqG_navLink{transition:color .4s}.q0UmqG_avatar{float:right;border-radius:.25rem;display:inline-block;overflow:hidden}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-translate-x{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-y{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-z{syntax:"*";inherits:false;initial-value:0}
</style>
<link rel="stylesheet" href="/_astro/_slug_.aUcrWOZv.css"><script type="module" src="/_astro/page.D1uwR3nK.js"></script></head> <body class="w-full h-full flex flex-col"> <div class="bg-slate-800 h-screen flex flex-col"><div class="bg-slate-700 w-full"> <div class="q0UmqG_avatar"> <img src="/favicon.jpg" width="64" height="64" alt=""> </div> <nav class="q0UmqG_menu"> <a href="/" class="q0UmqG_navLink">home</a> <a href="/blog/" class="q0UmqG_navLink">blog</a> <a href="/utils/" class="q0UmqG_navLink">utils</a> <a href="/dream-map/" class="inline-block">dream map</a> <a href="/album/" class="q0UmqG_navLink">album</a> <a href="/about-me/" class="q0UmqG_navLink">about me</a> </nav> </div><div class="flex p-4 grow flex-row h-full overflow-hidden"><aside class="w-1/4 ml-4 md:block min-w-[200px] overflow-auto pr-2"><div class="sticky top-4 space-y-6"><div class="bg-slate-700 p-4 rounded-lg"><img src="/avatar.jpg" class="w-16 h-16 rounded-full mx-auto"><p class="text-white text-center mt-2">ä½œè€…ï¼šmisakamayako</p><p class="text-white text-center mt-2">å‘å¸ƒæ—¶é—´ï¼š2026/01/22</p></div><div class="bg-slate-700 p-4 rounded-lg"><h3 class="text-emerald-400 mb-2">ç®€ä»‹</h3><p class="text-white font-light mb-2">å¯¼èˆªä¸åº”æ˜¯ä¸€ä¸ªâ€œæ§åˆ¶å™¨â€ï¼Œè€Œåº”æ˜¯ä¸€ä¸ªâ€œåˆ—è¡¨â€ã€‚ä½œä¸ºç³»åˆ—æ–‡ç« çš„ç»ˆç»“ç¯‡ï¼Œæœ¬æ–‡æŒ‘æˆ˜ Android å¼€å‘çš„ä¼ ç»Ÿä¹ æƒ¯ï¼Œå±•ç¤ºå¦‚ä½•å½»åº•æŠ›å¼ƒ NavControllerï¼Œæ„å»ºä¸€å¥—çº¯ç²¹çš„ MVI å¯¼èˆªç³»ç»Ÿã€‚é€šè¿‡å°†å¯¼èˆªæ ˆç›´æ¥è½¬åŒ–ä¸º Store ä¸­çš„ä¸å¯å˜çŠ¶æ€ï¼Œå®ç°å•ä¸€æ•°æ®æºã€ç±»å‹å®‰å…¨ä¸”å®Œç¾å¥‘åˆ Compose ç”Ÿå‘½å‘¨æœŸã€‚è‡ªæ­¤ï¼ŒApp æ¶æ„å°†è¿›åŒ–ä¸ºç”± State é©±åŠ¨çš„çº¯ç²¹çŠ¶æ€æœºã€‚</p></div><!-- 2. å…³è”æ–‡ç«  --><div class="mb-4 rounded-xl bg-slate-700 p-5 shadow-xl border border-slate-600/50"><div class="mb-4 flex items-center justify-between border-b border-slate-600 pb-3"><div><h3 class="text-xs tracking-widest font-bold text-emerald-400 uppercase">
Series</h3><h2 class="text-base font-bold text-slate-100">åœ¨ Android ä¸­æ„å»ºå¯é•¿æœŸæ¼”åŒ–çš„ Feature æ¶æ„ï¼šä»æ¨¡å—è¾¹ç•Œåˆ°å•å‘æ•°æ®æµ</h2></div><span class="rounded-sm bg-slate-800 px-2 py-0.5 text-xs font-mono text-slate-300 border border-slate-600">5/5</span></div><div class="relative flex flex-col"><div class="absolute left-[7px] top-2 bottom-2 w-0.5 bg-slate-600 rounded-full"></div><a href="/blog/057931ede756/" class="group relative flex gap-4 py-2 transition-all items-center hover:pl-1"><div class="relative z-10 flex h-3.5 w-3.5 items-center justify-center"><div class="h-2.5 w-2.5 rounded-full bg-slate-500 group-hover:bg-slate-400 transition-colors"></div></div><div class="flex flex-col"><span class="text-sm leading-snug transition-colors text-slate-400 group-hover:text-slate-200">ä¸ºä»€ä¹ˆä½ çš„å¤šæ¨¡å—é¡¹ç›®ä¸€å®šä¼šäº’ç›¸æ±¡æŸ“</span></div></a><a href="/blog/45493f6eef9d/" class="group relative flex gap-4 py-2 transition-all items-center hover:pl-1"><div class="relative z-10 flex h-3.5 w-3.5 items-center justify-center"><div class="h-2.5 w-2.5 rounded-full bg-slate-500 group-hover:bg-slate-400 transition-colors"></div></div><div class="flex flex-col"><span class="text-sm leading-snug transition-colors text-slate-400 group-hover:text-slate-200">Core æ¨¡å—ä¸æ˜¯å·¥å…·ç®±ï¼šAndroid æ¶æ„é‡Œçš„â€œåœ°åŸºå±‚â€è¯¥æ”¾ä»€ä¹ˆ</span></div></a><a href="/blog/ea305ecafca7/" class="group relative flex gap-4 py-2 transition-all items-center hover:pl-1"><div class="relative z-10 flex h-3.5 w-3.5 items-center justify-center"><div class="h-2.5 w-2.5 rounded-full bg-slate-500 group-hover:bg-slate-400 transition-colors"></div></div><div class="flex flex-col"><span class="text-sm leading-snug transition-colors text-slate-400 group-hover:text-slate-200">è®© Feature åƒç¬¬ä¸‰æ–¹åº“ä¸€æ ·è¢«ä½¿ç”¨ï¼šAPI ä¸ Internal çš„è¾¹ç•Œè®¾è®¡</span></div></a><a href="/blog/24a358bdbf05/" class="group relative flex gap-4 py-2 transition-all items-center hover:pl-1"><div class="relative z-10 flex h-3.5 w-3.5 items-center justify-center"><div class="h-2.5 w-2.5 rounded-full bg-slate-500 group-hover:bg-slate-400 transition-colors"></div></div><div class="flex flex-col"><span class="text-sm leading-snug transition-colors text-slate-400 group-hover:text-slate-200">MVI åœ¨çœŸå®é¡¹ç›®ä¸­è¯¥æ€ä¹ˆè½åœ°ï¼šStateã€Intent ä¸ Effect çš„è¾¹ç•Œ</span></div></a><a href="/blog/435a921db46b/" class="group relative flex gap-4 py-2 transition-all items-center pointer-events-none"><div class="relative z-10 flex h-3.5 w-3.5 items-center justify-center"><div class="h-3 w-3 rounded-full bg-blue-400 shadow-[0_0_8px_var(--color-blue-400)] ring-4 ring-blue-400/20"></div></div><div class="flex flex-col"><span class="text-sm leading-snug transition-colors font-bold text-blue-400">å½“å¯¼èˆªå˜æˆçŠ¶æ€ï¼šå½»åº•æŠ›å¼ƒ NavController çš„çº¯ MVI å¯¼èˆª</span></div></a></div></div><!-- 3. éšæœºæ–‡ç«  --><div class="bg-slate-700 p-4 rounded-lg"><h3 class="text-emerald-400 mb-2">éšä¾¿çœ‹çœ‹</h3><div class="flex flex-wrap gap-2"><a class="px-3 py-1 bg-slate-600 rounded-full text-sm text-white hover:bg-emerald-500 transition" href="/blog/60810af53675/">å¦‚ä½•ä¼˜é›…åœ°å¤„ç†ç”¨æˆ·å–æ¶ˆæ–‡ä»¶ä¸Šä¼ çš„æ“ä½œ</a><a class="px-3 py-1 bg-slate-600 rounded-full text-sm text-white hover:bg-emerald-500 transition" href="/blog/66edd596bab7/">å‰ç«¯æ•°æ®å‹ç¼©ä¸è§£å‹ç¼©å®è·µæŒ‡å—</a><a class="px-3 py-1 bg-slate-600 rounded-full text-sm text-white hover:bg-emerald-500 transition" href="/blog/435a921db46b/">å½“å¯¼èˆªå˜æˆçŠ¶æ€ï¼šå½»åº•æŠ›å¼ƒ NavController çš„çº¯ MVI å¯¼èˆª</a></div></div></div></aside><main class="grow h-full overflow-auto w-3/4 px-8"><article class="text-zinc-200 mb-2 prose lg:prose-xl prose-stone
                 prose-headings:text-current prose-strong:text-current prose-code:text-current
                 prose-a:text-violet-200 prose-blockquote:text-stone-100"> <header> <h1>å½“å¯¼èˆªå˜æˆçŠ¶æ€ï¼šå½»åº•æŠ›å¼ƒ NavController çš„çº¯ MVI å¯¼èˆª</h1> </header> <p>è¿™æ˜¯ç³»åˆ—æ–‡ç« çš„<strong>ç¬¬äº”ç¯‡</strong>ã€‚</p>
<p>åœ¨å‰å››ç¯‡ä¸­ï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªä¸¥æ ¼åˆ†å±‚ã€æ¨¡å—éš”ç¦»ã€MVI é©±åŠ¨çš„æ¶æ„ä½“ç³»ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬è¦æ”»å…‹æœ€åä¸€ä¸ªå ¡å’ï¼š<strong>å¯¼èˆª</strong>ã€‚</p>
<p>åœ¨ä¼ ç»Ÿçš„ Android å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¹ æƒ¯ä¾èµ– <code>NavController</code> æˆ– <code>FragmentManager</code> æ¥ç®¡ç†é¡µé¢ã€‚ä½†è¿™å¸¦æ¥äº†ä¸€ä¸ªç»å…¸çš„ <strong>â€œåŒé‡æ•°æ®æºâ€éš¾é¢˜</strong>ï¼šUI æ¡†æ¶ç»´æŠ¤äº†ä¸€å¥—é¡µé¢æ ˆï¼Œè€Œæˆ‘ä»¬çš„ä¸šåŠ¡ Store å¯èƒ½ä¹Ÿéœ€è¦æ„ŸçŸ¥å½“å‰é¡µé¢çŠ¶æ€ã€‚å½“è¿™ä¸¤è€…ä¸åŒæ­¥æ—¶ï¼ŒBug ä¾¿éšä¹‹è€Œæ¥ã€‚</p>
<p>åœ¨æœ¬æ¶æ„çš„ç»ˆæå½¢æ€ä¸­ï¼Œæˆ‘ä»¬å°†é‡‡å–ä¸€ç§<strong>çº¯ç²¹çš„ MVI æ–¹æ¡ˆ</strong>ï¼šå½»åº•æŠ›å¼ƒ <code>NavController</code>ï¼Œå›å½’æ•°æ®ç»“æ„çš„æœ¬è´¨ã€‚</p>
<hr>
<blockquote>
<p><strong>â€œå¯¼èˆªä¸åº”è¯¥æ˜¯ä¸€ä¸ªâ€˜æ§åˆ¶å™¨â€™ï¼ˆControllerï¼‰ï¼Œå¯¼èˆªåº”è¯¥åªæ˜¯ä¸€ä¸ªâ€˜åˆ—è¡¨â€™ï¼ˆListï¼‰ã€‚â€</strong></p>
</blockquote>
<p>å¦‚æœæˆ‘ä»¬å°†æ•´ä¸ª App è§†ä¸ºä¸€ä¸ªçŠ¶æ€æœºï¼Œé‚£ä¹ˆâ€œå½“å‰æ˜¾ç¤ºä»€ä¹ˆé¡µé¢â€æ— éå°±æ˜¯ Store ä¸­çš„ä¸€ä¸ªå˜é‡ã€‚</p>
<p>åœ¨æœ¬ç¯‡ä¸­ï¼Œæˆ‘ä»¬å°†å±•ç¤ºå¦‚ä½•åˆ©ç”¨ Compose çš„å£°æ˜å¼ç‰¹æ€§ï¼Œæ„å»ºä¸€ä¸ª<strong>å•ä¸€æ•°æ®æºï¼ˆSingle Source of Truthï¼‰ã€ç±»å‹å®‰å…¨ã€ä¸”å®Œç¾æ”¯æŒ MVI</strong> çš„å¯¼èˆªç³»ç»Ÿã€‚</p>
<h2 id="ä¸€-æ ¸å¿ƒå›é¡¾core-å±‚çš„å¥‘çº¦">ä¸€ã€ æ ¸å¿ƒå›é¡¾ï¼šCore å±‚çš„å¥‘çº¦</h2>
<p>æ— è®ºåº•å±‚å®ç°å¤šä¹ˆæ¿€è¿›ï¼ŒCore å±‚çš„æŠ½è±¡æ°¸è¿œæ˜¯ç¨³å®šçš„ã€‚è¿™ä¿è¯äº† Feature æ¨¡å—çš„é›¶æ„ŸçŸ¥ã€‚</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="kotlin"><code><span class="line"><span style="color:#6A737D">// core/common/navigation/Screen.kt</span></span>
<span class="line"><span style="color:#6A737D">// é¡µé¢å³æ•°æ®ï¼šå¿…é¡»å¯åºåˆ—åŒ–ï¼Œä¸å¯å˜</span></span>
<span class="line"><span style="color:#B392F0">@Serializable</span></span>
<span class="line"><span style="color:#B392F0">@Immutable</span></span>
<span class="line"><span style="color:#F97583">sealed</span><span style="color:#F97583"> interface</span><span style="color:#B392F0"> Screen</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// core/common/navigation/Router.kt</span></span>
<span class="line"><span style="color:#6A737D">// åŠ¨ä½œå³æ¥å£ï¼šFeature åªç®¡è°ƒï¼Œä¸ç®¡è°å®ç°</span></span>
<span class="line"><span style="color:#F97583">interface</span><span style="color:#B392F0"> Router</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">    fun</span><span style="color:#B392F0"> navigateTo</span><span style="color:#E1E4E8">(screen: </span><span style="color:#B392F0">Screen</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">    fun</span><span style="color:#B392F0"> popBack</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h2 id="äºŒ-çœŸæ­£çš„å•ä¸€æ•°æ®æºmainstore">äºŒã€ çœŸæ­£çš„å•ä¸€æ•°æ®æºï¼šMainStore</h2>
<p>åœ¨ App å£³å·¥ç¨‹çš„é¡¶å±‚ MVI ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥æŠŠâ€œå¯¼èˆªæ ˆâ€å˜æˆäº†çŠ¶æ€çš„ä¸€éƒ¨åˆ†ã€‚æˆ‘ä»¬ä¸éœ€è¦å¤æ‚çš„ Graph XMLï¼Œåªéœ€è¦ä¸€ä¸ªç®€å•çš„ Listã€‚</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="kotlin"><code><span class="line"><span style="color:#6A737D">// app/internal/presentation/mvi/MainStore.kt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// 1. State: å¯¼èˆªæ ˆåªæ˜¯ä¸€ä¸ª List</span></span>
<span class="line"><span style="color:#F97583">data</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> MainState</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#F97583">    val</span><span style="color:#E1E4E8"> backStack: </span><span style="color:#B392F0">PersistentList</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Screen</span><span style="color:#E1E4E8">> </span><span style="color:#F97583">=</span><span style="color:#B392F0"> persistentListOf</span><span style="color:#E1E4E8">(HomeScreen) </span><span style="color:#6A737D">// åˆå§‹é¡µé¢</span></span>
<span class="line"><span style="color:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// 2. Intent: æ‰€æœ‰çš„è·³è½¬éƒ½æ˜¯å¯¹ List çš„å¢åˆ </span></span>
<span class="line"><span style="color:#F97583">sealed</span><span style="color:#F97583"> interface</span><span style="color:#B392F0"> MainIntent</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">    data</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> PushScreen</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">val</span><span style="color:#E1E4E8"> screen: </span><span style="color:#B392F0">Screen</span><span style="color:#E1E4E8">) : </span><span style="color:#B392F0">MainIntent</span></span>
<span class="line"><span style="color:#F97583">    data</span><span style="color:#F97583"> object</span><span style="color:#B392F0"> BackClicked</span><span style="color:#E1E4E8"> : </span><span style="color:#B392F0">MainIntent</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// 3. Reducer: çº¯é€»è¾‘å¤„ç†</span></span>
<span class="line"><span style="color:#F97583">override</span><span style="color:#F97583"> fun</span><span style="color:#B392F0"> MainState</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">reduce</span><span style="color:#E1E4E8">(msg: </span><span style="color:#B392F0">Message</span><span style="color:#E1E4E8">): </span><span style="color:#B392F0">MainState</span><span style="color:#F97583"> =</span><span style="color:#F97583"> when</span><span style="color:#E1E4E8"> (msg) {</span></span>
<span class="line"><span style="color:#F97583">    is</span><span style="color:#E1E4E8"> Message.Push </span><span style="color:#F97583">-></span><span style="color:#B392F0"> copy</span><span style="color:#E1E4E8">(backStack </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> backStack </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> msg.screen)</span></span>
<span class="line"><span style="color:#F97583">    is</span><span style="color:#E1E4E8"> Message.Pop </span><span style="color:#F97583">-></span><span style="color:#B392F0"> copy</span><span style="color:#E1E4E8">(backStack </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> backStack.</span><span style="color:#B392F0">dropLast</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">))</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h2 id="ä¸‰-èƒ¶æ°´å±‚router-çš„å»æƒ">ä¸‰ã€ èƒ¶æ°´å±‚ï¼šRouter çš„â€œå»æƒâ€</h2>
<p>æ—¢ç„¶å¯¼èˆªåªæ˜¯å‘ Intentï¼Œé‚£ä¹ˆ <code>Router</code> çš„å®ç°ç±»å°±å˜å¾—æåº¦ç®€å•ã€‚å®ƒä¸å†æŒæœ‰ä»»ä½• Controllerï¼Œå®ƒåªæ˜¯ä¸€ä¸ª <strong>Intent å‘é€å™¨</strong>ã€‚</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="kotlin"><code><span class="line"><span style="color:#6A737D">// app/internal/navigation/AppRouterImpl.kt</span></span>
<span class="line"><span style="color:#B392F0">@Stable</span></span>
<span class="line"><span style="color:#F97583">internal</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> AppRouterImpl</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#F97583">    private</span><span style="color:#F97583"> val</span><span style="color:#E1E4E8"> handleIntent: (</span><span style="color:#B392F0">MainIntent</span><span style="color:#E1E4E8">) -> </span><span style="color:#B392F0">Unit</span></span>
<span class="line"><span style="color:#E1E4E8">) : </span><span style="color:#B392F0">Router</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    override</span><span style="color:#F97583"> fun</span><span style="color:#B392F0"> navigateTo</span><span style="color:#E1E4E8">(screen: </span><span style="color:#B392F0">Screen</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#6A737D">        // è·³è½¬ = å‘é€ Push æ„å›¾</span></span>
<span class="line"><span style="color:#B392F0">        handleIntent</span><span style="color:#E1E4E8">(MainIntent.</span><span style="color:#B392F0">PushScreen</span><span style="color:#E1E4E8">(screen))</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    override</span><span style="color:#F97583"> fun</span><span style="color:#B392F0"> popBack</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#6A737D">        // è¿”å› = å‘é€ Back æ„å›¾</span></span>
<span class="line"><span style="color:#B392F0">        handleIntent</span><span style="color:#E1E4E8">(MainIntent.BackClicked)</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h2 id="å››-ui-å±‚æ„å»º-navdisplay">å››ã€ UI å±‚ï¼šæ„å»º NavDisplay</h2>
<p>è¿™æ˜¯æ•´ä¸ªç³»ç»Ÿçš„â€œæ¸²æŸ“å¼•æ“â€ã€‚æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå®¹å™¨æ¥æ ¹æ® <code>List&#x3C;Screen></code> æ¸²æŸ“é¡µé¢ï¼Œå¹¶å¤„ç† ViewModel çš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="kotlin"><code><span class="line"><span style="color:#6A737D">// app/internal/ui/MainScreen.kt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">@Composable</span></span>
<span class="line"><span style="color:#F97583">fun</span><span style="color:#B392F0"> MainScreen</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#E1E4E8">    state: </span><span style="color:#B392F0">MainState</span><span style="color:#E1E4E8">, </span></span>
<span class="line"><span style="color:#E1E4E8">    handleIntent: (</span><span style="color:#B392F0">MainIntent</span><span style="color:#E1E4E8">) -> </span><span style="color:#B392F0">Unit</span></span>
<span class="line"><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#6A737D">    // 1. æ‹¦æˆªç³»ç»Ÿè¿”å›é”®</span></span>
<span class="line"><span style="color:#6A737D">    // å…³é”®ç‚¹ï¼šç‰©ç†è¿”å›é”®ä¸å†ç”±ç³»ç»Ÿå¤„ç†ï¼Œè€Œæ˜¯è§¦å‘æˆ‘ä»¬çš„ Intent</span></span>
<span class="line"><span style="color:#6A737D">    // åªè¦æ ˆé‡Œä¸åªä¸€é¡µï¼Œæˆ‘ä»¬å°±æ‹¦æˆªè¿”å›é”®</span></span>
<span class="line"><span style="color:#B392F0">    BackHandler</span><span style="color:#E1E4E8">(enabled </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> state.backStack.size </span><span style="color:#F97583">></span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#B392F0">        handleIntent</span><span style="color:#E1E4E8">(MainIntent.BackClicked)</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // 2. æ³¨å…¥ Router</span></span>
<span class="line"><span style="color:#F97583">    val</span><span style="color:#E1E4E8"> router </span><span style="color:#F97583">=</span><span style="color:#B392F0"> remember</span><span style="color:#E1E4E8">(handleIntent) { </span><span style="color:#B392F0">AppRouterImpl</span><span style="color:#E1E4E8">(handleIntent) }</span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#B392F0">    CompositionLocalProvider</span><span style="color:#E1E4E8">(LocalRouter provides router) {</span></span>
<span class="line"><span style="color:#B392F0">        Scaffold</span><span style="color:#E1E4E8"> { innerPadding </span><span style="color:#F97583">-></span></span>
<span class="line"><span style="color:#6A737D">            // 3. è‡ªå®šä¹‰å¯¼èˆªå®¹å™¨ (NavDisplay)</span></span>
<span class="line"><span style="color:#B392F0">            NavDisplay</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#E1E4E8">                backStack </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> state.backStack,</span></span>
<span class="line"><span style="color:#E1E4E8">                modifier </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> Modifier.</span><span style="color:#B392F0">padding</span><span style="color:#E1E4E8">(innerPadding),</span></span>
<span class="line"><span style="color:#6A737D">                // å…³é”®ç‚¹ï¼šè£…é¥°å™¨ (Decorators)</span></span>
<span class="line"><span style="color:#6A737D">                // å®ƒä»¬è´Ÿè´£åœ¨æ²¡æœ‰ NavController çš„æƒ…å†µä¸‹ï¼Œ</span></span>
<span class="line"><span style="color:#6A737D">                // æ‰‹åŠ¨ç»´æŒ ViewModel å’Œ SaveableState çš„å­˜æ´»</span></span>
<span class="line"><span style="color:#E1E4E8">                entryDecorators </span><span style="color:#F97583">=</span><span style="color:#B392F0"> listOf</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#B392F0">                    rememberSaveableStateHolderNavEntryDecorator</span><span style="color:#E1E4E8">(),</span></span>
<span class="line"><span style="color:#B392F0">                    rememberViewModelStoreNavEntryDecorator</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">                ),</span></span>
<span class="line"><span style="color:#6A737D">                // 4. è·¯ç”±æ³¨å†Œå…¥å£</span></span>
<span class="line"><span style="color:#E1E4E8">                entryProvider </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">                    // è¿™é‡Œèšåˆå„æ¨¡å—çš„è·¯ç”±è¡¨</span></span>
<span class="line"><span style="color:#B392F0">                    homeEntryProvider</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#B392F0">                    userEntryProvider</span><span style="color:#E1E4E8">() </span><span style="color:#6A737D">// è§ä¸‹æ–‡è¯¦è§£</span></span>
<span class="line"><span style="color:#B392F0">                    anotherEntryProvider</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">                }</span></span>
<span class="line"><span style="color:#E1E4E8">            )</span></span>
<span class="line"><span style="color:#E1E4E8">        }</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h2 id="äº”-ä¸šåŠ¡å±‚ç±»å‹å®‰å…¨çš„è·¯ç”±æ³¨å†Œ">äº”ã€ ä¸šåŠ¡å±‚ï¼šç±»å‹å®‰å…¨çš„è·¯ç”±æ³¨å†Œ</h2>
<p>åœ¨ Feature æ¨¡å—ä¸­ï¼Œæˆ‘ä»¬å¦‚ä½•å®šä¹‰é¡µé¢å’Œä¼ é€’å‚æ•°ï¼Ÿ
å¾—ç›Šäº Kotlin çš„æ³›å‹å’Œ DSLï¼Œæˆ‘ä»¬å¯ä»¥å®ç°<strong>æè‡´çš„ç±»å‹å®‰å…¨</strong>ã€‚ä¸éœ€è¦ Bundleï¼Œä¸éœ€è¦ String Keyï¼Œå‚æ•°å°±æ˜¯å¯¹è±¡æœ¬èº«ã€‚</p>
<p>ä»¥ <code>feature:user</code> æ¨¡å—ä¸ºä¾‹ï¼Œæˆ‘ä»¬åœ¨ API å±‚æš´éœ²å¦‚ä¸‹çš„æ³¨å†Œæ‰©å±•å‡½æ•°ï¼š</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="kotlin"><code><span class="line"><span style="color:#6A737D">// feature/user/api/UserGraph.kt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">fun</span><span style="color:#B392F0"> EntryProviderScope</span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8">Screen</span><span style="color:#F97583">></span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">userEntryProvider</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#6A737D">    // 1. ä¸å¸¦å‚é¡µé¢æ³¨å†Œ</span></span>
<span class="line"><span style="color:#B392F0">    entry</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">UserListRoute</span><span style="color:#E1E4E8">> {</span></span>
<span class="line"><span style="color:#6A737D">        // ç›´æ¥æ³¨å…¥ ViewModel</span></span>
<span class="line"><span style="color:#F97583">        val</span><span style="color:#E1E4E8"> kvm </span><span style="color:#F97583">=</span><span style="color:#B392F0"> koinViewModel</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">UserListViewModel</span><span style="color:#E1E4E8">>()</span></span>
<span class="line"><span style="color:#B392F0">        UserListScreenRoot</span><span style="color:#E1E4E8">(kvm)</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // 2. å¸¦å‚é¡µé¢æ³¨å†Œ</span></span>
<span class="line"><span style="color:#6A737D">    // lambda çš„å‚æ•° params å°±æ˜¯ UserDetail å¯¹è±¡æœ¬èº«ï¼Œç±»å‹è‡ªåŠ¨æ¨æ–­</span></span>
<span class="line"><span style="color:#B392F0">    entry</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">UserDetail</span><span style="color:#E1E4E8">> { params </span><span style="color:#F97583">-></span></span>
<span class="line"><span style="color:#E1E4E8">        Log.</span><span style="color:#B392F0">d</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"EntryProviderScope"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"in page UserDetail with </span><span style="color:#79B8FF">$params</span><span style="color:#9ECBFF">"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">        </span></span>
<span class="line"><span style="color:#6A737D">        // å°†å‚æ•°ç›´æ¥ä¼ ç»™ ViewModel</span></span>
<span class="line"><span style="color:#F97583">        val</span><span style="color:#E1E4E8"> kvm </span><span style="color:#F97583">=</span><span style="color:#B392F0"> koinViewModel</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">UserDetailViewModel</span><span style="color:#E1E4E8">> {</span></span>
<span class="line"><span style="color:#B392F0">            parametersOf</span><span style="color:#E1E4E8">(params)</span></span>
<span class="line"><span style="color:#E1E4E8">        }</span></span>
<span class="line"><span style="color:#E1E4E8">        </span></span>
<span class="line"><span style="color:#B392F0">        UserDetailScreenRoot</span><span style="color:#E1E4E8">(kvm)</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p><strong>è¿™æ®µä»£ç å±•ç¤ºäº†æ¶æ„çš„ç²¾é«“ï¼š</strong></p>
<ol>
<li><strong>ç›´è§‚</strong>ï¼š<code>entry&#x3C;T></code> æ˜ç¡®æŒ‡å‡ºäº†è¿™ä¸ªé¡µé¢å¯¹åº”å“ªä¸ª Screen æ•°æ®ç±»ã€‚</li>
<li><strong>å®‰å…¨</strong>ï¼š<code>params</code> æ˜¯å¼ºç±»å‹çš„ã€‚ä½ ä¸å¯èƒ½åœ¨å– <code>userId</code> æ—¶å‘ç”Ÿç±»å‹è½¬æ¢é”™è¯¯ï¼Œå› ä¸ºå®ƒå°±æ˜¯ä¸€ä¸ª Longã€‚</li>
<li><strong>è§£è€¦</strong>ï¼šFeature æ¨¡å—åªè´Ÿè´£ç”Ÿäº§ UI å’Œ ViewModelï¼Œä¸å…³å¿ƒè¿™äº›é¡µé¢æ˜¯å¦‚ä½•è¢«å‹æ ˆã€å¦‚ä½•è¢«åŠ¨ç”»åˆ‡æ¢çš„ã€‚</li>
</ol>
<h2 id="å…­-è¿›é˜¶feature-å†…éƒ¨çš„è·³è½¬">å…­ã€ è¿›é˜¶ï¼šFeature å†…éƒ¨çš„è·³è½¬</h2>
<p>åœ¨ Feature å†…éƒ¨ï¼ˆä¾‹å¦‚ <code>UserListViewModel</code>ï¼‰ï¼Œè·³è½¬é€»è¾‘ä¾ç„¶éµå¾ª MVI çš„å‰¯ä½œç”¨æµï¼Œä¸”å®Œå…¨æ— æ„ŸçŸ¥åº•å±‚å®ç°ã€‚</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="kotlin"><code><span class="line"><span style="color:#6A737D">// feature/user/internal/presentation/UserListViewModel.kt</span></span>
<span class="line"><span style="color:#F97583">fun</span><span style="color:#B392F0"> onItemClick</span><span style="color:#E1E4E8">(id: </span><span style="color:#B392F0">Long</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#6A737D">    // å‘é€ Label (å‰¯ä½œç”¨)</span></span>
<span class="line"><span style="color:#B392F0">    publish</span><span style="color:#E1E4E8">(UserListLabel.</span><span style="color:#B392F0">GoToDetail</span><span style="color:#E1E4E8">(id))</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// feature/user/internal/presentation/UserListScreen.kt</span></span>
<span class="line"><span style="color:#F97583">val</span><span style="color:#E1E4E8"> labels </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> viewModel.labels</span></span>
<span class="line"><span style="color:#B392F0">LaunchedEffect</span><span style="color:#E1E4E8">(Unit) {</span></span>
<span class="line"><span style="color:#E1E4E8">    labels.</span><span style="color:#B392F0">collect</span><span style="color:#E1E4E8"> { label </span><span style="color:#F97583">-></span></span>
<span class="line"><span style="color:#F97583">        when</span><span style="color:#E1E4E8">(label) {</span></span>
<span class="line"><span style="color:#F97583">            is</span><span style="color:#E1E4E8"> UserListLabel.GoToDetail </span><span style="color:#F97583">-></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">                // è°ƒç”¨ Core å±‚çš„ Router æ¥å£</span></span>
<span class="line"><span style="color:#6A737D">                // ç›´æ¥ä¼ é€’ UserDetail å¯¹è±¡ï¼Œå‚æ•°éšå¯¹è±¡ä¸€èµ·ä¼ é€’</span></span>
<span class="line"><span style="color:#E1E4E8">                router.</span><span style="color:#B392F0">navigateTo</span><span style="color:#E1E4E8">(</span><span style="color:#B392F0">UserDetail</span><span style="color:#E1E4E8">(userId </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> label.id))</span></span>
<span class="line"><span style="color:#E1E4E8">            }</span></span>
<span class="line"><span style="color:#E1E4E8">        }</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h2 id="ä¸ƒ-å…¨ç³»åˆ—æ€»ç»“">ä¸ƒã€ å…¨ç³»åˆ—æ€»ç»“</h2>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬çš„ <strong>â€œå¯é•¿æœŸæ¼”åŒ– Feature æ¶æ„â€</strong> æ„å»ºå®Œæˆã€‚</p>
<p>é€šè¿‡è¿™äº”ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªï¼š</p>
<ol>
<li><strong>ç‰©ç†éš”ç¦»</strong>ï¼šApp / Core / Feature èŒè´£åˆ†æ˜ï¼ŒAPI ä¸ Internal ä¸¥æ ¼ç•Œå®šã€‚</li>
<li><strong>MVI é©±åŠ¨</strong>ï¼šState æ˜¯å”¯ä¸€çœŸç†ï¼ŒIntent æ˜¯å”¯ä¸€é©±åŠ¨åŠ›ï¼ŒåŒ…æ‹¬å¯¼èˆªã€‚</li>
<li><strong>çº¯çŠ¶æ€å¯¼èˆª</strong>ï¼šæŠ›å¼ƒäº†å¤æ‚çš„ <code>NavController</code>ï¼Œè®©è·¯ç”±æ ˆå›å½’ä¸º Store ä¸­çš„ä¸€ä¸ªç®€å• Listã€‚</li>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šä» API å®šä¹‰åˆ°è·¯ç”±ä¼ å‚ï¼Œç¼–è¯‘å™¨ä¸ºä½ æ‹¦æˆªäº†ç»å¤§å¤šæ•°ä½çº§é”™è¯¯ã€‚</li>
</ol>
<p>è¿™å¥— <strong>Compose Based</strong> æ¶æ„ä¸å†ä¾èµ– Android ä¼ ç»Ÿçš„ <code>FragmentManager</code> æˆ–å¤æ‚çš„ <code>Navigation Graph XML</code>ï¼Œè€Œæ˜¯åˆ©ç”¨ <code>Compose</code> çš„å£°æ˜å¼ç‰¹æ€§ï¼Œå°†æ•´ä¸ª App å˜æˆäº†ä¸€ä¸ªçº¯ç²¹ã€å¯é¢„æµ‹ã€æ˜“æµ‹è¯•çš„çŠ¶æ€æœºã€‚</p>
<p><strong>(å…¨ç³»åˆ—å®Œ)</strong></p> </article><div class="tags"><div class="_tailmateTag_u5zwa_5"><a href="/blog/tag/è½¯ä»¶æ¶æ„/">è½¯ä»¶æ¶æ„</a></div><div class="_tailmateTag_u5zwa_5"><a href="/blog/tag/Android/">Android</a></div><div class="_tailmateTag_u5zwa_5"><a href="/blog/tag/Jetpack Compose/">Jetpack Compose</a></div><div class="_tailmateTag_u5zwa_5"><a href="/blog/tag/MVIKotlin/">MVIKotlin</a></div><div class="_tailmateTag_u5zwa_5"><a href="/blog/tag/Kotlin åç¨‹/">Kotlin åç¨‹</a></div><div class="_tailmateTag_u5zwa_5"><a href="/blog/tag/å¼‚æ­¥ç¼–ç¨‹/">å¼‚æ­¥ç¼–ç¨‹</a></div><div class="_tailmateTag_u5zwa_5"><a href="/blog/tag/å‘å¸ƒè®¢é˜…/">å‘å¸ƒè®¢é˜…</a></div><div class="_tailmateTag_u5zwa_5"><a href="/blog/tag/å“åº”å¼ç¼–ç¨‹/">å“åº”å¼ç¼–ç¨‹</a></div></div></main></div><div class="okTgGW_footer"> <p>Supported and developed by&nbsp;
<a href="https://github.com/misakamayako/" target="_blank" rel="noreferrer">misaka mayako</a> </p> <p>
Tech with <a href="https://astro.build/" target="_blank" rel="noreferrer">astro</a>,&nbsp;
<a href="https://tailwindcss.com/" target="_blank" rel="noreferrer">tailwindcss</a>,&nbsp;
        and <a href="https://pm2.keymetrics.io/" target="_blank" rel="noreferrer">pm2</a>,&nbsp;
</p> <p> feed back via <a href="mailto:misakamayaco@qq.com" target="_blank" rel="noreferrer">ğŸ“«</a></p> <a rel="license noreferrer" href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" class="absolute right-6 bottom-6"> <img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" class="inlin-block border-0" src="/cc4.0.png"> </a> </div></div><script type="module" is:global>
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('pre').forEach((block) => {
                if (block.dataset.language === 'plaintext') return
                const button = document.createElement('button')
                button.innerText = 'å¤åˆ¶'
                button.className =
                    'absolute top-2 right-2 bg-slate-800 text-white px-2 py-1 rounded text-sm opacity-50 hover:opacity-100 transition cursor-pointer'
                button.addEventListener('click', () => {
                    const code = block.querySelector('code')
                    if (code) {
                        navigator.clipboard.writeText(code.innerText).then(() => {
                            button.innerText = 'å·²å¤åˆ¶ï¼'
                            setTimeout(() => (button.innerText = 'å¤åˆ¶'), 1000)
                        })
                    }
                })
                block.classList.add('relative')
                block.appendChild(button)
            })
        })
    </script> </body></html>