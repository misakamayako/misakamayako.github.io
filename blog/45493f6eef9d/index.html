<!DOCTYPE html><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha512-fHwaWebuwA7NSF5Qg/af4UeDx9XqUpYpOGgubo3yWu+b2IQR4UeQwbb42Ti7gVAjNtVoI/I9TEoYeu9omwcC6g==" crossorigin="anonymous"><html lang="zh-hans" class="h-full w-full m-0"> <head><meta charset="utf-8"><link rel="icon" type="image/jepg" href="/favicon.jpg"><meta name="viewport" content="width=device-width"><meta name="google-site-verification" content="-RgOsAO7rMTpJ8vNk8-ILdAA8VmiTEUc9HiUVVTKeEs"><meta name="generator" content="Astro v5.17.2"><title>âœ¨å¾¡å‚ç½‘ç»œ-Core æ¨¡å—ä¸æ˜¯å·¥å…·ç®±ï¼šAndroid æ¶æ„é‡Œçš„â€œåœ°åŸºå±‚â€è¯¥æ”¾ä»€ä¹ˆâœ¨</title><link rel="stylesheet" href="/_astro/index.C6IHRFDG.css">
<style>/*! tailwindcss v4.1.18 | MIT License | https://tailwindcss.com */
@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-border-style:solid}}}.okTgGW_footer{font-size:var(--text-sm,.875rem);line-height:var(--tw-leading,var(--text-sm--line-height,calc(1.25/.875)));color:var(--color-stone-400,#a6a09b);text-align:center;padding-block:calc(var(--spacing,.25rem)*4);border-top-color:var(--color-zinc-50,#fafafa);border-top-style:var(--tw-border-style);background-color:var(--color-slate-900,#0f172b);border-top-width:2px;width:100%;position:relative}@supports (color:color(display-p3 0 0 0)){.okTgGW_footer{color:var(--color-stone-400,color(display-p3 .647628 .627105 .61098));border-top-color:var(--color-zinc-50,color(display-p3 .980256 .980256 .980256));background-color:var(--color-slate-900,color(display-p3 .0639692 .0891152 .163036))}}@supports (color:lab(0% 0 0)){.okTgGW_footer{color:var(--color-stone-400,lab(66.2166% 1.88044 3.20326));border-top-color:var(--color-zinc-50,lab(98.26% 0 0));background-color:var(--color-slate-900,lab(7.78673% 1.82345 -15.0537))}}.okTgGW_footer a{text-decoration-line:underline}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}
/*! tailwindcss v4.1.18 | MIT License | https://tailwindcss.com */
@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-border-style:solid;--tw-translate-x:0;--tw-translate-y:0;--tw-translate-z:0}}}.q0UmqG_menu{height:calc(var(--spacing,.25rem)*16);padding-right:calc(var(--spacing,.25rem)*16);border-bottom-color:var(--color-zinc-50,#fafafa);border-bottom-style:var(--tw-border-style);text-align:right;border-bottom-width:2px}@supports (color:color(display-p3 0 0 0)){.q0UmqG_menu{border-bottom-color:var(--color-zinc-50,color(display-p3 .980256 .980256 .980256))}}@supports (color:lab(0% 0 0)){.q0UmqG_menu{border-bottom-color:var(--color-zinc-50,lab(98.26% 0 0))}}.q0UmqG_menu a{padding-inline:calc(var(--spacing,.25rem)*2);padding-block:calc(var(--spacing,.25rem)*2);font-size:var(--text-xl,1.25rem);line-height:var(--tw-leading,var(--text-xl--line-height,calc(1.75/1.25)));color:var(--color-zinc-50,#fafafa);margin-top:calc(var(--spacing,.25rem)*2.5);display:inline-block}@supports (color:color(display-p3 0 0 0)){.q0UmqG_menu a{color:var(--color-zinc-50,color(display-p3 .980256 .980256 .980256))}}@supports (color:lab(0% 0 0)){.q0UmqG_menu a{color:var(--color-zinc-50,lab(98.26% 0 0))}}@media (hover:hover){.q0UmqG_menu a:hover{--tw-translate-y:calc(var(--spacing,.25rem)*-.5);translate:var(--tw-translate-x)var(--tw-translate-y);color:var(--color-sky-500,#00a5ef)}@supports (color:color(display-p3 0 0 0)){.q0UmqG_menu a:hover{color:var(--color-sky-500,color(display-p3 .219113 .639027 .931479))}}@supports (color:lab(0% 0 0)){.q0UmqG_menu a:hover{color:var(--color-sky-500,lab(63.3038% -18.433 -51.0407))}}}.q0UmqG_menu a{transition-property:transform,translate,scale,rotate;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function,cubic-bezier(.4,0,.2,1)));transition-duration:var(--tw-duration,var(--default-transition-duration,.15s))}.q0UmqG_navLink{padding-inline:calc(var(--spacing,.25rem)*2);padding-block:calc(var(--spacing,.25rem)*2);font-size:var(--text-xl,1.25rem);line-height:var(--tw-leading,var(--text-xl--line-height,calc(1.75/1.25)));color:var(--color-zinc-50,#fafafa);margin-top:calc(var(--spacing,.25rem)*2.5);display:inline-block}@supports (color:color(display-p3 0 0 0)){.q0UmqG_navLink{color:var(--color-zinc-50,color(display-p3 .980256 .980256 .980256))}}@supports (color:lab(0% 0 0)){.q0UmqG_navLink{color:var(--color-zinc-50,lab(98.26% 0 0))}}@media (hover:hover){.q0UmqG_navLink:hover{color:var(--color-sky-500,#00a5ef)}@supports (color:color(display-p3 0 0 0)){.q0UmqG_navLink:hover{color:var(--color-sky-500,color(display-p3 .219113 .639027 .931479))}}@supports (color:lab(0% 0 0)){.q0UmqG_navLink:hover{color:var(--color-sky-500,lab(63.3038% -18.433 -51.0407))}}}.q0UmqG_navLink{transition:color .4s}.q0UmqG_avatar{float:right;border-radius:.25rem;display:inline-block;overflow:hidden}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-translate-x{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-y{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-z{syntax:"*";inherits:false;initial-value:0}
</style>
<link rel="stylesheet" href="/_astro/_slug_.aUcrWOZv.css"><script type="module" src="/_astro/page.D1uwR3nK.js"></script></head> <body class="w-full h-full flex flex-col"> <div class="bg-slate-800 h-screen flex flex-col"><div class="bg-slate-700 w-full"> <div class="q0UmqG_avatar"> <img src="/favicon.jpg" width="64" height="64" alt=""> </div> <nav class="q0UmqG_menu"> <a href="/" class="q0UmqG_navLink">home</a> <a href="/blog/" class="q0UmqG_navLink">blog</a> <a href="/utils/" class="q0UmqG_navLink">utils</a> <a href="/dream-map/" class="inline-block">dream map</a> <a href="/album/" class="q0UmqG_navLink">album</a> <a href="/about-me/" class="q0UmqG_navLink">about me</a> </nav> </div><div class="flex p-4 grow flex-row h-full overflow-hidden"><aside class="w-1/4 ml-4 md:block min-w-[200px] overflow-auto pr-2"><div class="sticky top-4 space-y-6"><div class="bg-slate-700 p-4 rounded-lg"><img src="/avatar.jpg" class="w-16 h-16 rounded-full mx-auto"><p class="text-white text-center mt-2">ä½œè€…ï¼šmisakamayako</p><p class="text-white text-center mt-2">å‘å¸ƒæ—¶é—´ï¼š2026/01/07</p></div><div class="bg-slate-700 p-4 rounded-lg"><h3 class="text-emerald-400 mb-2">ç®€ä»‹</h3><p class="text-white font-light mb-2">Core æ¨¡å—çš„èŒè´£ä¸æ˜¯ä»£ç å¤ç”¨ï¼Œè€Œæ˜¯åˆ¶å®šâ€œç‰©ç†å®šå¾‹â€ã€‚æœ¬æ–‡æ¢è®¨å¦‚ä½•é¿å… Core æ¨¡å—æ¼”å˜ä¸º God Moduleï¼ˆä¸Šå¸æ¨¡å—ï¼‰ï¼Œé€šè¿‡æ— ä¸šåŠ¡ã€æ— å†…éƒ¨ä¾èµ–ã€é«˜æŠ½è±¡ä¸‰å¤§æˆ’å¾‹ï¼Œé‡æ–°å®šä¹‰å¯¼èˆªç³»ç»Ÿã€UI è§„èŒƒä¸å·¥å…·ç±»è¾¹ç•Œã€‚å®æˆ˜æ¼”ç¤ºå¦‚ä½•å°†å¯¼èˆªæŠ½è±¡ä¸ºçŠ¶æ€ï¼ˆScreenï¼‰ï¼Œå®ç°ä¸šåŠ¡æ¨¡å—ä¸åº•å±‚æ¡†æ¶çš„å½»åº•è§£è€¦ã€‚</p></div><!-- 2. å…³è”æ–‡ç«  --><div class="mb-4 rounded-xl bg-slate-700 p-5 shadow-xl border border-slate-600/50"><div class="mb-4 flex items-center justify-between border-b border-slate-600 pb-3"><div><h3 class="text-xs tracking-widest font-bold text-emerald-400 uppercase">
Series</h3><h2 class="text-base font-bold text-slate-100">åœ¨ Android ä¸­æ„å»ºå¯é•¿æœŸæ¼”åŒ–çš„ Feature æ¶æ„ï¼šä»æ¨¡å—è¾¹ç•Œåˆ°å•å‘æ•°æ®æµ</h2></div><span class="rounded-sm bg-slate-800 px-2 py-0.5 text-xs font-mono text-slate-300 border border-slate-600">2/5</span></div><div class="relative flex flex-col"><div class="absolute left-[7px] top-2 bottom-2 w-0.5 bg-slate-600 rounded-full"></div><a href="/blog/057931ede756/" class="group relative flex gap-4 py-2 transition-all items-center hover:pl-1"><div class="relative z-10 flex h-3.5 w-3.5 items-center justify-center"><div class="h-2.5 w-2.5 rounded-full bg-slate-500 group-hover:bg-slate-400 transition-colors"></div></div><div class="flex flex-col"><span class="text-sm leading-snug transition-colors text-slate-400 group-hover:text-slate-200">ä¸ºä»€ä¹ˆä½ çš„å¤šæ¨¡å—é¡¹ç›®ä¸€å®šä¼šäº’ç›¸æ±¡æŸ“</span></div></a><a href="/blog/45493f6eef9d/" class="group relative flex gap-4 py-2 transition-all items-center pointer-events-none"><div class="relative z-10 flex h-3.5 w-3.5 items-center justify-center"><div class="h-3 w-3 rounded-full bg-blue-400 shadow-[0_0_8px_var(--color-blue-400)] ring-4 ring-blue-400/20"></div></div><div class="flex flex-col"><span class="text-sm leading-snug transition-colors font-bold text-blue-400">Core æ¨¡å—ä¸æ˜¯å·¥å…·ç®±ï¼šAndroid æ¶æ„é‡Œçš„â€œåœ°åŸºå±‚â€è¯¥æ”¾ä»€ä¹ˆ</span></div></a><a href="/blog/ea305ecafca7/" class="group relative flex gap-4 py-2 transition-all items-center hover:pl-1"><div class="relative z-10 flex h-3.5 w-3.5 items-center justify-center"><div class="h-3 w-3 rounded-full border-2 border-slate-500 bg-slate-700 group-hover:border-slate-300 transition-colors"></div></div><div class="flex flex-col"><span class="text-sm leading-snug transition-colors text-slate-300 group-hover:text-white">è®© Feature åƒç¬¬ä¸‰æ–¹åº“ä¸€æ ·è¢«ä½¿ç”¨ï¼šAPI ä¸ Internal çš„è¾¹ç•Œè®¾è®¡</span></div></a><a href="/blog/24a358bdbf05/" class="group relative flex gap-4 py-2 transition-all items-center hover:pl-1"><div class="relative z-10 flex h-3.5 w-3.5 items-center justify-center"><div class="h-3 w-3 rounded-full border-2 border-slate-500 bg-slate-700 group-hover:border-slate-300 transition-colors"></div></div><div class="flex flex-col"><span class="text-sm leading-snug transition-colors text-slate-300 group-hover:text-white">MVI åœ¨çœŸå®é¡¹ç›®ä¸­è¯¥æ€ä¹ˆè½åœ°ï¼šStateã€Intent ä¸ Effect çš„è¾¹ç•Œ</span></div></a><a href="/blog/435a921db46b/" class="group relative flex gap-4 py-2 transition-all items-center hover:pl-1"><div class="relative z-10 flex h-3.5 w-3.5 items-center justify-center"><div class="h-3 w-3 rounded-full border-2 border-slate-500 bg-slate-700 group-hover:border-slate-300 transition-colors"></div></div><div class="flex flex-col"><span class="text-sm leading-snug transition-colors text-slate-300 group-hover:text-white">å½“å¯¼èˆªå˜æˆçŠ¶æ€ï¼šå½»åº•æŠ›å¼ƒ NavController çš„çº¯ MVI å¯¼èˆª</span></div></a></div></div><!-- 3. éšæœºæ–‡ç«  --><div class="bg-slate-700 p-4 rounded-lg"><h3 class="text-emerald-400 mb-2">éšä¾¿çœ‹çœ‹</h3><div class="flex flex-wrap gap-2"><a class="px-3 py-1 bg-slate-600 rounded-full text-sm text-white hover:bg-emerald-500 transition" href="/blog/88fe8af400de/">JDK 22 FFM API ä¸ä¼ ç»Ÿ JNI çš„å¯¹æ¯”</a><a class="px-3 py-1 bg-slate-600 rounded-full text-sm text-white hover:bg-emerald-500 transition" href="/blog/45493f6eef9d/">Core æ¨¡å—ä¸æ˜¯å·¥å…·ç®±ï¼šAndroid æ¶æ„é‡Œçš„â€œåœ°åŸºå±‚â€è¯¥æ”¾ä»€ä¹ˆ</a><a class="px-3 py-1 bg-slate-600 rounded-full text-sm text-white hover:bg-emerald-500 transition" href="/blog/8b44690e60a0/">æ„å»ºç»ˆæè·¨å¹³å°åº”ç”¨ï¼šKotlin Multiplatform ä¸ Compose å…±äº« UI æ¶æ„æŒ‡å—</a></div></div></div></aside><main class="grow h-full overflow-auto w-3/4 px-8"><article class="text-zinc-200 mb-2 prose lg:prose-xl prose-stone
                 prose-headings:text-current prose-strong:text-current prose-code:text-current
                 prose-a:text-violet-200 prose-blockquote:text-stone-100"> <header> <h1>Core æ¨¡å—ä¸æ˜¯å·¥å…·ç®±ï¼šAndroid æ¶æ„é‡Œçš„â€œåœ°åŸºå±‚â€è¯¥æ”¾ä»€ä¹ˆ</h1> </header> <p>åœ¨ä¸Šä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬ç¡®ç«‹äº†â€œFeature äº’ä¸ä¾èµ–â€çš„é“å¾‹ã€‚ä½†é—®é¢˜éšä¹‹è€Œæ¥ï¼šå¦‚æœ Feature ä¹‹é—´ä¸èƒ½æ²Ÿé€šï¼ŒåŸºç¡€è®¾æ–½ï¼ˆå¦‚è·¯ç”±ã€ç½‘ç»œã€UI è§„èŒƒï¼‰è¯¥æ”¾åœ¨å“ªé‡Œï¼Ÿ</p>
<p>å¾ˆå¤šäººçš„ç¬¬ä¸€ååº”æ˜¯ï¼šâ€œæ‰”è¿› <code>Core</code> æˆ–è€… <code>Common</code> æ¨¡å—é‡Œã€‚â€
è¿™æ²¡é”™ï¼Œä½†æ€ä¹ˆâ€œæ‰”â€ï¼Œå†³å®šäº†ä½ çš„æ¶æ„æ˜¯<strong>åšå¦‚ç£çŸ³çš„åœ°åŸº</strong>ï¼Œè¿˜æ˜¯<strong>æ‘‡æ‘‡æ¬²å çš„åƒåœ¾å †</strong>ã€‚</p>
<hr>
<blockquote>
<p><strong>â€œCore æ¨¡å—çš„ç›®çš„ä¸æ˜¯ä¸ºäº†ä»£ç å¤ç”¨ï¼Œè€Œæ˜¯ä¸ºäº†åˆ¶å®šç‰©ç†å®šå¾‹ã€‚â€</strong></p>
</blockquote>
<p>åœ¨å¤§å¤šæ•°é¡¹ç›®ä¸­ï¼Œ<code>core</code> æˆ– <code>common</code> æ¨¡å—æœ€ç»ˆéƒ½ä¼šæ¼”å˜æˆä¸€ä¸ª <strong>God Module</strong>ï¼ˆä¸Šå¸æ¨¡å—ï¼‰ã€‚
è¿™é‡Œé¢å¡æ»¡äº† <code>StringUtils</code>ã€<code>DateUtils</code>ã€ç½‘ç»œè¯·æ±‚å°è£…ã€ç”šè‡³è¿˜æœ‰è«åå…¶å¦™çš„ <code>UserSession</code> ç®¡ç†ç±»ã€‚</p>
<p>è¿™ç§â€œåƒåœ¾å †å¼â€çš„ Core æ¨¡å—ä¼šå¯¼è‡´ä¸¤ä¸ªä¸¥é‡åæœï¼š</p>
<ol>
<li><strong>ä¿®æ”¹ææƒ§</strong>ï¼šä½ æ”¹äº†ä¸€ä¸ªå­—ç¬¦ä¸²æ ¼å¼åŒ–æ–¹æ³•ï¼Œç»“æœå¯¼è‡´ä¸‰ä¸ªå®Œå…¨æ— å…³çš„ä¸šåŠ¡æ¨¡å—å´©æºƒäº†ã€‚</li>
<li><strong>ä¾èµ–è‡ƒè‚¿</strong>ï¼šä½ æƒ³å†™ä¸€ä¸ªæç®€çš„ Featureï¼Œç»“æœä¸€å¼•å…¥ <code>core</code>ï¼Œå®ƒæŠŠ Retrofitã€Roomã€Glide å…¨å¸¦è¿›æ¥äº†ï¼Œå“ªæ€•ä½ æ ¹æœ¬ä¸éœ€è¦æ•°æ®åº“ã€‚</li>
</ol>
<p>åœ¨ Clean Architecture + Multi-Module çš„æ¶æ„ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°å®šä¹‰ Core çš„èŒè´£ã€‚</p>
<h2 id="ä¸€-core-çš„ä¸‰å¤§æˆ’å¾‹">ä¸€ã€ Core çš„ä¸‰å¤§æˆ’å¾‹</h2>
<p>è¦é˜²æ­¢ Core è…åŒ–ï¼Œå¿…é¡»éµå®ˆä¸‰æ¡æˆ’å¾‹ï¼š</p>
<ol>
<li><strong>æ— ä¸šåŠ¡ï¼ˆBusiness Freeï¼‰</strong>ï¼šCore é‡Œç»å¯¹ä¸èƒ½å‡ºç° <code>User</code>ã€<code>Order</code>ã€<code>Product</code> è¿™æ ·çš„è¯æ±‡ã€‚å®ƒåªèƒ½åŒ…å«è®¡ç®—æœºç§‘å­¦é¢†åŸŸçš„è¯æ±‡ï¼ˆå¦‚ <code>Network</code>ã€<code>Database</code>ã€<code>Screen</code>ã€<code>Theme</code>ï¼‰ã€‚</li>
<li><strong>æ— å†…éƒ¨ä¾èµ–ï¼ˆLeaf Nodeï¼‰</strong>ï¼šCore ä½äºæ¶æ„æœ€åº•å±‚ï¼Œå®ƒä¸èƒ½ä¾èµ–é¡¹ç›®å†…çš„ä»»ä½•å…¶ä»–æ¨¡å—ã€‚</li>
<li><strong>é«˜æŠ½è±¡ï¼ˆAbstractedï¼‰</strong>ï¼šCore å®šä¹‰çš„æ˜¯ <strong>â€œHowâ€</strong>ï¼ˆæ€ä¹ˆåšï¼‰ï¼Œè€Œä¸æ˜¯ <strong>â€œWhatâ€</strong>ï¼ˆåšä»€ä¹ˆï¼‰ã€‚</li>
</ol>
<p>Core å®é™…ä¸Šæ˜¯ä½ ä¸ºå…¬å¸å®šåˆ¶çš„ä¸€å¥— <strong>SDK</strong>ã€‚å°±åƒ Google æä¾›äº† Android SDKï¼Œä½ åŸºäºå®ƒå¼€å‘ Appï¼›ä½ çš„ Feature æ¨¡å—åŸºäºä½ çš„ Core SDK å¼€å‘ä¸šåŠ¡ã€‚</p>
<h2 id="äºŒ-é‡æ–°å®šä¹‰å¯¼èˆªscreen-å³çŠ¶æ€">äºŒã€ é‡æ–°å®šä¹‰å¯¼èˆªï¼šScreen å³çŠ¶æ€</h2>
<p>åœ¨ä¼ ç»Ÿçš„ Android å¼€å‘ä¸­ï¼Œå¯¼èˆªå¾€å¾€æ„å‘³ç€ <code>Intent</code> è·³è½¬æˆ–è€… Fragment Transactionï¼Œå……æ»¡äº†ç¡¬ç¼–ç çš„å­—ç¬¦ä¸²ï¼ˆå¦‚ <code>/user/detail?id=123</code>ï¼‰ã€‚</p>
<p>åœ¨æœ¬æ¶æ„ä¸­ï¼Œæˆ‘ä»¬å°†<strong>å¯¼èˆªæŠ½è±¡ä¸ºçŠ¶æ€</strong>ã€‚è¿™ä¸€æ­¥éå¸¸å…³é”®ï¼Œå®ƒå†³å®šäº†æˆ‘ä»¬åç»­ MVI çš„è·¯ç”±èƒ½å¦èµ°é€šã€‚</p>
<p>æˆ‘ä»¬åœ¨ <code>core/common/navigation/</code> ä¸‹å®šä¹‰åŸºç¡€è§„åˆ™ï¼š</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="kotlin"><code><span class="line"><span style="color:#6A737D">// file: core/common/navigation/Screen.kt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">/**</span></span>
<span class="line"><span style="color:#6A737D"> * æ‰€æœ‰é¡µé¢çš„åŸºç±»</span></span>
<span class="line"><span style="color:#6A737D"> * 1. @Serializable: æ”¯æŒåºåˆ—åŒ–ï¼Œä¸ºäº†æ”¯æŒ Nav3 çš„ Type-Safe è·¯ç”±ï¼Œä¹Ÿä¸ºäº†è¿›ç¨‹è¢«æ€åèƒ½æ¢å¤ã€‚</span></span>
<span class="line"><span style="color:#6A737D"> * 2. @Immutable: å‘Šè¯‰ Compose è¿™æ˜¯ä¸€ä¸ªç¨³å®šå¯¹è±¡ï¼Œä¼˜åŒ–é‡ç»„æ€§èƒ½ã€‚</span></span>
<span class="line"><span style="color:#6A737D"> */</span></span>
<span class="line"><span style="color:#B392F0">@Serializable</span></span>
<span class="line"><span style="color:#B392F0">@Immutable</span></span>
<span class="line"><span style="color:#F97583">sealed</span><span style="color:#F97583"> interface</span><span style="color:#B392F0"> Screen</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">/**</span></span>
<span class="line"><span style="color:#6A737D"> * æ ‡è®°æ¥å£ï¼šç”¨äº Feature å†…éƒ¨çš„å¯¼èˆªå›¾æ ¹èŠ‚ç‚¹</span></span>
<span class="line"><span style="color:#6A737D"> * ä¾‹å¦‚ User æ¨¡å—çš„æ‰€æœ‰é¡µé¢éƒ½å®ç° UserScreenRoot</span></span>
<span class="line"><span style="color:#6A737D"> */</span></span>
<span class="line"><span style="color:#B392F0">@Serializable</span></span>
<span class="line"><span style="color:#B392F0">@Immutable</span></span>
<span class="line"><span style="color:#F97583">sealed</span><span style="color:#F97583"> interface</span><span style="color:#B392F0"> FeatureGraphRoot</span><span style="color:#E1E4E8"> : </span><span style="color:#B392F0">Screen</span></span></code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡ï¼Ÿ</strong>
è¿™ç§è®¾è®¡æŠŠâ€œé¡µé¢è·³è½¬â€å˜æˆäº†ä¸€ä¸ª<strong>çº¯æ•°æ®ç»“æ„</strong>é—®é¢˜ã€‚</p>
<ul>
<li>æˆ‘è¦å»ç”¨æˆ·è¯¦æƒ…é¡µï¼Ÿä¸æ˜¯æ„é€ ä¸€ä¸ª Intentï¼Œè€Œæ˜¯å®ä¾‹åŒ–ä¸€ä¸ª Data Classï¼š<code>UserDetailScreen(id=100)</code>ã€‚</li>
<li>è¿™ä¸ªå¯¹è±¡æ˜¯ä¸å¯å˜çš„ã€å¯åºåˆ—åŒ–çš„ã€ç±»å‹å®‰å…¨çš„ã€‚</li>
</ul>
<p>è¿™å½»åº•æ¶ˆé™¤äº† <code>Bundle.getString("id")</code> å¸¦æ¥çš„ç±»å‹è½¬æ¢å¼‚å¸¸é£é™©ã€‚åœ¨ Core å±‚ï¼Œæˆ‘ä»¬åªå®šä¹‰â€œæœ‰ä¸€ä¸ªä¸œè¥¿å« Screenâ€ï¼Œè‡³äºå…·ä½“æœ‰å“ªäº› Screenï¼Œé‚£æ˜¯ Feature è‡ªå·±çš„äº‹ã€‚</p>
<h2 id="ä¸‰-router-å¿…é¡»æ˜¯æ¥å£">ä¸‰ã€ Router å¿…é¡»æ˜¯æ¥å£</h2>
<p>æ—¢ç„¶ Core ä¸çŸ¥é“å…·ä½“æœ‰å“ªäº›é¡µé¢ï¼Œé‚£ Feature å¦‚ä½•è·³è½¬å‘¢ï¼Ÿ</p>
<p>é€šå¸¸åšæ³•æ˜¯åœ¨ Core é‡Œå†™ä¸€ä¸ªè·¯ç”±è¡¨ï¼Œä½†è¿™è¿èƒŒäº†â€œæ— ä¸šåŠ¡â€åŸåˆ™ã€‚
æ­£ç¡®çš„åšæ³•æ˜¯ï¼š<strong>Core åªå®šä¹‰â€œè·³è½¬â€è¿™ä¸ªåŠ¨ä½œçš„æ¥å£</strong>ã€‚</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="kotlin"><code><span class="line"><span style="color:#6A737D">// file: core/common/navigation/Router.kt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">interface</span><span style="color:#B392F0"> Router</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">    fun</span><span style="color:#B392F0"> navigateTo</span><span style="color:#E1E4E8">(screen: </span><span style="color:#B392F0">Screen</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">    fun</span><span style="color:#B392F0"> popBack</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#6A737D">    // ... å…¶ä»–åŸºç¡€åŠ¨ä½œ</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>æ³¨æ„ï¼Œè¿™é‡Œ<strong>æ²¡æœ‰å®ç°</strong>ã€‚çœŸæ­£çš„å®ç°ï¼ˆæ˜¯ä½¿ç”¨ Jetpack Navigationï¼Œè¿˜æ˜¯ Voyagerï¼Œè¿˜æ˜¯ Activity è·³è½¬ï¼‰ç”± <code>app</code> å£³å·¥ç¨‹å†³å®šï¼Œå¹¶é€šè¿‡ DI æ³¨å…¥ç»™ Featureã€‚</p>
<p>è¿™å¸¦æ¥äº†å·¨å¤§çš„å¥½å¤„ï¼š<strong>Feature æ¨¡å—å½»åº•ä¸å¯¼èˆªæ¡†æ¶è§£è€¦</strong>ã€‚
ä½ åœ¨å†™ä¸šåŠ¡é€»è¾‘æ—¶ï¼ŒåªçŸ¥é“ <code>router.navigateTo(screen)</code>ã€‚å¦‚æœå“ªå¤© Google åºŸå¼ƒäº† Jetpack Navigationï¼Œä½ åªéœ€è¦é‡å†™ <code>app</code> æ¨¡å—é‡Œçš„ Router å®ç°ç±»ï¼Œæ‰€æœ‰ Feature ä»£ç <strong>ä¸€è¡Œéƒ½ä¸ç”¨æ”¹</strong>ã€‚</p>
<h2 id="å››-ui-ç³»ç»Ÿç»Ÿä¸€çš„è®¾è®¡è¯­è¨€">å››ã€ UI ç³»ç»Ÿï¼šç»Ÿä¸€çš„è®¾è®¡è¯­è¨€</h2>
<p>Core çš„å¦ä¸€ä¸ªé‡è¦èŒè´£æ˜¯æ‰¿è½½ <strong>Design System</strong>ã€‚</p>
<p>å¦‚æœ <code>feature:user</code> è‡ªå·±å†™äº†ä¸€å¥—é¢œè‰²ï¼Œ<code>feature:cart</code> è‡ªå·±å†™äº†ä¸€å¥— Typographyï¼ŒApp çœ‹èµ·æ¥å°±ä¼šåƒç¼åˆæ€ªã€‚</p>
<p>Core åº”è¯¥åŒ…å«ï¼š</p>
<ul>
<li><strong>Theme</strong>: <code>Color</code>, <code>Type</code>, <code>Shape</code> çš„ç»Ÿä¸€å®šä¹‰ã€‚</li>
<li><strong>Components</strong>: åªæœ‰<strong>é€šç”¨</strong>ç»„ä»¶èƒ½æ”¾è¿™é‡Œã€‚
<ul>
<li>âœ… <code>PrimaryButton</code>, <code>LoadingView</code>, <code>ErrorStateView</code></li>
<li>âŒ <code>UserAvatarView</code> (è¿™æ˜¯ä¸šåŠ¡ç»„ä»¶ï¼Œå“ªæ€•å¤ç”¨ç‡é«˜ï¼Œä¹Ÿä¸è¯¥åœ¨ Core)</li>
</ul>
</li>
</ul>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="kotlin"><code><span class="line"><span style="color:#6A737D">// file: core/common/ui/theme/Theme.kt</span></span>
<span class="line"><span style="color:#B392F0">@Composable</span></span>
<span class="line"><span style="color:#F97583">fun</span><span style="color:#B392F0"> AppTheme</span><span style="color:#E1E4E8">(content: </span><span style="color:#B392F0">@Composable</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">-></span><span style="color:#E1E4E8"> Unit) {</span></span>
<span class="line"><span style="color:#B392F0">    MaterialTheme</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#E1E4E8">        colorScheme </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> AppColors,</span></span>
<span class="line"><span style="color:#E1E4E8">        typography </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> AppTypography,</span></span>
<span class="line"><span style="color:#E1E4E8">        content </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> content</span></span>
<span class="line"><span style="color:#E1E4E8">    )</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>è¿™æ ·ï¼ŒFeature æ¨¡å—å¼€å‘ UI æ—¶ï¼Œåªéœ€è°ƒç”¨ <code>AppTheme</code> å’Œ <code>PrimaryButton</code>ï¼Œå°±èƒ½è‡ªåŠ¨å¯¹é½è®¾è®¡è§„èŒƒã€‚</p>
<h2 id="äº”-å·¥å…·ç±»utilsçš„é™·é˜±">äº”ã€ å·¥å…·ç±»ï¼ˆUtilsï¼‰çš„é™·é˜±</h2>
<p>Core é‡Œæœ€å±é™©çš„åœ°æ–¹å°±æ˜¯ <code>utils</code> åŒ…ã€‚</p>
<p><strong>ä»€ä¹ˆèƒ½æ”¾ï¼Ÿ</strong></p>
<ul>
<li>çº¯è®¡ç®—æœºé€»è¾‘ï¼š<code>DateFormatter</code>ï¼ˆå¦‚æœåªæ˜¯æ ¼å¼åŒ–æ—¶é—´æˆ³ï¼‰ã€<code>JsonUtils</code>ã€<code>FileUtils</code>ã€‚</li>
<li>Kotlin æ‰©å±•ï¼š<code>String.isValidEmail()</code>ã€‚</li>
</ul>
<p><strong>ä»€ä¹ˆä¸èƒ½æ”¾ï¼Ÿ</strong></p>
<ul>
<li>ä¸šåŠ¡ç›¸å…³é€»è¾‘ï¼š<code>PriceFormatter</code>ã€‚
<ul>
<li><em>é™·é˜±</em>ï¼šåˆšå¼€å§‹åªæ˜¯åŠ ä¸ª <code>$</code> ç¬¦å·ã€‚åæ¥è¦æ”¯æŒä¸åŒå›½å®¶è´§å¸ï¼Œå†åæ¥è¦æ”¯æŒ VIP ä»·æ ¼å˜è‰²ã€‚è¿™å±äº<strong>ä¸šåŠ¡é€»è¾‘</strong>ï¼Œåº”è¯¥æ”¾åœ¨ Feature æˆ–ç‰¹å®šçš„ Domain å±‚ï¼Œè€Œä¸æ˜¯ Coreã€‚</li>
</ul>
</li>
</ul>
<h2 id="å…­-æ€»ç»“">å…­ã€ æ€»ç»“</h2>
<p>è¯»å®Œè¿™ä¸€ç¯‡ï¼Œä½ åº”è¯¥å¯¹ Core æ¨¡å—æœ‰äº†æ–°çš„è®¤çŸ¥ï¼š</p>
<ol>
<li><strong>Core æ˜¯çº¦æŸ</strong>ï¼šå®ƒè§„å®šäº†æ‰€æœ‰ Feature å¿…é¡»ä½¿ç”¨ <code>Screen</code> æ¥å£å®šä¹‰é¡µé¢ï¼Œå¿…é¡»ä½¿ç”¨ <code>Router</code> æ¥å£è·³è½¬ã€‚</li>
<li><strong>Core æ˜¯åœ°åŸº</strong>ï¼šå®ƒæä¾›äº†è®¾è®¡ç³»ç»Ÿå’ŒåŸºç¡€å·¥å…·ï¼Œç¡®ä¿ä¸Šå±‚å»ºç­‘ï¼ˆFeatureï¼‰é£æ ¼ç»Ÿä¸€ã€‚</li>
<li><strong>Core ä¸æ‡‚ä¸šåŠ¡</strong>ï¼šå®ƒä¸çŸ¥é“ç”¨æˆ·æ˜¯è°ï¼Œä¸çŸ¥é“å•†å“å¤šå°‘é’±ã€‚</li>
</ol>
<p><strong>ç°åœ¨ï¼Œåœ°åŸºæ‰“å¥½äº†ã€‚</strong></p>
<p>æˆ‘ä»¬å®šä¹‰äº† <code>Screen</code> æ¥å£ï¼Œä½†å…·ä½“çš„ <code>UserListScreen</code> è°æ¥å®šä¹‰ï¼Ÿ
æˆ‘ä»¬å®šä¹‰äº† <code>Router</code> æ¥å£ï¼Œä½†è°æ¥è°ƒç”¨å®ƒï¼Ÿ</p>
<p>ä¸‹ä¸€ç¯‡ï¼Œæˆ‘ä»¬å°†è¿›å…¥çœŸæ­£çš„æˆ˜åœºâ€”â€”ä¸šåŠ¡æ¨¡å—ã€‚æˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•é€šè¿‡ <strong>API / Internal åˆ†ç¦»</strong> çš„è®¾è®¡ï¼Œè®© Feature æ—¢èƒ½åƒç§¯æœ¨ä¸€æ ·è¢«ç»„è£…ï¼Œåˆèƒ½ä¿å®ˆä½è‡ªå·±çš„ç§˜å¯†ã€‚</p>
<p><strong>ä¸‹ä¸€ç¯‡ï¼š<a href="/blog/ea305ecafca7/">ã€Šè®© Feature åƒç¬¬ä¸‰æ–¹åº“ä¸€æ ·è¢«ä½¿ç”¨ï¼šAPI / Internal çš„è¾¹ç•Œè®¾è®¡ã€‹</a></strong></p> </article><div class="tags"><div class="_tailmateTag_u5zwa_5"><a href="/blog/tag/è½¯ä»¶æ¶æ„/">è½¯ä»¶æ¶æ„</a></div><div class="_tailmateTag_u5zwa_5"><a href="/blog/tag/Android/">Android</a></div><div class="_tailmateTag_u5zwa_5"><a href="/blog/tag/Jetpack Compose/">Jetpack Compose</a></div><div class="_tailmateTag_u5zwa_5"><a href="/blog/tag/Kotlin/">Kotlin</a></div><div class="_tailmateTag_u5zwa_5"><a href="/blog/tag/æ€§èƒ½ä¼˜åŒ–/">æ€§èƒ½ä¼˜åŒ–</a></div><div class="_tailmateTag_u5zwa_5"><a href="/blog/tag/åç«¯è®¾è®¡/">åç«¯è®¾è®¡</a></div><div class="_tailmateTag_u5zwa_5"><a href="/blog/tag/JVM/">JVM</a></div></div></main></div><div class="okTgGW_footer"> <p>Supported and developed by&nbsp;
<a href="https://github.com/misakamayako/" target="_blank" rel="noreferrer">misaka mayako</a> </p> <p>
Tech with <a href="https://astro.build/" target="_blank" rel="noreferrer">astro</a>,&nbsp;
<a href="https://tailwindcss.com/" target="_blank" rel="noreferrer">tailwindcss</a>,&nbsp;
        and <a href="https://pm2.keymetrics.io/" target="_blank" rel="noreferrer">pm2</a>,&nbsp;
</p> <p> feed back via <a href="mailto:misakamayaco@qq.com" target="_blank" rel="noreferrer">ğŸ“«</a></p> <a rel="license noreferrer" href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" class="absolute right-6 bottom-6"> <img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" class="inlin-block border-0" src="/cc4.0.png"> </a> </div></div><script type="module" is:global>
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('pre').forEach((block) => {
                if (block.dataset.language === 'plaintext') return
                const button = document.createElement('button')
                button.innerText = 'å¤åˆ¶'
                button.className =
                    'absolute top-2 right-2 bg-slate-800 text-white px-2 py-1 rounded text-sm opacity-50 hover:opacity-100 transition cursor-pointer'
                button.addEventListener('click', () => {
                    const code = block.querySelector('code')
                    if (code) {
                        navigator.clipboard.writeText(code.innerText).then(() => {
                            button.innerText = 'å·²å¤åˆ¶ï¼'
                            setTimeout(() => (button.innerText = 'å¤åˆ¶'), 1000)
                        })
                    }
                })
                block.classList.add('relative')
                block.appendChild(button)
            })
        })
    </script> </body></html>