<!DOCTYPE html><html lang="zh-hans" class="h-full w-full m-0"> <head><meta charset="utf-8"><link rel="icon" type="image/jepg" href="/favicon.jpg"><meta name="viewport" content="width=device-width"><meta name="google-site-verification" content="-RgOsAO7rMTpJ8vNk8-ILdAA8VmiTEUc9HiUVVTKeEs"><meta name="generator" content="Astro v5.9.1"><title>âœ¨å¾¡å‚ç½‘ç»œ-å‰ç«¯æ•°æ®å‹ç¼©ä¸è§£å‹ç¼©å®è·µæŒ‡å—âœ¨</title><link rel="stylesheet" href="/_astro/index.jpoqI2TY.css">
<style>/*! tailwindcss v4.0.9 | MIT License | https://tailwindcss.com */
.okTgGW_footer{font-size:var(--text-sm,.875rem);line-height:var(--tw-leading,var(--text-sm--line-height,calc(1.25/.875)));color:var(--color-stone-400,#a6a09b);text-align:center;padding-block:calc(var(--spacing,.25rem)*4);border-top-color:var(--color-zinc-50,#fafafa);border-top-style:var(--tw-border-style);background-color:var(--color-slate-900,#0f172b);border-top-width:2px;width:100%}@supports (color:color(display-p3 0 0 0)){.okTgGW_footer{color:var(--color-stone-400,color(display-p3 .647628 .627105 .61098));border-top-color:var(--color-zinc-50,color(display-p3 .980256 .980256 .980256));background-color:var(--color-slate-900,color(display-p3 .0639692 .0891152 .163036))}}@supports (color:lab(0% 0 0)){.okTgGW_footer{color:var(--color-stone-400,lab(66.2166% 1.88047 3.20326));border-top-color:var(--color-zinc-50,lab(98.26% -.0000298023 0));background-color:var(--color-slate-900,lab(7.78673% 1.82345 -15.0537))}}.okTgGW_footer a{text-decoration-line:underline}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}
/*! tailwindcss v4.0.9 | MIT License | https://tailwindcss.com */
.q0UmqG_menu{height:calc(var(--spacing,.25rem)*16);padding-right:calc(var(--spacing,.25rem)*16);border-bottom-color:var(--color-zinc-50,#fafafa);border-bottom-style:var(--tw-border-style);text-align:right;border-bottom-width:2px}@supports (color:color(display-p3 0 0 0)){.q0UmqG_menu{border-bottom-color:var(--color-zinc-50,color(display-p3 .980256 .980256 .980256))}}@supports (color:lab(0% 0 0)){.q0UmqG_menu{border-bottom-color:var(--color-zinc-50,lab(98.26% -.0000298023 0))}}.q0UmqG_menu a{padding-inline:calc(var(--spacing,.25rem)*2);padding-block:calc(var(--spacing,.25rem)*2);font-size:var(--text-xl,1.25rem);line-height:var(--tw-leading,var(--text-xl--line-height,calc(1.75/1.25)));color:var(--color-zinc-50,#fafafa);margin-top:calc(var(--spacing,.25rem)*2.5);display:inline-block}@supports (color:color(display-p3 0 0 0)){.q0UmqG_menu a{color:var(--color-zinc-50,color(display-p3 .980256 .980256 .980256))}}@supports (color:lab(0% 0 0)){.q0UmqG_menu a{color:var(--color-zinc-50,lab(98.26% -.0000298023 0))}}@media (hover:hover){.q0UmqG_menu a:hover{--tw-translate-y:calc(var(--spacing,.25rem)*-.5);translate:var(--tw-translate-x)var(--tw-translate-y);color:var(--color-sky-500,#00a5ef)}@supports (color:color(display-p3 0 0 0)){.q0UmqG_menu a:hover{color:var(--color-sky-500,color(display-p3 .219113 .639027 .931479))}}@supports (color:lab(0% 0 0)){.q0UmqG_menu a:hover{color:var(--color-sky-500,lab(63.3038% -18.433 -51.0407))}}}.q0UmqG_menu a{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function,cubic-bezier(.4,0,.2,1)));transition-duration:var(--tw-duration,var(--default-transition-duration,.15s));transition-property:transform,translate,scale,rotate;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function,cubic-bezier(.4,0,.2,1)));transition-duration:var(--tw-duration,var(--default-transition-duration,.15s))}.q0UmqG_navLink{padding-inline:calc(var(--spacing,.25rem)*2);padding-block:calc(var(--spacing,.25rem)*2);font-size:var(--text-xl,1.25rem);line-height:var(--tw-leading,var(--text-xl--line-height,calc(1.75/1.25)));color:var(--color-zinc-50,#fafafa);margin-top:calc(var(--spacing,.25rem)*2.5);display:inline-block}@supports (color:color(display-p3 0 0 0)){.q0UmqG_navLink{color:var(--color-zinc-50,color(display-p3 .980256 .980256 .980256))}}@supports (color:lab(0% 0 0)){.q0UmqG_navLink{color:var(--color-zinc-50,lab(98.26% -.0000298023 0))}}@media (hover:hover){.q0UmqG_navLink:hover{color:var(--color-sky-500,#00a5ef)}@supports (color:color(display-p3 0 0 0)){.q0UmqG_navLink:hover{color:var(--color-sky-500,color(display-p3 .219113 .639027 .931479))}}@supports (color:lab(0% 0 0)){.q0UmqG_navLink:hover{color:var(--color-sky-500,lab(63.3038% -18.433 -51.0407))}}}.q0UmqG_navLink{transition:color .4s}.q0UmqG_avatar{float:right;border-radius:.25rem;display:inline-block;overflow:hidden}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-translate-x{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-y{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-z{syntax:"*";inherits:false;initial-value:0}
</style>
<link rel="stylesheet" href="/_astro/_slug_.D5CD64Zi.css"><script type="module" src="/_astro/page.V2R8AmkL.js"></script></head> <body class="w-full h-full flex flex-col">  <div class="bg-slate-800 h-screen flex flex-col"> <div class="bg-slate-700 w-full"> <div class="q0UmqG_avatar"> <img src="/favicon.jpg" width="64" height="64" alt=""> </div> <nav class="q0UmqG_menu"> <a href="/blog/" class="q0UmqG_navLink">blog</a> <a href="/dream-map/" class="inline-block">dream map</a> <a href="/album/" class="q0UmqG_navLink">album</a> <a href="/about-me/" class="q0UmqG_navLink">about me</a> </nav> </div> <div class="flex p-4 grow flex-row h-full overflow-hidden"> <aside class="w-1/4 ml-4 md:block min-w-[200px]"> <div class="sticky top-4 space-y-6"> <div class="bg-slate-700 p-4 rounded-lg"> <img src="/avatar.jpg" class="w-16 h-16 rounded-full mx-auto"> <p class="text-white text-center mt-2">ä½œè€…ï¼šmisakamayako</p>  <p class="text-white text-center mt-2">å‘å¸ƒæ—¶é—´ï¼š2024/08/26</p> </div> <div class="bg-slate-700 p-4 rounded-lg"> <h3 class="text-emerald-400 mb-2">ç®€ä»‹</h3> <p class="text-white font-light mb-2">è¯¦ç»†ä»‹ç»å‰ç«¯ç¯å¢ƒä¸­ä½¿ç”¨CompressionStream APIè¿›è¡Œæ–‡æœ¬æ•°æ®å‹ç¼©å’Œè§£å‹ç¼©çš„å®Œæ•´æ–¹æ¡ˆï¼ŒåŒ…æ‹¬é€‚ç”¨åœºæ™¯ã€ä»£ç å®ç°ã€æ³¨æ„äº‹é¡¹ä»¥åŠæµè§ˆå™¨å…¼å®¹æ€§è¦æ±‚ã€‚</p> </div> <!-- 2. æ–‡ç« ç›®å½• --> <!--<div class="bg-slate-700 p-4 rounded-lg">--> <!--    <h3 class="text-emerald-400 mb-2">æœ¬æ–‡ç›®å½•</h3>--> <!--    &lt;!&ndash;<TOC client:load /> &ndash;&gt;--> <!--</div>--> <!-- 3. çƒ­é—¨æ ‡ç­¾ --> <div class="bg-slate-700 p-4 rounded-lg"> <h3 class="text-emerald-400 mb-2">éšä¾¿çœ‹çœ‹</h3> <div class="flex flex-wrap gap-2"> <a class="px-3 py-1 bg-slate-600 rounded-full text-sm text-white hover:bg-emerald-500 transition" href="/blog/undefined/"> Web Worker ç±»å‹æ¦‚è§ˆ </a><a class="px-3 py-1 bg-slate-600 rounded-full text-sm text-white hover:bg-emerald-500 transition" href="/blog/undefined/"> Java VarHandle ä¸ Reflection çš„å¯¹æ¯”åŠæ€§èƒ½æµ‹è¯• </a><a class="px-3 py-1 bg-slate-600 rounded-full text-sm text-white hover:bg-emerald-500 transition" href="/blog/undefined/"> å¹½çµèŠ‚ç‚¹çš„åŸå› å’Œè§£å†³æ–¹æ¡ˆ </a> </div> </div> </div> </aside> <main class="grow h-full overflow-auto w-3/4 px-8"> <article class="text-white mb-2 prose lg:prose-xl prose-stone
                 prose-headings:text-white prose-strong:text-white prose-code:text-white
                 prose-a:text-violet-200 prose-blockquote:text-stone-100">  <header> <h1>å‰ç«¯æ•°æ®å‹ç¼©ä¸è§£å‹ç¼©å®è·µæŒ‡å—</h1> </header> <h2 id="1-é€‚ç”¨èŒƒå›´">1. é€‚ç”¨èŒƒå›´</h2>
<ol>
<li>å‹ç¼©å†…å®¹ç±»å‹ï¼š
<ul>
<li>é€‚ç”¨äºæ–‡æœ¬å†…å®¹æ–‡ä»¶ï¼Œå¦‚JSONã€XMLã€HTMLã€CSSã€JavaScriptç­‰text/*ç±»å‹çš„æ–‡ä»¶ã€‚è¿™ç±»æ–‡ä»¶é€šå¸¸å¯ä»¥é€šè¿‡å‹ç¼©æ˜¾è‘—å‡å°ä½“ç§¯ï¼Œä»è€Œæå‡ç½‘ç»œä¼ è¾“æ•ˆç‡ã€‚</li>
<li>å¯¹äºå›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰å·²ç»é«˜åº¦ä¼˜åŒ–å’Œå‹ç¼©çš„åª’ä½“æ–‡ä»¶ï¼Œgzipç­‰å¸¸è§å‹ç¼©ç®—æ³•é€šå¸¸æ— æ³•è¿›ä¸€æ­¥æœ‰æ•ˆå‹ç¼©ï¼Œç”šè‡³å¯èƒ½å¯¼è‡´æ–‡ä»¶ä½“ç§¯å¢å¤§ï¼Œå› æ­¤ä¸å»ºè®®å¯¹è¿™äº›æ–‡ä»¶è¿›è¡Œå‹ç¼©ã€‚</li>
</ul>
</li>
<li>åº”ç”¨åœºæ™¯ï¼š
<ul>
<li>ç½‘ç»œä¼ è¾“ï¼šåœ¨ç½‘ç»œè¯·æ±‚æˆ–å“åº”ä¸­ï¼Œé€šè¿‡å‹ç¼©æ–‡æœ¬æ–‡ä»¶å¯ä»¥æ˜¾è‘—å‡å°æ•°æ®åŒ…å¤§å°ï¼Œä»è€Œé™ä½ç½‘ç»œå¸¦å®½æ¶ˆè€—ï¼Œç¼©çŸ­ä¼ è¾“æ—¶é—´ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</li>
<li>æœ¬åœ°å­˜å‚¨ä¼˜åŒ–ï¼šå¯¹äºæŸäº›éœ€è¦é•¿æœŸå­˜å‚¨çš„å¤§é‡æ–‡æœ¬æ•°æ®ï¼Œé€šè¿‡å‹ç¼©å¯ä»¥æœ‰æ•ˆèŠ‚çœå­˜å‚¨ç©ºé—´ã€‚</li>
<li>å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨é—´çš„æ•°æ®äº¤æ¢ï¼šåœ¨å‰åç«¯ä¹‹é—´ä¼ è¾“å¤§é‡æ•°æ®æ—¶ï¼Œé€šè¿‡å‹ç¼©å¯ä»¥åŠ å¿«æ•°æ®ä¼ è¾“é€Ÿåº¦ï¼Œå°¤å…¶æ˜¯åœ¨ç½‘ç»œæ¡ä»¶ä¸ä½³æˆ–æ•°æ®é‡è¾ƒå¤§æ—¶ã€‚</li>
</ul>
</li>
<li>æŠ€æœ¯è¦æ±‚ï¼š
<ul>
<li>æµè§ˆå™¨ç¯å¢ƒï¼šéœ€è¦è¾ƒæ–°ç‰ˆæœ¬çš„æµè§ˆå™¨æ”¯æŒ CompressionStream å’Œ DecompressionStream APIã€‚ä»¥Google Chromeä¸ºä¾‹ï¼Œéœ€è¦80+ï¼Œå…·ä½“æµè§ˆå™¨æ”¯æŒæƒ…å†µå¯ä»¥åœ¨MDNæˆ–Can i use ä¸ŠæŸ¥æ‰¾ã€‚</li>
<li>Node.js ç¯å¢ƒï¼šå»ºè®®ä½¿ç”¨ Node.js v17 åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œç¡®ä¿å¯¹è¿™äº›æ–° API çš„è‰¯å¥½æ”¯æŒã€‚ä¸€äº›æ—©æœŸç‰ˆæœ¬å¯èƒ½éœ€è¦ä»<code>stream/web</code>åŒ…ä¸­å¯¼å…¥ã€‚</li>
</ul>
</li>
</ol>
<h2 id="2å‹ç¼©éƒ¨åˆ†ä»£ç å®ç°ä¸è§£é‡Š">2.å‹ç¼©éƒ¨åˆ†ä»£ç å®ç°ä¸è§£é‡Š</h2>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#F97583">async</span><span style="color:#F97583"> function</span><span style="color:#B392F0"> gzipFile</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">file</span><span style="color:#F97583">:</span><span style="color:#B392F0"> File</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">:</span><span style="color:#B392F0">Blob</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">    // åˆ›å»ºCompressionStreamå¯¹è±¡, ä½¿ç”¨gizpå‹ç¼©æ¨¡å¼</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> compressionStream</span><span style="color:#F97583"> =</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> CompressionStream</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'gzip'</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // å°†æ–‡ä»¶æµé€šè¿‡ç®¡é“ä¼ é€’åˆ°CompressionStream</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> compressedStream</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> file.</span><span style="color:#B392F0">stream</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">pipeThrough</span><span style="color:#E1E4E8">(compressionStream);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // è¯»å–å‹ç¼©åçš„æ•°æ®</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> compressedArray</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> [];</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> reader</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> compressedStream.</span><span style="color:#B392F0">getReader</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#F97583">    let</span><span style="color:#E1E4E8"> done</span><span style="color:#F97583">:</span><span style="color:#79B8FF">boolean</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">    let</span><span style="color:#E1E4E8"> value</span><span style="color:#F97583">:</span><span style="color:#B392F0">ArrayBuffer</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // è¯»å–å¹¶æ”¶é›†å‹ç¼©åçš„æ•°æ®</span></span>
<span class="line"><span style="color:#F97583">    while</span><span style="color:#E1E4E8"> ({ done, value } </span><span style="color:#F97583">=</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> reader.</span><span style="color:#B392F0">read</span><span style="color:#E1E4E8">(), </span><span style="color:#F97583">!</span><span style="color:#E1E4E8">done) {</span></span>
<span class="line"><span style="color:#E1E4E8">        compressedArray.</span><span style="color:#B392F0">push</span><span style="color:#E1E4E8">(value);</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // å°† ArrayBuffer åˆå¹¶æˆä¸€ä¸ª Blob å¯¹è±¡ï¼Œå¹¶è¿”å› </span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> Blob</span><span style="color:#E1E4E8">(compressedArray, { type: </span><span style="color:#9ECBFF">'application/gzip'</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h2 id="3-è§£å‹ç¼©ä»£ç å®ç°ä¸è§£é‡Š">3. è§£å‹ç¼©ä»£ç å®ç°ä¸è§£é‡Š</h2>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#F97583">async</span><span style="color:#F97583"> function</span><span style="color:#B392F0"> unGzipFile</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">arrayBuffer</span><span style="color:#F97583">:</span><span style="color:#B392F0"> ArrayBuffer</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">    // åˆ›å»ºä¸€ä¸ªå¯è¯»æµï¼Œç”¨äºå¤„ç†è¾“å…¥çš„ArrayBuffer</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> readableStream</span><span style="color:#F97583"> =</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> ReadableStream</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#B392F0">        start</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">controller</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#6A737D">            // å°†ArrayBufferè½¬æ¢ä¸ºUint8Arrayå¹¶åŠ å…¥æµä¸­</span></span>
<span class="line"><span style="color:#E1E4E8">            controller.</span><span style="color:#B392F0">enqueue</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#F97583">                new</span><span style="color:#B392F0"> Uint8Array</span><span style="color:#E1E4E8">(arrayBuffer),</span></span>
<span class="line"><span style="color:#E1E4E8">            );</span></span>
<span class="line"><span style="color:#6A737D">            // å…³é—­æµçš„è¾“å…¥</span></span>
<span class="line"><span style="color:#E1E4E8">            controller.</span><span style="color:#B392F0">close</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">        },</span></span>
<span class="line"><span style="color:#E1E4E8">    });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // åˆ›å»ºä¸€ä¸ªè§£å‹ç¼©æµï¼ŒæŒ‡å®šè§£å‹ç¼©ç®—æ³•ä¸ºgzip</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> decompressionStream</span><span style="color:#F97583"> =</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> DecompressionStream</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"gzip"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // å°†å¯è¯»æµé€šè¿‡è§£å‹ç¼©æµè¿›è¡Œè§£å‹ç¼©</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> decompressStream</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> readableStream.</span><span style="color:#B392F0">pipeThrough</span><span style="color:#E1E4E8">(decompressionStream);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // åˆ›å»ºä¸€ä¸ªæ–‡æœ¬è§£ç æµï¼Œå°†è§£å‹ç¼©åçš„æ•°æ®è½¬æ¢ä¸ºæ–‡æœ¬</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> textDecoderStream</span><span style="color:#F97583"> =</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> TextDecoderStream</span><span style="color:#E1E4E8">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // å°†è§£å‹ç¼©åçš„æµé€šè¿‡æ–‡æœ¬è§£ç æµè¿›è¡Œè§£ç </span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> decodedStream</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> decompressStream.</span><span style="color:#B392F0">pipeThrough</span><span style="color:#E1E4E8">(textDecoderStream);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // è·å–è§£ç åçš„æµçš„è¯»å–å™¨</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> reader</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> decodedStream.</span><span style="color:#B392F0">getReader</span><span style="color:#E1E4E8">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // ç”¨äºå­˜å‚¨è¯»å–çš„ç»“æœ</span></span>
<span class="line"><span style="color:#F97583">    let</span><span style="color:#E1E4E8"> done</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> boolean</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">    let</span><span style="color:#E1E4E8"> value</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#F97583"> |</span><span style="color:#79B8FF"> undefined</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">    let</span><span style="color:#E1E4E8"> result </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> ""</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // å¾ªç¯è¯»å–æµä¸­çš„æ•°æ®ï¼Œç›´åˆ°è¯»å–å®Œæˆ</span></span>
<span class="line"><span style="color:#F97583">    while</span><span style="color:#E1E4E8"> ((({ done, value } </span><span style="color:#F97583">=</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> reader.</span><span style="color:#B392F0">read</span><span style="color:#E1E4E8">()), </span><span style="color:#F97583">!</span><span style="color:#E1E4E8">done)) {</span></span>
<span class="line"><span style="color:#E1E4E8">        result </span><span style="color:#F97583">+=</span><span style="color:#E1E4E8"> value; </span><span style="color:#6A737D">// ç´¯åŠ è¯»å–åˆ°çš„æ–‡æœ¬æ•°æ®</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // è¿”å›è§£å‹ç¼©å¹¶è§£ç åçš„å­—ç¬¦ä¸²ç»“æœ</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> result;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h2 id="4-æ³¨æ„">4. æ³¨æ„</h2>
<ol>
<li>å¦‚æœå°†å‹ç¼©åçš„Blobä½œä¸ºæ–‡ä»¶ä½¿ç”¨ï¼Œéœ€è¦å°†æ–‡ä»¶åå‘½åä¸º<code>xx.&#x3C;åŸæ‰©å±•å>.gz</code>ï¼Œä¾‹å¦‚ï¼Œ<code>test.xml</code> å‹ç¼©åçš„æ–‡ä»¶ååº”ä¸º <code>test.xml.gz</code>ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿ç”¨æˆ·ä»¥åŠå…¶å®ƒç³»ç»Ÿèƒ½æ­£ç¡®è¯†åˆ«æ–‡ä»¶ç±»å‹å’Œæ‰©å±•åï¼›</li>
<li>å¤§æ–‡ä»¶çš„å‹ç¼©ä¸è§£å‹ç¼©é€šå¸¸è€—æ—¶è¾ƒé•¿ï¼Œåº”å½“åˆ›å»ºä¸€ä¸ªworkerå­çº¿ç¨‹ï¼Œå°†ä»»åŠ¡ç§»åŠ¨åˆ°å­çº¿ç¨‹æ‰§è¡Œï¼Œä¸è¦é˜»å¡ä¸»çº¿ç¨‹ï¼Œç‰¹åˆ«æ˜¯åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ï¼Œå› ä¸ºUIæ˜¯è¿è¡Œåœ¨ä¸»çº¿ç¨‹çš„ã€‚</li>
</ol>  </article> <div class="tags"> <div class="_tailmateTag_u5zwa_5"> <a href="/blog/tag/å‰ç«¯å¼€å‘/">å‰ç«¯å¼€å‘</a> </div><div class="_tailmateTag_u5zwa_5"> <a href="/blog/tag/æ•°æ®å‹ç¼©/">æ•°æ®å‹ç¼©</a> </div><div class="_tailmateTag_u5zwa_5"> <a href="/blog/tag/gzip/">gzip</a> </div><div class="_tailmateTag_u5zwa_5"> <a href="/blog/tag/æ€§èƒ½ä¼˜åŒ–/">æ€§èƒ½ä¼˜åŒ–</a> </div> </div> </main> </div> <div class="okTgGW_footer"> <p>Supported and developed by&nbsp;
<a href="https://github.com/misakamayako/" target="_blank" rel="noreferrer">misaka mayako</a> </p> <p>
Tech with <a href="https://astro.build/" target="_blank" rel="noreferrer">astro</a>,&nbsp;
<a href="https://tailwindcss.com/" target="_blank" rel="noreferrer">tailwindcss</a>,&nbsp;
        and <a href="https://pm2.keymetrics.io/" target="_blank" rel="noreferrer">pm2</a>,&nbsp;
</p> <p> feed back via <a href="mailto:misakamayaco@qq.com" target="_blank" rel="noreferrer">ğŸ“«</a></p> <a rel="license noreferrer" href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" class="absolute right-6 bottom-6"> <img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" class="inlin-block border-0" src="/cc4.0.png"> </a> </div> </div>  </body></html>