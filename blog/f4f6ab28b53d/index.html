<!DOCTYPE html><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha512-fHwaWebuwA7NSF5Qg/af4UeDx9XqUpYpOGgubo3yWu+b2IQR4UeQwbb42Ti7gVAjNtVoI/I9TEoYeu9omwcC6g==" crossorigin="anonymous"><html lang="zh-hans" class="h-full w-full m-0"> <head><meta charset="utf-8"><link rel="icon" type="image/jepg" href="/favicon.jpg"><meta name="viewport" content="width=device-width"><meta name="google-site-verification" content="-RgOsAO7rMTpJ8vNk8-ILdAA8VmiTEUc9HiUVVTKeEs"><meta name="generator" content="Astro v5.17.2"><title>âœ¨å¾¡å‚ç½‘ç»œ-Challengeâ€“Response èº«ä»½éªŒè¯æ¦‚è¿°âœ¨</title><link rel="stylesheet" href="/_astro/index.C6IHRFDG.css">
<style>/*! tailwindcss v4.1.18 | MIT License | https://tailwindcss.com */
@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-border-style:solid}}}.okTgGW_footer{font-size:var(--text-sm,.875rem);line-height:var(--tw-leading,var(--text-sm--line-height,calc(1.25/.875)));color:var(--color-stone-400,#a6a09b);text-align:center;padding-block:calc(var(--spacing,.25rem)*4);border-top-color:var(--color-zinc-50,#fafafa);border-top-style:var(--tw-border-style);background-color:var(--color-slate-900,#0f172b);border-top-width:2px;width:100%;position:relative}@supports (color:color(display-p3 0 0 0)){.okTgGW_footer{color:var(--color-stone-400,color(display-p3 .647628 .627105 .61098));border-top-color:var(--color-zinc-50,color(display-p3 .980256 .980256 .980256));background-color:var(--color-slate-900,color(display-p3 .0639692 .0891152 .163036))}}@supports (color:lab(0% 0 0)){.okTgGW_footer{color:var(--color-stone-400,lab(66.2166% 1.88044 3.20326));border-top-color:var(--color-zinc-50,lab(98.26% 0 0));background-color:var(--color-slate-900,lab(7.78673% 1.82345 -15.0537))}}.okTgGW_footer a{text-decoration-line:underline}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}
/*! tailwindcss v4.1.18 | MIT License | https://tailwindcss.com */
@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-border-style:solid;--tw-translate-x:0;--tw-translate-y:0;--tw-translate-z:0}}}.q0UmqG_menu{height:calc(var(--spacing,.25rem)*16);padding-right:calc(var(--spacing,.25rem)*16);border-bottom-color:var(--color-zinc-50,#fafafa);border-bottom-style:var(--tw-border-style);text-align:right;border-bottom-width:2px}@supports (color:color(display-p3 0 0 0)){.q0UmqG_menu{border-bottom-color:var(--color-zinc-50,color(display-p3 .980256 .980256 .980256))}}@supports (color:lab(0% 0 0)){.q0UmqG_menu{border-bottom-color:var(--color-zinc-50,lab(98.26% 0 0))}}.q0UmqG_menu a{padding-inline:calc(var(--spacing,.25rem)*2);padding-block:calc(var(--spacing,.25rem)*2);font-size:var(--text-xl,1.25rem);line-height:var(--tw-leading,var(--text-xl--line-height,calc(1.75/1.25)));color:var(--color-zinc-50,#fafafa);margin-top:calc(var(--spacing,.25rem)*2.5);display:inline-block}@supports (color:color(display-p3 0 0 0)){.q0UmqG_menu a{color:var(--color-zinc-50,color(display-p3 .980256 .980256 .980256))}}@supports (color:lab(0% 0 0)){.q0UmqG_menu a{color:var(--color-zinc-50,lab(98.26% 0 0))}}@media (hover:hover){.q0UmqG_menu a:hover{--tw-translate-y:calc(var(--spacing,.25rem)*-.5);translate:var(--tw-translate-x)var(--tw-translate-y);color:var(--color-sky-500,#00a5ef)}@supports (color:color(display-p3 0 0 0)){.q0UmqG_menu a:hover{color:var(--color-sky-500,color(display-p3 .219113 .639027 .931479))}}@supports (color:lab(0% 0 0)){.q0UmqG_menu a:hover{color:var(--color-sky-500,lab(63.3038% -18.433 -51.0407))}}}.q0UmqG_menu a{transition-property:transform,translate,scale,rotate;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function,cubic-bezier(.4,0,.2,1)));transition-duration:var(--tw-duration,var(--default-transition-duration,.15s))}.q0UmqG_navLink{padding-inline:calc(var(--spacing,.25rem)*2);padding-block:calc(var(--spacing,.25rem)*2);font-size:var(--text-xl,1.25rem);line-height:var(--tw-leading,var(--text-xl--line-height,calc(1.75/1.25)));color:var(--color-zinc-50,#fafafa);margin-top:calc(var(--spacing,.25rem)*2.5);display:inline-block}@supports (color:color(display-p3 0 0 0)){.q0UmqG_navLink{color:var(--color-zinc-50,color(display-p3 .980256 .980256 .980256))}}@supports (color:lab(0% 0 0)){.q0UmqG_navLink{color:var(--color-zinc-50,lab(98.26% 0 0))}}@media (hover:hover){.q0UmqG_navLink:hover{color:var(--color-sky-500,#00a5ef)}@supports (color:color(display-p3 0 0 0)){.q0UmqG_navLink:hover{color:var(--color-sky-500,color(display-p3 .219113 .639027 .931479))}}@supports (color:lab(0% 0 0)){.q0UmqG_navLink:hover{color:var(--color-sky-500,lab(63.3038% -18.433 -51.0407))}}}.q0UmqG_navLink{transition:color .4s}.q0UmqG_avatar{float:right;border-radius:.25rem;display:inline-block;overflow:hidden}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-translate-x{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-y{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-z{syntax:"*";inherits:false;initial-value:0}
</style>
<link rel="stylesheet" href="/_astro/_slug_.aUcrWOZv.css"><script type="module" src="/_astro/page.D1uwR3nK.js"></script></head> <body class="w-full h-full flex flex-col"> <div class="bg-slate-800 h-screen flex flex-col"><div class="bg-slate-700 w-full"> <div class="q0UmqG_avatar"> <img src="/favicon.jpg" width="64" height="64" alt=""> </div> <nav class="q0UmqG_menu"> <a href="/" class="q0UmqG_navLink">home</a> <a href="/blog/" class="q0UmqG_navLink">blog</a> <a href="/utils/" class="q0UmqG_navLink">utils</a> <a href="/dream-map/" class="inline-block">dream map</a> <a href="/album/" class="q0UmqG_navLink">album</a> <a href="/about-me/" class="q0UmqG_navLink">about me</a> </nav> </div><div class="flex p-4 grow flex-row h-full overflow-hidden"><aside class="w-1/4 ml-4 md:block min-w-[200px] overflow-auto pr-2"><div class="sticky top-4 space-y-6"><div class="bg-slate-700 p-4 rounded-lg"><img src="/avatar.jpg" class="w-16 h-16 rounded-full mx-auto"><p class="text-white text-center mt-2">ä½œè€…ï¼šmisakamayako</p><p class="text-white text-center mt-2">å‘å¸ƒæ—¶é—´ï¼š2025/10/13</p></div><div class="bg-slate-700 p-4 rounded-lg"><h3 class="text-emerald-400 mb-2">ç®€ä»‹</h3><p class="text-white font-light mb-2">æŒ‘æˆ˜-å“åº”æ˜¯ä¸€ç§å®‰å…¨çš„è®¤è¯åè®®ï¼Œé€šè¿‡åŠ¨æ€éšæœºæŒ‘æˆ˜å’Œå¯†ç å­¦è®¡ç®—éªŒè¯èº«ä»½ï¼Œé¿å…å¯†ç åœ¨ç½‘ç»œä¸­æ˜æ–‡ä¼ è¾“ã€‚æœåŠ¡å™¨ç”Ÿæˆä¸€æ¬¡æ€§éšæœºæ•°å‘é€ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯ä½¿ç”¨é¢„å…±äº«å¯†é’¥è®¡ç®—å¹¶è¿”å›å“åº”ï¼ŒæœåŠ¡å™¨éªŒè¯å“åº”ä»¥å®Œæˆè®¤è¯ã€‚è¯¥æœºåˆ¶èƒ½æœ‰æ•ˆé˜²æ­¢é‡æ”¾æ”»å‡»ï¼Œé€‚ç”¨äºç½‘ç»œè®¤è¯ã€APIå®‰å…¨ç­‰åœºæ™¯ï¼Œæ˜¯æ„å»ºé›¶ä¿¡ä»»æ¶æ„çš„é‡è¦åŸºç¡€ã€‚</p></div><!-- 2. å…³è”æ–‡ç«  --><!-- 3. éšæœºæ–‡ç«  --><div class="bg-slate-700 p-4 rounded-lg"><h3 class="text-emerald-400 mb-2">éšä¾¿çœ‹çœ‹</h3><div class="flex flex-wrap gap-2"><a class="px-3 py-1 bg-slate-600 rounded-full text-sm text-white hover:bg-emerald-500 transition" href="/blog/3a01f54a22b0/">é€šè¿‡ Kotlin åå°„è·å–å±æ€§æ³¨è§£å¹¶è¿›è¡Œæ ¡éªŒ</a><a class="px-3 py-1 bg-slate-600 rounded-full text-sm text-white hover:bg-emerald-500 transition" href="/blog/24a358bdbf05/">MVI åœ¨çœŸå®é¡¹ç›®ä¸­è¯¥æ€ä¹ˆè½åœ°ï¼šStateã€Intent ä¸ Effect çš„è¾¹ç•Œ</a><a class="px-3 py-1 bg-slate-600 rounded-full text-sm text-white hover:bg-emerald-500 transition" href="/blog/cb3ac2e417a0/">Java VarHandle ä¸ Reflection çš„å¯¹æ¯”åŠæ€§èƒ½æµ‹è¯•</a></div></div></div></aside><main class="grow h-full overflow-auto w-3/4 px-8"><article class="text-zinc-200 mb-2 prose lg:prose-xl prose-stone
                 prose-headings:text-current prose-strong:text-current prose-code:text-current
                 prose-a:text-violet-200 prose-blockquote:text-stone-100"> <header> <h1>Challengeâ€“Response èº«ä»½éªŒè¯æ¦‚è¿°</h1> </header> <p>Challengeâ€“Responseï¼ˆæŒ‘æˆ˜-å“åº”ï¼‰æ˜¯ä¸€ç±»è®¤è¯åè®®ï¼Œå…¶ä¸­éªŒè¯æ–¹ï¼ˆå¦‚æœåŠ¡å™¨ï¼‰å‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªéšæœºæŒ‘æˆ˜ï¼ˆnonceï¼‰ï¼Œå®¢æˆ·ç«¯å¿…é¡»åŸºäºäº‹å…ˆå…±äº«çš„ç§˜å¯†ï¼ˆå¦‚å¯†ç æˆ–å¯†é’¥ï¼‰è®¡ç®—å‡ºæ­£ç¡®çš„å“åº”æ‰èƒ½è¢«è®¤è¯ã€‚è¯¥è¿‡ç¨‹å¯åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>
<ul>
<li><strong>ç”ŸæˆæŒ‘æˆ˜</strong>ï¼šæœåŠ¡å™¨ä¸ºæ¯æ¬¡è®¤è¯ç”Ÿæˆä¸€ä¸ªä¸å¯é¢„æµ‹çš„éšæœºå€¼ï¼ˆnonceï¼‰ï¼Œå¹¶å‘é€ç»™å®¢æˆ·ç«¯ã€‚</li>
<li><strong>å®¢æˆ·ç«¯å“åº”</strong>ï¼šå®¢æˆ·ç«¯ä½¿ç”¨é¢„å…±äº«çš„ç§˜å¯†ï¼ˆå¦‚å¯†ç æˆ–å¯†é’¥ï¼‰å’Œè¯¥æŒ‘æˆ˜ï¼Œè¿ç”¨å“ˆå¸Œæˆ–ç­¾åç®—æ³•è®¡ç®—å“åº”å€¼ã€‚æ­¤è¿‡ç¨‹ä¸­ç§˜å¯†æœ¬èº«å¹¶æœªç›´æ¥ä¼ è¾“ã€‚</li>
<li><strong>éªŒè¯å“åº”</strong>ï¼šæœåŠ¡å™¨ä½¿ç”¨ç›¸åŒçš„ç®—æ³•å’ŒåŸå§‹æŒ‘æˆ˜å€¼è®¡ç®—é¢„æœŸå“åº”ï¼Œä¸å®¢æˆ·ç«¯æä¾›çš„å“åº”è¿›è¡Œæ¯”è¾ƒã€‚è‹¥åŒ¹é…åˆ™è®¤è¯é€šè¿‡ã€‚</li>
</ul>
<p>æŒ‘æˆ˜-å“åº”æœºåˆ¶çš„<strong>ä¼˜ç‚¹</strong>åŒ…æ‹¬ï¼šé¿å…ç›´æ¥åœ¨ç½‘ç»œä¸­å‘é€å¯†ç /å¯†é’¥ï¼Œåˆ©ç”¨åŠ å¯†å“ˆå¸Œç­‰å‡½æ•°ä¿æŠ¤å‡­è¯ï¼Œä¸”æ¯æ¬¡è®¤è¯ä½¿ç”¨ä¸åŒçš„éšæœºæŒ‘æˆ˜ï¼ˆnonceï¼‰æ¥é˜²æ­¢é‡æ”¾æ”»å‡»ã€‚éƒ¨åˆ†å®ç°è¿˜æ”¯æŒåŒå‘éªŒè¯ï¼Œå³æœåŠ¡å™¨ä¹Ÿå¯¹å®¢æˆ·ç«¯å‘èµ·æŒ‘æˆ˜ä»¥å¢å¼ºå®‰å…¨ã€‚è¯¥æ–¹æ¡ˆé€‚ç”¨äºç½‘ç»œè®¤è¯åè®®ï¼ˆå¦‚CHAPã€SCRAMï¼‰å’Œå¯†ç å­¦å¯†é’¥äº¤æ¢ç­‰åœºæ™¯ï¼Œèƒ½æœ‰æ•ˆé™ä½è¢«åŠ¨ç›‘å¬ç›—å–å‡­è¯çš„é£é™©ã€‚</p>
<h2 id="é˜²é‡æ”¾æ”»å‡»æœºåˆ¶ä¸å±€é™">é˜²é‡æ”¾æ”»å‡»æœºåˆ¶ä¸å±€é™</h2>
<p>æŒ‘æˆ˜-å“åº”é€šè¿‡<strong>ä¸€æ¬¡æ€§æŒ‘æˆ˜(nonce)</strong> é˜²æ­¢é‡æ”¾ï¼šæœåŠ¡å™¨ä¸ºæ¯æ¬¡è¯·æ±‚ç”Ÿæˆæ–°éšæœºå€¼ï¼Œç¡®ä¿è®°å½•åˆ°çš„è€å¯¹è¯ä¸å¯å¤ç”¨ã€‚æ­£å¦‚ä¸šç•Œæ‰€æŒ‡å‡ºçš„ï¼Œâ€œè‰¯å¥½çš„æŒ‘æˆ˜-å“åº”ç³»ç»Ÿä¼šä¸ºæ¯æ¬¡äº¤äº’ç”Ÿæˆæ–°çš„æŒ‘æˆ˜ï¼Œå¹¶ç¡®ä¿ä¹‹å‰çš„æŒ‘æˆ˜ä¸è¢«é‡ç”¨ï¼Œè¿™æ ·å½•åˆ¶åˆ°çš„é€šä¿¡æ— æ³•æ‹¼å‡‘æˆæ–°çš„æ¬ºè¯ˆè¯·æ±‚â€ã€‚å› æ­¤ï¼Œå³ä¾¿æ”»å‡»è€…æ‹¦æˆªäº†ä¹‹å‰çš„æŒ‘æˆ˜-å“åº”å¯¹ï¼Œä¹Ÿæ— æ³•ç”¨æ—§å“åº”å†’å……åˆæ³•å®¢æˆ·ç«¯ã€‚</p>
<p>ä¸è¿‡ï¼ŒæŒ‘æˆ˜-å“åº”é˜²é‡æ”¾ä¹Ÿæœ‰<strong>å±€é™</strong>ï¼š</p>
<ul>
<li><strong>æŒ‘æˆ˜å”¯ä¸€æ€§è¦æ±‚é«˜</strong>ï¼šå¦‚æœæœåŠ¡å™¨é”™è¯¯åœ°é‡ç”¨æŒ‘æˆ˜ï¼Œæˆ–æŒ‘æˆ˜æ¥æºå¯é¢„æµ‹ï¼Œå°±ä¼šè¢«æ”»å‡»è€…åˆ©ç”¨é‡æ”¾æ—§å“åº”ã€‚å› æ­¤ç³»ç»Ÿå¿…é¡»ä¸ºæ¯æ¬¡ä¼šè¯æˆ–æ¯ç¬”äº¤æ˜“ç”Ÿæˆå…¨æ–°çš„éšæœºæŒ‘æˆ˜ï¼Œå¹¶è·Ÿè¸ªå·²ä½¿ç”¨çš„æŒ‘æˆ˜ã€‚</li>
<li><strong>å‡­è¯æ³„éœ²é£é™©</strong>ï¼šæŒ‘æˆ˜-å“åº”è‡ªèº«ä¸è§£å†³å¯†é’¥æˆ–å¯†ç è¢«ç›—çš„é—®é¢˜ã€‚å¦‚æœæ”»å‡»è€…è·å¾—äº†ç”¨æˆ·çš„å¯†ç /å¯†é’¥ï¼Œå°±èƒ½ç”Ÿæˆåˆæ³•å“åº”ï¼Œç³»ç»Ÿæ— æ³•åˆ†è¾¨çœŸä¼ªã€‚æŒ‘æˆ˜-å“åº”å¯¹å‡­è¯æ³„éœ²æ— èƒ½ä¸ºåŠ›ï¼ŒæœåŠ¡å™¨æ— æ³•ç¡®å®šæä¾›å¯†ç çš„äººæ˜¯å¦çœŸçš„æ˜¯åˆæ³•ç”¨æˆ·ï¼›å¦‚æœå†’å……è€…ç»™å‡ºäº†æ­£ç¡®çš„å¯†ç ï¼Œç³»ç»Ÿä¹Ÿä¼šæˆäºˆè®¿é—®æƒé™ã€‚</li>
<li><strong>éœ€è¦å®‰å…¨é€šé“</strong>ï¼šæŒ‘æˆ˜-å“åº”ä¸å¯¹å‰©ä½™ä¼šè¯æ•°æ®æä¾›åŠ å¯†æˆ–å®Œæ•´æ€§ä¿éšœï¼Œå› æ­¤é€šå¸¸éœ€è¦é…åˆHTTPS/TLSä½¿ç”¨ï¼Œé˜²æ­¢ä¸­é—´äººç¯¡æ”¹æŒ‘æˆ˜æˆ–å“åº”å†…å®¹ã€‚</li>
<li><strong>æœåŠ¡å™¨çŠ¶æ€è·Ÿè¸ª</strong>ï¼šæœåŠ¡å™¨éœ€ç»´æŠ¤å·²å‘å‡ºçš„æŒ‘æˆ˜ï¼ˆå¦‚å†…å­˜ç¼“å­˜æˆ–æ•°æ®åº“ï¼‰ï¼Œä»¥éªŒè¯å“åº”å¹¶é˜²æ­¢é‡æ”¾ï¼Œè¿™å¢åŠ äº†å®ç°å¤æ‚åº¦ï¼›åŒæ—¶æ¯æ¬¡è®¤è¯éœ€è¦é¢å¤–çš„äº¤äº’å¾€è¿”ã€‚</li>
</ul>
<p>æ­¤å¤–ï¼Œä¸€äº›è®¤è¯æ–¹æ¡ˆåœ¨æŒ‘æˆ˜-å“åº”åŸºç¡€ä¸ŠåŠ å…¥æ—¶é—´æˆ³æˆ–éšæœºæ•°ã€‚ä¾‹å¦‚Oracle HMACæ–¹æ¡ˆè¦æ±‚è¯·æ±‚å¤´ä¸­åŒ…å«æ—¶é—´æˆ³ä¸”ä¸å½“å‰æ—¶é—´è¯¯å·®ä¸èƒ½è¶…è¿‡15åˆ†é’Ÿï¼Œç”¨ä»¥é˜²æ­¢é‡æ”¾ã€‚æ€»ä¹‹ï¼ŒæŒ‘æˆ˜-å“åº”é€šè¿‡<strong>åŠ¨æ€ä¸”ä¸å¯é‡ç”¨çš„æŒ‘æˆ˜</strong>æ¥é˜²é‡æ”¾ï¼Œä½†åªæœ‰åœ¨ä¸¥æ ¼è®¾è®¡å’Œå®‰å…¨å®ç°ä¸‹æ‰èƒ½æœ‰æ•ˆã€‚</p>
<h2 id="å¸¸è§è®¤è¯æ–¹å¼å¯¹æ¯”">å¸¸è§è®¤è¯æ–¹å¼å¯¹æ¯”</h2>
<p>ä¸‹è¡¨å¯¹æ¯”äº†æŒ‘æˆ˜-å“åº”ä¸å…¶ä»–å¸¸è§APIè®¤è¯æ–¹å¼çš„åŸºæœ¬åŸç†ã€é˜²é‡æ”¾æœºåˆ¶ã€ä¼˜ç¼ºç‚¹ç­‰ï¼š</p>









































<table><thead><tr><th>æ–¹æ³•</th><th>éªŒè¯åŸç†åŠé˜²é‡æ”¾æœºåˆ¶</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td><strong>Challengeâ€“Response</strong><br>ï¼ˆæŒ‘æˆ˜-å“åº”ï¼‰</td><td>éªŒè¯æœåŠ¡å™¨ä¸ºæ¯æ¬¡è¯·æ±‚ç”ŸæˆéšæœºæŒ‘æˆ˜ï¼Œå®¢æˆ·ç«¯ä½¿ç”¨é¢„å…±äº«å¯†ç /å¯†é’¥å¯¹æŒ‘æˆ˜è¿›è¡Œå“ˆå¸Œ/ç­¾ååè¿”å›å“åº”ã€‚ç”±äºæŒ‘æˆ˜å”¯ä¸€ï¼Œæ—§çš„æŒ‘æˆ˜/å“åº”æ— æ³•é‡ç”¨ã€‚</td><td>- å‡­è¯ä¸æ˜æ–‡ä¼ è¾“<br>- åŠ¨æ€æŒ‘æˆ˜é˜²æ­¢é‡æ”¾<br>- å¯æ”¯æŒåŒå‘è®¤è¯</td><td>- éœ€æœåŠ¡å™¨ä¿å­˜æŒ‘æˆ˜çŠ¶æ€ï¼Œå¢åŠ å®ç°å¤æ‚åº¦<br>- è‹¥ç§˜å¯†æ³„éœ²ä»ç„¶æ— æ³•é˜²å¾¡<br>- æ¯æ¬¡è®¤è¯éœ€é¢å¤–äº¤äº’å›åˆ</td></tr><tr><td><strong>JWTï¼ˆJSON Web Tokenï¼‰</strong></td><td>è®¤è¯åæœåŠ¡å™¨å‘æ”¾ç­¾åä»¤ç‰Œï¼ˆå¯åŒ…å«ç”¨æˆ·ä¿¡æ¯ï¼‰ï¼Œå®¢æˆ·ç«¯åç»­è¯·æ±‚æºå¸¦è¯¥ä»¤ç‰Œã€‚é‡æ”¾é˜²å¾¡ä¾èµ–ä»¤ç‰Œçš„æœ‰æ•ˆæœŸå’Œï¼ˆå¯é€‰çš„ï¼‰å”¯ä¸€IDï¼ˆjtiï¼‰ï¼›å¦åˆ™ä»¤ç‰Œåœ¨æœ‰æ•ˆæœŸå†…å¯è¢«é‡æ”¾ã€‚å¦‚æœ JWT åœ¨å…¶æœ‰æ•ˆæœŸå†…æœªè¢«æ’¤é”€ï¼Œæ”»å‡»è€…å¯ä»¥é‡æ”¾è¯¥ä»¤ç‰Œã€‚</td><td>- æ— çŠ¶æ€ï¼Œæ˜“æ‰©å±•<br>- è‡ªåŒ…å«ï¼Œå¯æºå¸¦ç”¨æˆ·æƒé™ç­‰ä¿¡æ¯</td><td>- ä¸èƒ½å³æ—¶æ’¤é”€ï¼ˆé™¤éç»´æŠ¤é»‘åå•ï¼‰<br>- ä»¤ç‰Œæ³„éœ²æˆ–ç­¾åå¼±æ˜“è¢«æ»¥ç”¨<br>- æœ‰æ•ˆæœŸå†…å¯èƒ½è¢«é‡æ”¾ï¼ˆéœ€ä½¿ç”¨ jti ç­‰æœºåˆ¶é˜²èŒƒï¼‰</td></tr><tr><td><strong>OAuth2</strong></td><td>ä½¿ç”¨æ ‡å‡†æˆæƒæµç¨‹ç”Ÿæˆè®¿é—®ä»¤ç‰Œï¼ˆBearer Tokenï¼‰ã€‚æœ¬èº«æ— æŒ‘æˆ˜-å“åº”æœºåˆ¶ï¼Œé€šå¸¸åœ¨ç¬¬ä¸€æ­¥æˆæƒæœåŠ¡è®¤è¯åå‘æ”¾ä»¤ç‰Œã€‚é˜²é‡æ”¾ä¾èµ–ä»¤ç‰Œç­–ç•¥ï¼ˆçŸ­æœŸè¿‡æœŸã€ç»‘å®šTLSç­‰ï¼‰ã€‚è‹¥ä¸ä½¿ç”¨åŠ å¼ºæªæ–½ï¼ˆå¦‚PKCEï¼‰ï¼Œä»¤ç‰Œæˆ–æˆæƒç è¢«çªƒå–åå¯é‡ç”¨ã€‚</td><td>- å¹¿æ³›æ ‡å‡†ï¼Œæ”¯æŒç¬¬ä¸‰æ–¹æˆæƒå’Œç»†ç²’åº¦æƒé™<br>- æµç¨‹çµæ´»ï¼Œæ”¯æŒå¤šç§åœºæ™¯ï¼ˆç¤¾äº¤ç™»å½•ã€OAuth2.0æˆæƒç æµç­‰ï¼‰</td><td>- å®ç°å¤æ‚åº¦é«˜ï¼Œéœ€HTTPSä¿éšœ<br>- é…ç½®å’Œéƒ¨ç½²å®¹æ˜“å‡ºé”™<br>- ä»¤ç‰Œè‹¥æ³„éœ²å¯èƒ½è¢«æ»¥ç”¨ï¼ˆéœ€è¦é¢å¤–æœºåˆ¶é˜²æŠ¤ï¼‰</td></tr><tr><td><strong>HMAC ç­¾åè®¤è¯</strong></td><td>å®¢æˆ·ç«¯å¯¹è¯·æ±‚å†…å®¹ï¼ˆåŒ…æ‹¬æ—¶é—´æˆ³ã€URIã€å‚æ•°ç­‰ï¼‰ä½¿ç”¨å…±äº«å¯†é’¥è¿›è¡Œ HMAC ç­¾åï¼ŒæœåŠ¡å™¨éªŒè¯ç­¾åã€‚å¯åœ¨è¯·æ±‚ä¸­åŠ å…¥æ—¶é—´æˆ³æˆ–ä¸€æ¬¡æ€§éšæœºä¸²æ¥é˜²æ­¢é‡æ”¾ã€‚Oracleç¤ºä¾‹è¦æ±‚æ—¶é—´æˆ³ä¸è¶…è¿‡15åˆ†é’Ÿï¼Œå¦åˆ™æ‹’ç»ï¼Œä»è€ŒæŠ‘åˆ¶é‡æ”¾ã€‚</td><td>- è½»é‡å¿«é€Ÿï¼Œæ— éœ€æœåŠ¡ç«¯ä¼šè¯<br>- ä¸ç›´æ¥ä¼ è¾“æ•æ„Ÿä¿¡æ¯ï¼Œåªä¼ ç­¾åç»“æœ</td><td>- éœ€ä¿æŠ¤å…±äº«å¯†é’¥ï¼Œä¸€æ—¦æ³„éœ²é£é™©æé«˜<br>- æ—¶é—´çª—å£å†…å¯èƒ½é‡æ”¾ï¼Œéœ€è¦ä¸¥æ ¼æ—¶é—´æ£€æŸ¥<br>- ç¼ºå°‘æ ‡å‡†æ’¤é”€æœºåˆ¶</td></tr><tr><td><strong>Mutual TLSï¼ˆåŒå‘TLSï¼‰</strong></td><td>å®¢æˆ·ç«¯æŒæœ‰æ•°å­—è¯ä¹¦ï¼Œåœ¨ TLS æ¡æ‰‹é˜¶æ®µè¿›è¡ŒåŒå‘è¯ä¹¦äº¤æ¢éªŒè¯ã€‚æ¡æ‰‹è¿‡ç¨‹ä¸­åŒæ–¹ä½¿ç”¨éšæœºæ•°ç”Ÿæˆä¼šè¯å¯†é’¥ï¼Œå› æ­¤æ¯æ¬¡è¿æ¥éƒ½ä½¿ç”¨æ–°éšæœºæ•°ï¼Œå¯å¤©ç„¶é˜²æ­¢ç®€å•é‡æ”¾ã€‚</td><td>- å¼ºèº«ä»½éªŒè¯ï¼ˆåŸºäºè¯ä¹¦ï¼‰ï¼Œæ— éœ€é¢å¤–å‘é€å¯†ç <br>- é€šä¿¡å…¨ç¨‹åŠ å¯†ï¼Œä¸æ˜“è¢«çªƒå¬æˆ–ç¯¡æ”¹</td><td>- è¯ä¹¦ç®¡ç†å¤æ‚ï¼Œéœ€è¦ PKI åŸºç¡€è®¾æ–½<br>- æµè§ˆå™¨è·¨åŸŸæ”¯æŒæœ‰é™ï¼Œä¸é€‚åˆçº¯å…¬å…±APIï¼ˆé€šå¸¸ç”¨äºä¼ä¸šå†…éƒ¨æœåŠ¡ï¼‰</td></tr></tbody></table>
<h2 id="ç°ä»£æ›¿ä»£æ–¹æ¡ˆ">ç°ä»£æ›¿ä»£æ–¹æ¡ˆ</h2>
<p>è¿‘å¹´æ¥å‡ºç°äº†æ›´ç°ä»£åŒ–çš„è®¤è¯æ–¹æ¡ˆï¼Œå¯ä»¥åœ¨å®‰å…¨æ€§å’Œç”¨æˆ·ä½“éªŒä¸Šä¼˜äºä¼ ç»ŸæŒ‘æˆ˜-å“åº”ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li><strong>OAuth2 + PKCE (Proof Key for Code Exchange)</strong>ï¼šè¿™æ˜¯ä¸€ç§OAuth2æˆæƒç æµç¨‹çš„å¢å¼ºæ–¹æ¡ˆï¼Œç‰¹åˆ«é€‚ç”¨äºæ²¡æœ‰å®¢æˆ·ç«¯å¯†é’¥ï¼ˆå¦‚SPAæˆ–ç§»åŠ¨åº”ç”¨ï¼‰çš„åœºæ™¯ã€‚PKCE åœ¨æˆæƒè¯·æ±‚æ—¶ç”Ÿæˆä¸€ä¸ªéšæœº <code>code_verifier</code>ï¼Œå¹¶å‘é€å…¶å“ˆå¸Œï¼ˆ<code>code_challenge</code>ï¼‰ã€‚å½“å®¢æˆ·ç«¯ç”¨æˆæƒç æ¢å–ä»¤ç‰Œæ—¶å¿…é¡»æä¾›åŸå§‹çš„ <code>code_verifier</code>ï¼›æœåŠ¡å™¨æ¯”å¯¹å…¶å“ˆå¸Œå€¼ï¼Œä»¥ç¡®è®¤æˆæƒç æœªè¢«æˆªè·ã€‚è¿™æ ·ï¼Œå³ä½¿æ”»å‡»è€…æˆªè·äº†æˆæƒç ï¼Œä¹Ÿæ— æ³•æ¢å–ä»¤ç‰Œï¼Œå› ä¸ºä¸çŸ¥é“ <code>code_verifier</code>ã€‚PKCE æ˜¯ OAuth2 çš„æ‰©å±•ï¼Œç”¨äºé˜²æ­¢æˆæƒç æ‹¦æˆªæ”»å‡»ï¼Œç¼ºå°‘ <code>code_verifier</code> çš„æ¶æ„åº”ç”¨ä¸èƒ½ç”¨çªƒå–çš„æˆæƒç æ¢å–ä»¤ç‰Œã€‚</li>
<li><strong>WebAuthn / FIDO2</strong>ï¼šWebAuthn æ˜¯W3Cå’ŒFIDOè”ç›Ÿæ¨å‡ºçš„ç½‘ç»œè®¤è¯æ ‡å‡†ï¼Œå¯å®ç°å¯†ç æ— å…³çš„ç™»å½•æ–¹å¼ã€‚å®ƒåˆ©ç”¨ç”¨æˆ·è®¾å¤‡ï¼ˆå¦‚æ‰‹æœºã€ç¡¬ä»¶å¯†é’¥æˆ–æŒ‡çº¹ä¼ æ„Ÿå™¨ï¼‰ç”Ÿæˆä¸€å¯¹å…¬ç§é’¥ï¼Œå…¬é’¥æ³¨å†Œåˆ°æœåŠ¡å™¨ã€‚ä¹‹åç™»å½•æ—¶ï¼ŒæœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€æŒ‘æˆ˜ï¼Œå®¢æˆ·ç«¯ç”¨ç§é’¥ç­¾åå¹¶è¿”å›ã€‚ç”±äºç§é’¥å§‹ç»ˆä¿ç•™åœ¨è®¾å¤‡ä¸Šï¼Œä¸ä¼šä¼ è¾“ï¼Œæ”»å‡»è€…æ— æ³•çªƒå–ï¼›å¹¶ä¸”å¯†é’¥å¯¹é€šå¸¸å—ç¡¬ä»¶å®‰å…¨æ¨¡å—ä¿æŠ¤ï¼Œæéš¾è¢«ç ´è§£ã€‚WebAuthn ç”¨åŠ å¯†æ–¹æ³•å–ä»£ä¼ ç»Ÿå¯†ç ï¼Œå¹¶ä¸”**â€œæ¶ˆé™¤äº†å¯èƒ½è¢«çªƒå–æˆ–é’“é±¼çš„å…±äº«ç§˜å¯†â€**ã€‚æ¢å¥è¯è¯´ï¼ŒWebAuthn è®¤è¯ä¸­ä¸å­˜åœ¨éœ€è¦åœ¨æœåŠ¡ç«¯é‡å¤ä½¿ç”¨æˆ–æ³„éœ²çš„å¯†ç ï¼Œå®‰å…¨æ€§æ˜¾è‘—æé«˜ã€‚</li>
<li><strong>å…¶ä»–æ–¹æ¡ˆ</strong>ï¼šè¿˜æœ‰ä¸€äº›å…¶ä»–ç°ä»£æŠ€æœ¯å¯è§†éœ€æ±‚é‡‡ç”¨ã€‚ä¾‹å¦‚ä½¿ç”¨ JWT çš„æ›¿ä»£å“ PASETOï¼ˆæ›´å®‰å…¨çš„å£°æ˜ä»¤ç‰Œæ ¼å¼ï¼‰ã€å¤šå› ç´ è®¤è¯ï¼ˆå¦‚ä¸€æ¬¡æ€§å¯†ç OTPï¼‰ã€ç¡¬ä»¶å®‰å…¨æ¨¡å—(HSM)é›†æˆã€ç”šè‡³é›¶ä¿¡ä»»æ¶æ„ä¸‹çš„åŠ¨æ€ä¼šè¯å¯†é’¥ç­‰ã€‚å¯¹äºæµè§ˆå™¨åº”ç”¨ï¼Œä¹Ÿå¯è€ƒè™‘ç»“åˆ OpenID Connect æ¥åŒæ—¶è·å–èº«ä»½ä¿¡æ¯å’Œæˆæƒï¼ŒåŒæ—¶é…åˆ PKCE ä½¿ç”¨ä»¥å¢åŠ å®‰å…¨æ€§ã€‚</li>
</ul>
<p>ç»¼ä¸Šï¼ŒWebAuthnã€OAuth2+PKCE ç­‰æ–¹æ¡ˆåœ¨å®‰å…¨æ€§æˆ–ç”¨æˆ·ä½“éªŒä¸Šä¼˜äºä¼ ç»ŸæŒ‘æˆ˜-å“åº”ï¼šå‰è€…åŸºäºå…¬é’¥ä½“ç³»æ‘’å¼ƒäº†å¯†ç å‡­è¯ï¼Œåè€…åœ¨OAuthæµç¨‹ä¸­åŠ å…¥é˜²çªƒå–æªæ–½ã€‚æ ¹æ®å…·ä½“åº”ç”¨åœºæ™¯ï¼Œé€‰æ‹©åˆé€‚çš„ç°ä»£è®¤è¯æ–¹å¼èƒ½è¿›ä¸€æ­¥æŠµå¾¡é’“é±¼ã€å‡­è¯é‡æ”¾ç­‰å¨èƒã€‚</p>
<h2 id="å‰ç«¯ç¤ºä¾‹vanilla-typescript-å®ç°æŒ‘æˆ˜-å“åº”">å‰ç«¯ç¤ºä¾‹ï¼šVanilla TypeScript å®ç°æŒ‘æˆ˜-å“åº”</h2>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€åŒ–çš„å‰ç«¯æµç¨‹ç¤ºä¾‹ï¼Œä½¿ç”¨çº¯ TypeScript é€šè¿‡ Fetch è°ƒç”¨ API è·å–æŒ‘æˆ˜å¹¶æäº¤å“åº”ï¼ˆä½¿ç”¨ Web Crypto API è¿›è¡Œ SHA-256 å’Œ HMAC è¿ç®—ï¼‰ï¼š</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#6A737D">// å‡è®¾ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åå’Œå¯†ç å·²è·å–</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> username</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "alice"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> password</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "ç”¨æˆ·è¾“å…¥çš„å¯†ç "</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// ç¬¬ä¸€æ­¥ï¼šå‘æœåŠ¡å™¨è¯·æ±‚æŒ‘æˆ˜</span></span>
<span class="line"><span style="color:#B392F0">fetch</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">`https://api.example.com/auth/challenge?username=${</span><span style="color:#B392F0">encodeURIComponent</span><span style="color:#9ECBFF">(</span><span style="color:#E1E4E8">username</span><span style="color:#9ECBFF">)</span><span style="color:#9ECBFF">}`</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">  .</span><span style="color:#B392F0">then</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">res</span><span style="color:#F97583"> =></span><span style="color:#E1E4E8"> res.</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">())</span></span>
<span class="line"><span style="color:#E1E4E8">  .</span><span style="color:#B392F0">then</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">async</span><span style="color:#FFAB70"> data</span><span style="color:#F97583"> =></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> challenge</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> data.challenge; </span><span style="color:#6A737D">// æœåŠ¡å™¨è¿”å›çš„éšæœºæŒ‘æˆ˜ï¼ˆå¦‚ Base64/Hex å­—ç¬¦ä¸²ï¼‰</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> salt</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> data.salt;         </span><span style="color:#6A737D">// æœåŠ¡å™¨è¿”å›çš„ç”¨æˆ·ç›å€¼ï¼ˆå¯é€‰ï¼Œç”¨äºå¯†ç åŠ ç›ï¼‰</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // ç”Ÿæˆå“ˆå¸Œå¯†ç ï¼šhash = SHA256(password + salt)</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> enc</span><span style="color:#F97583"> =</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> TextEncoder</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> passBytes</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> enc.</span><span style="color:#B392F0">encode</span><span style="color:#E1E4E8">(password </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> salt);</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> hashBuffer</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> crypto.subtle.</span><span style="color:#B392F0">digest</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"SHA-256"</span><span style="color:#E1E4E8">, passBytes);</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> hashArray</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> Array.</span><span style="color:#B392F0">from</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">new</span><span style="color:#B392F0"> Uint8Array</span><span style="color:#E1E4E8">(hashBuffer));</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> hashHex</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> hashArray.</span><span style="color:#B392F0">map</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">b</span><span style="color:#F97583"> =></span><span style="color:#E1E4E8"> b.</span><span style="color:#B392F0">toString</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">16</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">padStart</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">2</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'0'</span><span style="color:#E1E4E8">)).</span><span style="color:#B392F0">join</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">''</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // å¯¼å…¥å“ˆå¸Œä½œä¸º HMAC å¯†é’¥</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> keyData</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> enc.</span><span style="color:#B392F0">encode</span><span style="color:#E1E4E8">(hashHex);</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> cryptoKey</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> crypto.subtle.</span><span style="color:#B392F0">importKey</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#9ECBFF">      "raw"</span><span style="color:#E1E4E8">, keyData, { name: </span><span style="color:#9ECBFF">"HMAC"</span><span style="color:#E1E4E8">, hash: </span><span style="color:#9ECBFF">"SHA-256"</span><span style="color:#E1E4E8"> },</span></span>
<span class="line"><span style="color:#79B8FF">      false</span><span style="color:#E1E4E8">, [</span><span style="color:#9ECBFF">"sign"</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#E1E4E8">    );</span></span>
<span class="line"><span style="color:#6A737D">    // è®¡ç®— HMAC = HMAC_SHA256(key=hashHex, message=challenge)</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> signatureBuffer</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> crypto.subtle.</span><span style="color:#B392F0">sign</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"HMAC"</span><span style="color:#E1E4E8">, cryptoKey, enc.</span><span style="color:#B392F0">encode</span><span style="color:#E1E4E8">(challenge));</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> sigArray</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> Array.</span><span style="color:#B392F0">from</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">new</span><span style="color:#B392F0"> Uint8Array</span><span style="color:#E1E4E8">(signatureBuffer));</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> responseHex</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> sigArray.</span><span style="color:#B392F0">map</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">b</span><span style="color:#F97583"> =></span><span style="color:#E1E4E8"> b.</span><span style="color:#B392F0">toString</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">16</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">padStart</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">2</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'0'</span><span style="color:#E1E4E8">)).</span><span style="color:#B392F0">join</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">''</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // ç¬¬äºŒæ­¥ï¼šæäº¤ç”¨æˆ·åå’Œå“åº”åˆ°æœåŠ¡å™¨</span></span>
<span class="line"><span style="color:#B392F0">    fetch</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"https://api.example.com/auth/verify"</span><span style="color:#E1E4E8">, {</span></span>
<span class="line"><span style="color:#E1E4E8">      method: </span><span style="color:#9ECBFF">"POST"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">      headers: { </span><span style="color:#9ECBFF">"Content-Type"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"application/json"</span><span style="color:#E1E4E8"> },</span></span>
<span class="line"><span style="color:#E1E4E8">      body: </span><span style="color:#79B8FF">JSON</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">stringify</span><span style="color:#E1E4E8">({ username, response: responseHex })</span></span>
<span class="line"><span style="color:#E1E4E8">    })</span></span>
<span class="line"><span style="color:#E1E4E8">    .</span><span style="color:#B392F0">then</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">res</span><span style="color:#F97583"> =></span><span style="color:#E1E4E8"> res.</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">())</span></span>
<span class="line"><span style="color:#E1E4E8">    .</span><span style="color:#B392F0">then</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">result</span><span style="color:#F97583"> =></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">      if</span><span style="color:#E1E4E8"> (result.authenticated) {</span></span>
<span class="line"><span style="color:#E1E4E8">        console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"è®¤è¯æˆåŠŸ"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#6A737D">        // å¤„ç†åç»­é€»è¾‘ï¼ˆå¦‚è·³è½¬æˆ–å­˜å‚¨ tokenï¼‰</span></span>
<span class="line"><span style="color:#E1E4E8">      } </span><span style="color:#F97583">else</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">        console.</span><span style="color:#B392F0">error</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"è®¤è¯å¤±è´¥"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">      }</span></span>
<span class="line"><span style="color:#E1E4E8">    });</span></span>
<span class="line"><span style="color:#E1E4E8">  })</span></span>
<span class="line"><span style="color:#E1E4E8">  .</span><span style="color:#B392F0">catch</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">err</span><span style="color:#F97583"> =></span><span style="color:#E1E4E8"> console.</span><span style="color:#B392F0">error</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"è¯·æ±‚å‡ºé”™:"</span><span style="color:#E1E4E8">, err));</span></span></code></pre>
<p>æ­¤ç¤ºä¾‹ä¸­ï¼šå®¢æˆ·ç«¯å…ˆä»¥GETæ–¹å¼æ ¹æ®ç”¨æˆ·åè¯·æ±‚æœåŠ¡å™¨è¿”å›æŒ‘æˆ˜(<code>challenge</code>)å’Œç”¨æˆ·çš„<code>salt</code>ï¼ˆç”¨äºåŠ ç›å¯†ç å“ˆå¸Œï¼‰ã€‚ç„¶åä½¿ç”¨ Web Crypto API è®¡ç®— <code>password+salt</code> çš„ SHA-256 å“ˆå¸Œï¼Œå¹¶å°†å…¶ä½œä¸º HMAC-SHA256 çš„å¯†é’¥å¯¹æŒ‘æˆ˜è¿›è¡Œç­¾åã€‚æœ€åä»¥POSTæ–¹å¼æäº¤ <code>{username, response}</code> åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨éªŒè¯ç­¾åæ­£ç¡®åå³è®¤ä¸ºèº«ä»½åˆæ³•ã€‚å®é™…åº”ç”¨ä¸­åº”é€šè¿‡ HTTPS è¿›è¡Œé€šä¿¡ï¼Œå¹¶åœ¨æœåŠ¡å™¨ç«¯ä¸ºæ¯ä¸ªç”¨æˆ·åç»´æŠ¤ç‹¬ç«‹çš„æŒ‘æˆ˜å€¼ã€‚</p>
<h2 id="åç«¯ç¤ºä¾‹spring-boot--kotlin-å®ç°æŒ‘æˆ˜-å“åº”">åç«¯ç¤ºä¾‹ï¼šSpring Boot + Kotlin å®ç°æŒ‘æˆ˜-å“åº”</h2>
<p>ä¸‹é¢æ˜¯åŸºäº Spring Boot å’Œ Kotlin çš„åç«¯ç¤ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•ç”ŸæˆæŒ‘æˆ˜ã€éªŒè¯å“åº”å¹¶æ£€æŸ¥ç”¨æˆ·èº«ä»½ï¼ˆå‡è®¾ç”¨æˆ·ä¿¡æ¯ä¿å­˜åœ¨æ•°æ®åº“ä¸­ï¼‰ã€‚</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="kotlin"><code><span class="line"><span style="color:#6A737D">// æ•°æ®åº“ä¸­çš„ç”¨æˆ·å®ä½“ç¤ºä¾‹</span></span>
<span class="line"><span style="color:#B392F0">@Entity</span></span>
<span class="line"><span style="color:#F97583">data</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> User</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#B392F0">    @Id</span><span style="color:#F97583"> val</span><span style="color:#E1E4E8"> username: </span><span style="color:#B392F0">String</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#F97583">    val</span><span style="color:#E1E4E8"> passwordHash: </span><span style="color:#B392F0">String</span><span style="color:#E1E4E8">,  </span><span style="color:#6A737D">// ä¾‹å¦‚ SHA-256(å¯†ç +salt) çš„åå…­è¿›åˆ¶å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#F97583">    val</span><span style="color:#E1E4E8"> salt: </span><span style="color:#B392F0">String</span></span>
<span class="line"><span style="color:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// ç”¨æˆ·ä»“åº“</span></span>
<span class="line"><span style="color:#F97583">interface</span><span style="color:#B392F0"> UserRepository</span><span style="color:#E1E4E8"> : </span><span style="color:#B392F0">JpaRepository</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">User</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">String</span><span style="color:#E1E4E8">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// è¯·æ±‚è®¤è¯çš„ JSON è½½ä½“</span></span>
<span class="line"><span style="color:#F97583">data</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> AuthRequest</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">val</span><span style="color:#E1E4E8"> username: </span><span style="color:#B392F0">String</span><span style="color:#E1E4E8">, </span><span style="color:#F97583">val</span><span style="color:#E1E4E8"> response: </span><span style="color:#B392F0">String</span><span style="color:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">@RestController</span></span>
<span class="line"><span style="color:#B392F0">@CrossOrigin</span><span style="color:#E1E4E8">(origins </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> [</span><span style="color:#9ECBFF">"*"</span><span style="color:#E1E4E8">])  </span><span style="color:#6A737D">// å…è®¸è·¨åŸŸè¯·æ±‚ï¼ˆå®é™…éƒ¨ç½²æ—¶åº”é™å®šæ¥æºï¼‰</span></span>
<span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> AuthController</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">val</span><span style="color:#E1E4E8"> userRepository: </span><span style="color:#B392F0">UserRepository</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // ç®€å•åœ°å°†ç”¨æˆ·åæ˜ å°„åˆ°å½“å‰æŒ‘æˆ˜ï¼Œå®é™…å¯ç”¨åˆ†å¸ƒå¼ç¼“å­˜æˆ–æ•°æ®åº“</span></span>
<span class="line"><span style="color:#F97583">    private</span><span style="color:#F97583"> val</span><span style="color:#E1E4E8"> challengeMap </span><span style="color:#F97583">=</span><span style="color:#B392F0"> ConcurrentHashMap</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">String</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">String</span><span style="color:#E1E4E8">>()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // ç”ŸæˆæŒ‘æˆ˜ï¼šå®¢æˆ·ç«¯è¯·æ±‚å¸¦ username çš„ GET /auth/challenge?username=â€¦</span></span>
<span class="line"><span style="color:#B392F0">    @GetMapping</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"/auth/challenge"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">    fun</span><span style="color:#B392F0"> getChallenge</span><span style="color:#E1E4E8">(</span><span style="color:#B392F0">@RequestParam</span><span style="color:#E1E4E8"> username: </span><span style="color:#B392F0">String</span><span style="color:#E1E4E8">): </span><span style="color:#B392F0">Map</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">String</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">String</span><span style="color:#E1E4E8">> {</span></span>
<span class="line"><span style="color:#F97583">        val</span><span style="color:#E1E4E8"> user </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> userRepository.</span><span style="color:#B392F0">findById</span><span style="color:#E1E4E8">(username).</span><span style="color:#B392F0">orElseThrow</span><span style="color:#E1E4E8"> { </span></span>
<span class="line"><span style="color:#B392F0">            RuntimeException</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"ç”¨æˆ·ä¸å­˜åœ¨"</span><span style="color:#E1E4E8">) </span></span>
<span class="line"><span style="color:#E1E4E8">        }</span></span>
<span class="line"><span style="color:#6A737D">        // ç”ŸæˆéšæœºæŒ‘æˆ˜ï¼ˆHex å½¢å¼ï¼‰</span></span>
<span class="line"><span style="color:#F97583">        val</span><span style="color:#E1E4E8"> challenge </span><span style="color:#F97583">=</span><span style="color:#B392F0"> SecureRandom</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">ints</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">32</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">256</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">            .</span><span style="color:#B392F0">toArray</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">joinToString</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">""</span><span style="color:#E1E4E8">) { it.</span><span style="color:#B392F0">toUInt</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">toString</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">16</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">padStart</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">2</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'0'</span><span style="color:#E1E4E8">) }</span></span>
<span class="line"><span style="color:#6A737D">        // ä¿å­˜æŒ‘æˆ˜ç”¨äºåç»­éªŒè¯</span></span>
<span class="line"><span style="color:#E1E4E8">        challengeMap[username] </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> challenge</span></span>
<span class="line"><span style="color:#6A737D">        // è¿”å›æŒ‘æˆ˜å’Œç›å€¼</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#B392F0"> mapOf</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"challenge"</span><span style="color:#E1E4E8"> to challenge, </span><span style="color:#9ECBFF">"salt"</span><span style="color:#E1E4E8"> to user.salt)</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // éªŒè¯å“åº”ï¼šå®¢æˆ·ç«¯ POST {username, response} åˆ° /auth/verify</span></span>
<span class="line"><span style="color:#B392F0">    @PostMapping</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"/auth/verify"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">    fun</span><span style="color:#B392F0"> verifyResponse</span><span style="color:#E1E4E8">(</span><span style="color:#B392F0">@RequestBody</span><span style="color:#E1E4E8"> req: </span><span style="color:#B392F0">AuthRequest</span><span style="color:#E1E4E8">): </span><span style="color:#B392F0">Map</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">String</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">Any</span><span style="color:#E1E4E8">> {</span></span>
<span class="line"><span style="color:#F97583">        val</span><span style="color:#E1E4E8"> user </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> userRepository.</span><span style="color:#B392F0">findById</span><span style="color:#E1E4E8">(req.username).</span><span style="color:#B392F0">orElse</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">null</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">            ?: </span><span style="color:#F97583">return</span><span style="color:#B392F0"> mapOf</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"authenticated"</span><span style="color:#E1E4E8"> to </span><span style="color:#79B8FF">false</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">        val</span><span style="color:#E1E4E8"> challenge </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> challengeMap.</span><span style="color:#B392F0">remove</span><span style="color:#E1E4E8">(req.username) ?: </span><span style="color:#F97583">return</span><span style="color:#B392F0"> mapOf</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"authenticated"</span><span style="color:#E1E4E8"> to </span><span style="color:#79B8FF">false</span><span style="color:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">        // è®¡ç®—é¢„æœŸå“åº”ï¼šä½¿ç”¨å­˜å‚¨çš„ passwordHashï¼ˆhexï¼‰ä½œä¸º HMAC å¯†é’¥</span></span>
<span class="line"><span style="color:#F97583">        val</span><span style="color:#E1E4E8"> keyBytes </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> req.username.</span><span style="color:#B392F0">substring</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">toByteArray</span><span style="color:#E1E4E8">() </span><span style="color:#6A737D">// ä¸å®é™…ä½¿ç”¨username</span></span>
<span class="line"><span style="color:#6A737D">        // å°†åå…­è¿›åˆ¶å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„</span></span>
<span class="line"><span style="color:#F97583">        val</span><span style="color:#E1E4E8"> secretBytes </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> user.passwordHash.</span><span style="color:#B392F0">chunked</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">2</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">            .</span><span style="color:#B392F0">map</span><span style="color:#E1E4E8"> { it.</span><span style="color:#B392F0">toInt</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">16</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">toByte</span><span style="color:#E1E4E8">() }</span></span>
<span class="line"><span style="color:#E1E4E8">            .</span><span style="color:#B392F0">toByteArray</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#F97583">        val</span><span style="color:#E1E4E8"> mac </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> Mac.</span><span style="color:#B392F0">getInstance</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"HmacSHA256"</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">apply</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">            init</span><span style="color:#E1E4E8">(</span><span style="color:#B392F0">SecretKeySpec</span><span style="color:#E1E4E8">(secretBytes, </span><span style="color:#9ECBFF">"HmacSHA256"</span><span style="color:#E1E4E8">))</span></span>
<span class="line"><span style="color:#E1E4E8">        }</span></span>
<span class="line"><span style="color:#F97583">        val</span><span style="color:#E1E4E8"> expectedBytes </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> mac.</span><span style="color:#B392F0">doFinal</span><span style="color:#E1E4E8">(challenge.</span><span style="color:#B392F0">toByteArray</span><span style="color:#E1E4E8">(Charsets.UTF_8))</span></span>
<span class="line"><span style="color:#F97583">        val</span><span style="color:#E1E4E8"> expectedHex </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> expectedBytes.</span><span style="color:#B392F0">joinToString</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">""</span><span style="color:#E1E4E8">) { </span><span style="color:#9ECBFF">"%02x"</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">format</span><span style="color:#E1E4E8">(it) }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">        // æ¯”è¾ƒå“åº”</span></span>
<span class="line"><span style="color:#F97583">        val</span><span style="color:#E1E4E8"> success </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> expectedHex.</span><span style="color:#B392F0">equals</span><span style="color:#E1E4E8">(req.response, ignoreCase </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> true</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#B392F0"> mapOf</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"authenticated"</span><span style="color:#E1E4E8"> to success)</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p><strong>è¯´æ˜ï¼š</strong></p>
<ul>
<li>ç”¨æˆ·è¡¨ä¸­å­˜å‚¨äº†ç”¨æˆ·åã€<code>passwordHash</code>ï¼ˆä¾‹å¦‚ <code>SHA-256(å¯†ç +salt)</code> çš„åå…­è¿›åˆ¶ï¼‰å’Œ <code>salt</code>ã€‚åœ¨ç”ŸæˆæŒ‘æˆ˜æ—¶ï¼ŒæœåŠ¡å™¨ä»æ•°æ®åº“æŸ¥å‡ºç”¨æˆ·çš„ç›å€¼è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li>
<li>å®¢æˆ·ç«¯æ”¶åˆ°æŒ‘æˆ˜åï¼ŒæŒ‰å‰ç«¯ç¤ºä¾‹è®¡ç®—å“åº”ã€‚åœ¨éªŒè¯æ—¶ï¼ŒæœåŠ¡å™¨å–å‡ºä¹‹å‰ä¿å­˜çš„æŒ‘æˆ˜ï¼Œæ ¹æ®ç”¨æˆ·å­˜å‚¨çš„ <code>passwordHash</code> ï¼ˆè§†ä¸ºå¯†é’¥ï¼‰å’ŒæŒ‘æˆ˜è®¡ç®— HMAC-SHA256ï¼Œå¹¶å°†ç»“æœä¸å®¢æˆ·ç«¯æäº¤çš„ <code>response</code> æ¯”è¾ƒã€‚</li>
<li>å¦‚æœåŒ¹é…å³è®¤è¯æˆåŠŸï¼ˆ<code>authenticated: true</code>ï¼‰ã€‚æ³¨æ„ï¼šæœåŠ¡å™¨åœ¨éªŒè¯åä» <code>challengeMap</code> ä¸­ç§»é™¤è¯¥æŒ‘æˆ˜ï¼Œé¿å…é‡æ”¾ã€‚å®é™…ç”Ÿäº§ç¯å¢ƒè¿˜åº”å¯¹æŒ‘æˆ˜è®¾ç½®è¶…æ—¶ï¼Œå¹¶ä¿è¯ HTTPS é€šä¿¡ä»¥é˜²æ­¢æŒ‘æˆ˜è¢«ä¸­é—´äººç¯¡æ”¹æˆ–æ•è·ã€‚</li>
</ul>
<p>ä»¥ä¸Šå‰åç«¯ç¤ºä¾‹å±•ç¤ºäº†ä¸€ä¸ªåŸºäºæŒ‘æˆ˜-å“åº”çš„è®¤è¯æµç¨‹ï¼šå®¢æˆ·ç«¯æ— éœ€ç›´æ¥å‘é€å¯†ç ï¼ŒæœåŠ¡å™¨åªè¦æ ¡éªŒå“åº”åˆæ³•å³å¯ç¡®è®¤ç”¨æˆ·èº«ä»½ã€‚å½“ç„¶ï¼Œå®é™…ç³»ç»Ÿåº”è¿›ä¸€æ­¥ç»“åˆHTTPS/TLSã€JWT Tokenå‘æ”¾ã€ä»¤ç‰Œå¤±æ•ˆæœºåˆ¶ç­‰æ¥å®Œå–„æ•´ä½“å®‰å…¨æ€§ã€‚</p> </article><div class="tags"><div class="_tailmateTag_u5zwa_5"><a href="/blog/tag/ç½‘ç»œå®‰å…¨/">ç½‘ç»œå®‰å…¨</a></div><div class="_tailmateTag_u5zwa_5"><a href="/blog/tag/è½¯ä»¶æ¶æ„/">è½¯ä»¶æ¶æ„</a></div></div></main></div><div class="okTgGW_footer"> <p>Supported and developed by&nbsp;
<a href="https://github.com/misakamayako/" target="_blank" rel="noreferrer">misaka mayako</a> </p> <p>
Tech with <a href="https://astro.build/" target="_blank" rel="noreferrer">astro</a>,&nbsp;
<a href="https://tailwindcss.com/" target="_blank" rel="noreferrer">tailwindcss</a>,&nbsp;
        and <a href="https://pm2.keymetrics.io/" target="_blank" rel="noreferrer">pm2</a>,&nbsp;
</p> <p> feed back via <a href="mailto:misakamayaco@qq.com" target="_blank" rel="noreferrer">ğŸ“«</a></p> <a rel="license noreferrer" href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" class="absolute right-6 bottom-6"> <img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" class="inlin-block border-0" src="/cc4.0.png"> </a> </div></div><script type="module" is:global>
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('pre').forEach((block) => {
                if (block.dataset.language === 'plaintext') return
                const button = document.createElement('button')
                button.innerText = 'å¤åˆ¶'
                button.className =
                    'absolute top-2 right-2 bg-slate-800 text-white px-2 py-1 rounded text-sm opacity-50 hover:opacity-100 transition cursor-pointer'
                button.addEventListener('click', () => {
                    const code = block.querySelector('code')
                    if (code) {
                        navigator.clipboard.writeText(code.innerText).then(() => {
                            button.innerText = 'å·²å¤åˆ¶ï¼'
                            setTimeout(() => (button.innerText = 'å¤åˆ¶'), 1000)
                        })
                    }
                })
                block.classList.add('relative')
                block.appendChild(button)
            })
        })
    </script> </body></html>